"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/groups/route";
exports.ids = ["app/api/groups/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgroups%2Froute&page=%2Fapi%2Fgroups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgroups%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgroups%2Froute&page=%2Fapi%2Fgroups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgroups%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_bacze_Project_GroupShare_groupshare_project_src_app_api_groups_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/groups/route.js */ \"(rsc)/./src/app/api/groups/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/groups/route\",\n        pathname: \"/api/groups\",\n        filename: \"route\",\n        bundlePath: \"app/api/groups/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\bacze\\\\Project\\\\GroupShare\\\\groupshare-project\\\\src\\\\app\\\\api\\\\groups\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_bacze_Project_GroupShare_groupshare_project_src_app_api_groups_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/groups/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZncm91cHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdyb3VwcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmdyb3VwcyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNiYWN6ZSU1Q1Byb2plY3QlNUNHcm91cFNoYXJlJTVDZ3JvdXBzaGFyZS1wcm9qZWN0JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNiYWN6ZSU1Q1Byb2plY3QlNUNHcm91cFNoYXJlJTVDZ3JvdXBzaGFyZS1wcm9qZWN0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwQztBQUN2SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8/ZmYzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxiYWN6ZVxcXFxQcm9qZWN0XFxcXEdyb3VwU2hhcmVcXFxcZ3JvdXBzaGFyZS1wcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGdyb3Vwc1xcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZ3JvdXBzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ3JvdXBzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ncm91cHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxiYWN6ZVxcXFxQcm9qZWN0XFxcXEdyb3VwU2hhcmVcXFxcZ3JvdXBzaGFyZS1wcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGdyb3Vwc1xcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ3JvdXBzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgroups%2Froute&page=%2Fapi%2Fgroups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgroups%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/groups/route.js":
/*!*************************************!*\
  !*** ./src/app/api/groups/route.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/currentUser.js\");\n/* harmony import */ var _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database/supabase-admin-client */ \"(rsc)/./src/lib/database/supabase-admin-client.js\");\n// src/app/api/groups/route.js\n\n\n\n/**\r\n * GET /api/groups\r\n * Pobiera grupy użytkownika\r\n */ async function GET(request) {\n    try {\n        // Sprawdź autentykację\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(\"Fetching groups for user:\", user.id);\n        // Pobierz lub utwórz profil użytkownika\n        let userProfile = null;\n        try {\n            // Próba pobrania profilu\n            const { data: existingProfile, error: profileError } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").select(\"id\").eq(\"external_auth_id\", user.id).maybeSingle(); // Używamy maybeSingle zamiast single!\n            if (profileError && profileError.code !== \"PGRST116\") {\n                console.error(\"Error fetching user profile:\", profileError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Failed to fetch user profile\",\n                    details: profileError\n                }, {\n                    status: 500\n                });\n            }\n            // Jeśli znaleziono profil, użyj go\n            if (existingProfile) {\n                userProfile = existingProfile;\n                console.log(\"Found existing user profile:\", userProfile.id);\n            } else {\n                // Jeśli nie znaleziono profilu, utwórz nowy\n                console.log(\"Creating new user profile for:\", user.id);\n                // Przygotuj dane nowego profilu\n                const newProfileData = {\n                    external_auth_id: user.id,\n                    display_name: user.firstName ? `${user.firstName} ${user.lastName || \"\"}`.trim() : user.username || \"Nowy użytkownik\",\n                    email: user.emailAddresses[0]?.emailAddress || \"\",\n                    profile_type: \"both\",\n                    verification_level: \"basic\",\n                    created_at: new Date().toISOString(),\n                    updated_at: new Date().toISOString()\n                };\n                // Utwórz nowy profil\n                const { data: newProfile, error: createError } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").insert([\n                    newProfileData\n                ]).select(\"id\").single();\n                if (createError) {\n                    console.error(\"Error creating user profile:\", createError);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: \"Failed to create user profile\",\n                        details: createError\n                    }, {\n                        status: 500\n                    });\n                }\n                userProfile = newProfile;\n                console.log(\"Created new user profile:\", userProfile.id);\n            }\n        } catch (error) {\n            console.error(\"Exception fetching/creating user profile:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to process user profile\",\n                details: error.message\n            }, {\n                status: 500\n            });\n        }\n        if (!userProfile || !userProfile.id) {\n            console.error(\"No user profile available after profile handling\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User profile not available\",\n                details: \"Profile processing failed\"\n            }, {\n                status: 500\n            });\n        }\n        console.log(\"User profile ID:\", userProfile.id);\n        // Grupy, których użytkownik jest właścicielem\n        let ownedGroups = [];\n        try {\n            const { data: owned, error: ownedError } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"groups\").select(`\r\n          id,\r\n          name,\r\n          description,\r\n          created_at,\r\n          owner_id,\r\n          status\r\n        `).eq(\"owner_id\", userProfile.id);\n            if (ownedError) {\n                console.error(\"Error fetching owned groups:\", ownedError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Failed to fetch owned groups\",\n                    details: ownedError\n                }, {\n                    status: 500\n                });\n            }\n            // Dodaj informacje o roli i uzupełnij dane\n            ownedGroups = owned.map((group)=>({\n                    ...group,\n                    isOwner: true,\n                    role: \"owner\"\n                }));\n        } catch (error) {\n            console.error(\"Exception fetching owned groups:\", error);\n        }\n        // Grupy, których użytkownik jest członkiem\n        let memberGroups = [];\n        try {\n            const { data: memberships, error: membershipError } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"group_members\").select(`\r\n          role,\r\n          group:groups(\r\n            id, \r\n            name,\r\n            description,\r\n            created_at,\r\n            owner_id,\r\n            status\r\n          )\r\n        `).eq(\"user_id\", userProfile.id).eq(\"status\", \"active\");\n            if (membershipError) {\n                console.error(\"Error fetching group memberships:\", membershipError);\n            } else {\n                // Formatuj dane grup, do których użytkownik należy\n                memberGroups = memberships.filter((m)=>m.group) // Odfiltruj null/undefined\n                .map((membership)=>({\n                        ...membership.group,\n                        isOwner: false,\n                        role: membership.role\n                    }));\n            }\n        } catch (error) {\n            console.error(\"Exception fetching member groups:\", error);\n        }\n        // Pobierz dodatkowe informacje o grupach - liczba subskrypcji, członków itp.\n        const allGroups = [\n            ...ownedGroups,\n            ...memberGroups\n        ];\n        const enrichedGroups = await Promise.all(allGroups.map(async (group)=>{\n            try {\n                // Liczba członków grupy\n                const { count: memberCount } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"group_members\").select(\"id\", {\n                    count: \"exact\",\n                    head: true\n                }).eq(\"group_id\", group.id).eq(\"status\", \"active\");\n                // Liczba subskrypcji grupy\n                const { count: subscriptionCount } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"group_subs\").select(\"id\", {\n                    count: \"exact\",\n                    head: true\n                }).eq(\"group_id\", group.id);\n                return {\n                    ...group,\n                    member_count: memberCount || 0,\n                    subscription_count: subscriptionCount || 0\n                };\n            } catch (error) {\n                console.error(`Error enriching group ${group.id}:`, error);\n                return group;\n            }\n        }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(enrichedGroups);\n    } catch (error) {\n        console.error(\"Unexpected error in /api/groups:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"An unexpected error occurred\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * POST /api/groups\r\n * Tworzy nową grupę\r\n */ async function POST(request) {\n    try {\n        // Sprawdź autentykację\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Pobierz dane z żądania\n        const body = await request.json();\n        // Podstawowa walidacja\n        if (!body.name || body.name.trim().length < 3) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Group name is required and must be at least 3 characters long\"\n            }, {\n                status: 400\n            });\n        }\n        // Pobierz lub utwórz profil użytkownika\n        let userProfile = null;\n        try {\n            // Próba pobrania profilu\n            const { data: existingProfile, error: profileError } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").select(\"id\").eq(\"external_auth_id\", user.id).maybeSingle(); // Używamy maybeSingle zamiast single!\n            if (profileError && profileError.code !== \"PGRST116\") {\n                console.error(\"Error fetching user profile:\", profileError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Failed to fetch user profile\",\n                    details: profileError\n                }, {\n                    status: 500\n                });\n            }\n            // Jeśli znaleziono profil, użyj go\n            if (existingProfile) {\n                userProfile = existingProfile;\n            } else {\n                // Jeśli nie znaleziono profilu, utwórz nowy\n                const newProfileData = {\n                    external_auth_id: user.id,\n                    display_name: user.firstName ? `${user.firstName} ${user.lastName || \"\"}`.trim() : user.username || \"Nowy użytkownik\",\n                    email: user.emailAddresses[0]?.emailAddress || \"\",\n                    profile_type: \"both\",\n                    verification_level: \"basic\",\n                    created_at: new Date().toISOString(),\n                    updated_at: new Date().toISOString()\n                };\n                // Utwórz nowy profil\n                const { data: newProfile, error: createError } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").insert([\n                    newProfileData\n                ]).select(\"id\").single();\n                if (createError) {\n                    console.error(\"Error creating user profile:\", createError);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: \"Failed to create user profile\",\n                        details: createError\n                    }, {\n                        status: 500\n                    });\n                }\n                userProfile = newProfile;\n            }\n        } catch (error) {\n            console.error(\"Exception fetching/creating user profile:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to process user profile\",\n                details: error.message\n            }, {\n                status: 500\n            });\n        }\n        // Przygotuj dane grupy - używając tylko kolumn, które faktycznie istnieją w tabeli\n        const groupData = {\n            name: body.name.trim(),\n            description: body.description?.trim() || null,\n            owner_id: userProfile.id,\n            status: \"active\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        // Utwórz grupę\n        const { data: group, error: createError } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"groups\").insert([\n            groupData\n        ]).select().single();\n        if (createError) {\n            console.error(\"Error creating group:\", createError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to create group\",\n                details: createError\n            }, {\n                status: 500\n            });\n        }\n        // Dodaj właściciela jako członka grupy\n        const { error: memberError } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"group_members\").insert({\n            group_id: group.id,\n            user_id: userProfile.id,\n            role: \"admin\",\n            status: \"active\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        });\n        if (memberError) {\n            console.error(\"Error adding owner as member:\", memberError);\n        // Kontynuujemy mimo błędu - grupa została utworzona\n        }\n        // Dodaj informacje o roli\n        const enrichedGroup = {\n            ...group,\n            isOwner: true,\n            role: \"admin\"\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(enrichedGroup, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Unexpected error in POST /api/groups:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"An unexpected error occurred\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQVksSUFBSUMsT0FBT0MsV0FBVztZQUNsQ0MsWUFBWSxJQUFJRixPQUFPQyxXQUFXO1FBQ3BDO1FBRUYsSUFBSXFDLGFBQWE7WUFDZmhFLFFBQVFGLEtBQUssQ0FBQyxpQ0FBaUNrRTtRQUMvQyxvREFBb0Q7UUFDdEQ7UUFFQSwwQkFBMEI7UUFDMUIsTUFBTUcsZ0JBQWdCO1lBQ3BCLEdBQUc3QixLQUFLO1lBQ1JDLFNBQVM7WUFDVEMsTUFBTTtRQUNSO1FBRUEsT0FBT2pELHFEQUFZQSxDQUFDTSxJQUFJLENBQUNzRSxlQUFlO1lBQUVwRSxRQUFRO1FBQUk7SUFDeEQsRUFBRSxPQUFPRCxPQUFPO1FBQ2RFLFFBQVFGLEtBQUssQ0FBQyx5Q0FBeUNBO1FBQ3ZELE9BQU9QLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87WUFBZ0NjLFNBQVNkLE1BQU1tQyxPQUFPO1FBQUMsR0FDaEU7WUFBRWxDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JvdXBzaGFyZS1wcm9qZWN0Ly4vc3JjL2FwcC9hcGkvZ3JvdXBzL3JvdXRlLmpzP2Y5MDYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwcC9hcGkvZ3JvdXBzL3JvdXRlLmpzXHJcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgY3VycmVudFVzZXIgfSBmcm9tICdAY2xlcmsvbmV4dGpzL3NlcnZlcic7XHJcbmltcG9ydCBzdXBhYmFzZUFkbWluIGZyb20gJ0AvbGliL2RhdGFiYXNlL3N1cGFiYXNlLWFkbWluLWNsaWVudCc7XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvZ3JvdXBzXHJcbiAqIFBvYmllcmEgZ3J1cHkgdcW8eXRrb3duaWthXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gU3ByYXdkxbogYXV0ZW50eWthY2rEmVxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGN1cnJlbnRVc2VyKCk7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBncm91cHMgZm9yIHVzZXI6JywgdXNlci5pZCk7XHJcbiAgICBcclxuICAgIC8vIFBvYmllcnogbHViIHV0d8OzcnogcHJvZmlsIHXFvHl0a293bmlrYVxyXG4gICAgbGV0IHVzZXJQcm9maWxlID0gbnVsbDtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUHLDs2JhIHBvYnJhbmlhIHByb2ZpbHVcclxuICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Byb2ZpbGUsIGVycm9yOiBwcm9maWxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIHVzZXIuaWQpXHJcbiAgICAgICAgLm1heWJlU2luZ2xlKCk7IC8vIFXFvHl3YW15IG1heWJlU2luZ2xlIHphbWlhc3Qgc2luZ2xlIVxyXG4gICAgICBcclxuICAgICAgaWYgKHByb2ZpbGVFcnJvciAmJiBwcm9maWxlRXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgcHJvZmlsZTonLCBwcm9maWxlRXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggdXNlciBwcm9maWxlJywgZGV0YWlsczogcHJvZmlsZUVycm9yIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBKZcWbbGkgem5hbGV6aW9ubyBwcm9maWwsIHXFvHlqIGdvXHJcbiAgICAgIGlmIChleGlzdGluZ1Byb2ZpbGUpIHtcclxuICAgICAgICB1c2VyUHJvZmlsZSA9IGV4aXN0aW5nUHJvZmlsZTtcclxuICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgZXhpc3RpbmcgdXNlciBwcm9maWxlOicsIHVzZXJQcm9maWxlLmlkKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBKZcWbbGkgbmllIHpuYWxlemlvbm8gcHJvZmlsdSwgdXR3w7NyeiBub3d5XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIG5ldyB1c2VyIHByb2ZpbGUgZm9yOicsIHVzZXIuaWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFByenlnb3R1aiBkYW5lIG5vd2VnbyBwcm9maWx1XHJcbiAgICAgICAgY29uc3QgbmV3UHJvZmlsZURhdGEgPSB7XHJcbiAgICAgICAgICBleHRlcm5hbF9hdXRoX2lkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgZGlzcGxheV9uYW1lOiB1c2VyLmZpcnN0TmFtZSBcclxuICAgICAgICAgICAgPyBgJHt1c2VyLmZpcnN0TmFtZX0gJHt1c2VyLmxhc3ROYW1lIHx8ICcnfWAudHJpbSgpIFxyXG4gICAgICAgICAgICA6ICh1c2VyLnVzZXJuYW1lIHx8ICdOb3d5IHXFvHl0a293bmlrJyksXHJcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbEFkZHJlc3Nlc1swXT8uZW1haWxBZGRyZXNzIHx8ICcnLFxyXG4gICAgICAgICAgcHJvZmlsZV90eXBlOiAnYm90aCcsXHJcbiAgICAgICAgICB2ZXJpZmljYXRpb25fbGV2ZWw6ICdiYXNpYycsXHJcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFV0d8Ozcnogbm93eSBwcm9maWxcclxuICAgICAgICBjb25zdCB7IGRhdGE6IG5ld1Byb2ZpbGUsIGVycm9yOiBjcmVhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAgICAgLmluc2VydChbbmV3UHJvZmlsZURhdGFdKVxyXG4gICAgICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAgICAgLnNpbmdsZSgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgaWYgKGNyZWF0ZUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyB1c2VyIHByb2ZpbGU6JywgY3JlYXRlRXJyb3IpO1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSB1c2VyIHByb2ZpbGUnLCBkZXRhaWxzOiBjcmVhdGVFcnJvciB9LFxyXG4gICAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHVzZXJQcm9maWxlID0gbmV3UHJvZmlsZTtcclxuICAgICAgICBjb25zb2xlLmxvZygnQ3JlYXRlZCBuZXcgdXNlciBwcm9maWxlOicsIHVzZXJQcm9maWxlLmlkKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXhjZXB0aW9uIGZldGNoaW5nL2NyZWF0aW5nIHVzZXIgcHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHByb2Nlc3MgdXNlciBwcm9maWxlJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIXVzZXJQcm9maWxlIHx8ICF1c2VyUHJvZmlsZS5pZCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdObyB1c2VyIHByb2ZpbGUgYXZhaWxhYmxlIGFmdGVyIHByb2ZpbGUgaGFuZGxpbmcnKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdVc2VyIHByb2ZpbGUgbm90IGF2YWlsYWJsZScsIGRldGFpbHM6ICdQcm9maWxlIHByb2Nlc3NpbmcgZmFpbGVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnVXNlciBwcm9maWxlIElEOicsIHVzZXJQcm9maWxlLmlkKTtcclxuICAgIFxyXG4gICAgLy8gR3J1cHksIGt0w7NyeWNoIHXFvHl0a293bmlrIGplc3Qgd8WCYcWbY2ljaWVsZW1cclxuICAgIGxldCBvd25lZEdyb3VwcyA9IFtdO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhOiBvd25lZCwgZXJyb3I6IG93bmVkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgnZ3JvdXBzJylcclxuICAgICAgICAuc2VsZWN0KGBcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgbmFtZSxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgY3JlYXRlZF9hdCxcclxuICAgICAgICAgIG93bmVyX2lkLFxyXG4gICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgYClcclxuICAgICAgICAuZXEoJ293bmVyX2lkJywgdXNlclByb2ZpbGUuaWQpO1xyXG4gICAgICBcclxuICAgICAgaWYgKG93bmVkRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBvd25lZCBncm91cHM6Jywgb3duZWRFcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBvd25lZCBncm91cHMnLCBkZXRhaWxzOiBvd25lZEVycm9yIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBEb2RhaiBpbmZvcm1hY2plIG8gcm9saSBpIHV6dXBlxYJuaWogZGFuZVxyXG4gICAgICBvd25lZEdyb3VwcyA9IG93bmVkLm1hcChncm91cCA9PiAoe1xyXG4gICAgICAgIC4uLmdyb3VwLFxyXG4gICAgICAgIGlzT3duZXI6IHRydWUsXHJcbiAgICAgICAgcm9sZTogJ293bmVyJ1xyXG4gICAgICB9KSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gZmV0Y2hpbmcgb3duZWQgZ3JvdXBzOicsIGVycm9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gR3J1cHksIGt0w7NyeWNoIHXFvHl0a293bmlrIGplc3QgY3rFgm9ua2llbVxyXG4gICAgbGV0IG1lbWJlckdyb3VwcyA9IFtdO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhOiBtZW1iZXJzaGlwcywgZXJyb3I6IG1lbWJlcnNoaXBFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdncm91cF9tZW1iZXJzJylcclxuICAgICAgICAuc2VsZWN0KGBcclxuICAgICAgICAgIHJvbGUsXHJcbiAgICAgICAgICBncm91cDpncm91cHMoXHJcbiAgICAgICAgICAgIGlkLCBcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQsXHJcbiAgICAgICAgICAgIG93bmVyX2lkLFxyXG4gICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgIClcclxuICAgICAgICBgKVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJQcm9maWxlLmlkKVxyXG4gICAgICAgIC5lcSgnc3RhdHVzJywgJ2FjdGl2ZScpO1xyXG4gICAgICBcclxuICAgICAgaWYgKG1lbWJlcnNoaXBFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGdyb3VwIG1lbWJlcnNoaXBzOicsIG1lbWJlcnNoaXBFcnJvcik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRm9ybWF0dWogZGFuZSBncnVwLCBkbyBrdMOzcnljaCB1xbx5dGtvd25payBuYWxlxbx5XHJcbiAgICAgICAgbWVtYmVyR3JvdXBzID0gbWVtYmVyc2hpcHNcclxuICAgICAgICAgIC5maWx0ZXIobSA9PiBtLmdyb3VwKSAvLyBPZGZpbHRydWogbnVsbC91bmRlZmluZWRcclxuICAgICAgICAgIC5tYXAobWVtYmVyc2hpcCA9PiAoe1xyXG4gICAgICAgICAgICAuLi5tZW1iZXJzaGlwLmdyb3VwLFxyXG4gICAgICAgICAgICBpc093bmVyOiBmYWxzZSxcclxuICAgICAgICAgICAgcm9sZTogbWVtYmVyc2hpcC5yb2xlXHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBmZXRjaGluZyBtZW1iZXIgZ3JvdXBzOicsIGVycm9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUG9iaWVyeiBkb2RhdGtvd2UgaW5mb3JtYWNqZSBvIGdydXBhY2ggLSBsaWN6YmEgc3Vic2tyeXBjamksIGN6xYJvbmvDs3cgaXRwLlxyXG4gICAgY29uc3QgYWxsR3JvdXBzID0gWy4uLm93bmVkR3JvdXBzLCAuLi5tZW1iZXJHcm91cHNdO1xyXG4gICAgY29uc3QgZW5yaWNoZWRHcm91cHMgPSBhd2FpdCBQcm9taXNlLmFsbChhbGxHcm91cHMubWFwKGFzeW5jIChncm91cCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIExpY3piYSBjesWCb25rw7N3IGdydXB5XHJcbiAgICAgICAgY29uc3QgeyBjb3VudDogbWVtYmVyQ291bnQgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAgIC5mcm9tKCdncm91cF9tZW1iZXJzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG4gICAgICAgICAgLmVxKCdncm91cF9pZCcsIGdyb3VwLmlkKVxyXG4gICAgICAgICAgLmVxKCdzdGF0dXMnLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTGljemJhIHN1YnNrcnlwY2ppIGdydXB5XHJcbiAgICAgICAgY29uc3QgeyBjb3VudDogc3Vic2NyaXB0aW9uQ291bnQgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAgIC5mcm9tKCdncm91cF9zdWJzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG4gICAgICAgICAgLmVxKCdncm91cF9pZCcsIGdyb3VwLmlkKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLi4uZ3JvdXAsXHJcbiAgICAgICAgICBtZW1iZXJfY291bnQ6IG1lbWJlckNvdW50IHx8IDAsXHJcbiAgICAgICAgICBzdWJzY3JpcHRpb25fY291bnQ6IHN1YnNjcmlwdGlvbkNvdW50IHx8IDBcclxuICAgICAgICB9O1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGVucmljaGluZyBncm91cCAke2dyb3VwLmlkfTpgLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwO1xyXG4gICAgICB9XHJcbiAgICB9KSk7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihlbnJpY2hlZEdyb3Vwcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1VuZXhwZWN0ZWQgZXJyb3IgaW4gL2FwaS9ncm91cHM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9ncm91cHNcclxuICogVHdvcnp5IG5vd8SFIGdydXDEmVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBTcHJhd2TFuiBhdXRlbnR5a2FjasSZXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3VycmVudFVzZXIoKTtcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUG9iaWVyeiBkYW5lIHogxbzEhWRhbmlhXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBcclxuICAgIC8vIFBvZHN0YXdvd2Egd2FsaWRhY2phXHJcbiAgICBpZiAoIWJvZHkubmFtZSB8fCBib2R5Lm5hbWUudHJpbSgpLmxlbmd0aCA8IDMpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdHcm91cCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGF0IGxlYXN0IDMgY2hhcmFjdGVycyBsb25nJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBQb2JpZXJ6IGx1YiB1dHfDs3J6IHByb2ZpbCB1xbx5dGtvd25pa2FcclxuICAgIGxldCB1c2VyUHJvZmlsZSA9IG51bGw7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFByw7NiYSBwb2JyYW5pYSBwcm9maWx1XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdQcm9maWxlLCBlcnJvcjogcHJvZmlsZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAuZXEoJ2V4dGVybmFsX2F1dGhfaWQnLCB1c2VyLmlkKVxyXG4gICAgICAgIC5tYXliZVNpbmdsZSgpOyAvLyBVxbx5d2FteSBtYXliZVNpbmdsZSB6YW1pYXN0IHNpbmdsZSFcclxuICAgICAgXHJcbiAgICAgIGlmIChwcm9maWxlRXJyb3IgJiYgcHJvZmlsZUVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIHByb2ZpbGU6JywgcHJvZmlsZUVycm9yKTtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHVzZXIgcHJvZmlsZScsIGRldGFpbHM6IHByb2ZpbGVFcnJvciB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gSmXFm2xpIHpuYWxlemlvbm8gcHJvZmlsLCB1xbx5aiBnb1xyXG4gICAgICBpZiAoZXhpc3RpbmdQcm9maWxlKSB7XHJcbiAgICAgICAgdXNlclByb2ZpbGUgPSBleGlzdGluZ1Byb2ZpbGU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSmXFm2xpIG5pZSB6bmFsZXppb25vIHByb2ZpbHUsIHV0d8Ozcnogbm93eVxyXG4gICAgICAgIGNvbnN0IG5ld1Byb2ZpbGVEYXRhID0ge1xyXG4gICAgICAgICAgZXh0ZXJuYWxfYXV0aF9pZDogdXNlci5pZCxcclxuICAgICAgICAgIGRpc3BsYXlfbmFtZTogdXNlci5maXJzdE5hbWUgXHJcbiAgICAgICAgICAgID8gYCR7dXNlci5maXJzdE5hbWV9ICR7dXNlci5sYXN0TmFtZSB8fCAnJ31gLnRyaW0oKSBcclxuICAgICAgICAgICAgOiAodXNlci51c2VybmFtZSB8fCAnTm93eSB1xbx5dGtvd25paycpLFxyXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWxBZGRyZXNzZXNbMF0/LmVtYWlsQWRkcmVzcyB8fCAnJyxcclxuICAgICAgICAgIHByb2ZpbGVfdHlwZTogJ2JvdGgnLFxyXG4gICAgICAgICAgdmVyaWZpY2F0aW9uX2xldmVsOiAnYmFzaWMnLFxyXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBVdHfDs3J6IG5vd3kgcHJvZmlsXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBuZXdQcm9maWxlLCBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgICAgIC5pbnNlcnQoW25ld1Byb2ZpbGVEYXRhXSlcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIGlmIChjcmVhdGVFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlciBwcm9maWxlOicsIGNyZWF0ZUVycm9yKTtcclxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgdXNlciBwcm9maWxlJywgZGV0YWlsczogY3JlYXRlRXJyb3IgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB1c2VyUHJvZmlsZSA9IG5ld1Byb2ZpbGU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBmZXRjaGluZy9jcmVhdGluZyB1c2VyIHByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBwcm9jZXNzIHVzZXIgcHJvZmlsZScsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUHJ6eWdvdHVqIGRhbmUgZ3J1cHkgLSB1xbx5d2FqxIVjIHR5bGtvIGtvbHVtbiwga3TDs3JlIGZha3R5Y3puaWUgaXN0bmllasSFIHcgdGFiZWxpXHJcbiAgICBjb25zdCBncm91cERhdGEgPSB7XHJcbiAgICAgIG5hbWU6IGJvZHkubmFtZS50cmltKCksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBib2R5LmRlc2NyaXB0aW9uPy50cmltKCkgfHwgbnVsbCxcclxuICAgICAgb3duZXJfaWQ6IHVzZXJQcm9maWxlLmlkLFxyXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxyXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAvLyBOaWUgZG9kYWplbXkgcG9sYSBwcml2YWN5LCBibyBuaWUgaXN0bmllamUgdyBiYXppZSBkYW55Y2hcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFV0d8OzcnogZ3J1cMSZXHJcbiAgICBjb25zdCB7IGRhdGE6IGdyb3VwLCBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ2dyb3VwcycpXHJcbiAgICAgIC5pbnNlcnQoW2dyb3VwRGF0YV0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChjcmVhdGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBncm91cDonLCBjcmVhdGVFcnJvcik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBncm91cCcsIGRldGFpbHM6IGNyZWF0ZUVycm9yIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIERvZGFqIHfFgmHFm2NpY2llbGEgamFrbyBjesWCb25rYSBncnVweVxyXG4gICAgY29uc3QgeyBlcnJvcjogbWVtYmVyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ2dyb3VwX21lbWJlcnMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBncm91cF9pZDogZ3JvdXAuaWQsXHJcbiAgICAgICAgdXNlcl9pZDogdXNlclByb2ZpbGUuaWQsXHJcbiAgICAgICAgcm9sZTogJ2FkbWluJywgLy8gV8WCYcWbY2ljaWVsIGplc3QgYXV0b21hdHljem5pZSBhZG1pbmVtXHJcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcclxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgXHJcbiAgICBpZiAobWVtYmVyRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIG93bmVyIGFzIG1lbWJlcjonLCBtZW1iZXJFcnJvcik7XHJcbiAgICAgIC8vIEtvbnR5bnV1amVteSBtaW1vIGLFgsSZZHUgLSBncnVwYSB6b3N0YcWCYSB1dHdvcnpvbmFcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRG9kYWogaW5mb3JtYWNqZSBvIHJvbGlcclxuICAgIGNvbnN0IGVucmljaGVkR3JvdXAgPSB7XHJcbiAgICAgIC4uLmdyb3VwLFxyXG4gICAgICBpc093bmVyOiB0cnVlLFxyXG4gICAgICByb2xlOiAnYWRtaW4nXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZW5yaWNoZWRHcm91cCwgeyBzdGF0dXM6IDIwMSB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBlcnJvciBpbiBQT1NUIC9hcGkvZ3JvdXBzOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3VycmVudFVzZXIiLCJzdXBhYmFzZUFkbWluIiwiR0VUIiwicmVxdWVzdCIsInVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwiaWQiLCJ1c2VyUHJvZmlsZSIsImRhdGEiLCJleGlzdGluZ1Byb2ZpbGUiLCJwcm9maWxlRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJtYXliZVNpbmdsZSIsImNvZGUiLCJkZXRhaWxzIiwibmV3UHJvZmlsZURhdGEiLCJleHRlcm5hbF9hdXRoX2lkIiwiZGlzcGxheV9uYW1lIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJ0cmltIiwidXNlcm5hbWUiLCJlbWFpbCIsImVtYWlsQWRkcmVzc2VzIiwiZW1haWxBZGRyZXNzIiwicHJvZmlsZV90eXBlIiwidmVyaWZpY2F0aW9uX2xldmVsIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRfYXQiLCJuZXdQcm9maWxlIiwiY3JlYXRlRXJyb3IiLCJpbnNlcnQiLCJzaW5nbGUiLCJtZXNzYWdlIiwib3duZWRHcm91cHMiLCJvd25lZCIsIm93bmVkRXJyb3IiLCJtYXAiLCJncm91cCIsImlzT3duZXIiLCJyb2xlIiwibWVtYmVyR3JvdXBzIiwibWVtYmVyc2hpcHMiLCJtZW1iZXJzaGlwRXJyb3IiLCJmaWx0ZXIiLCJtIiwibWVtYmVyc2hpcCIsImFsbEdyb3VwcyIsImVucmljaGVkR3JvdXBzIiwiUHJvbWlzZSIsImFsbCIsImNvdW50IiwibWVtYmVyQ291bnQiLCJoZWFkIiwic3Vic2NyaXB0aW9uQ291bnQiLCJtZW1iZXJfY291bnQiLCJzdWJzY3JpcHRpb25fY291bnQiLCJQT1NUIiwiYm9keSIsIm5hbWUiLCJsZW5ndGgiLCJncm91cERhdGEiLCJkZXNjcmlwdGlvbiIsIm93bmVyX2lkIiwibWVtYmVyRXJyb3IiLCJncm91cF9pZCIsInVzZXJfaWQiLCJlbnJpY2hlZEdyb3VwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/groups/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/database/supabase-admin-client.js":
/*!***************************************************!*\
  !*** ./src/lib/database/supabase-admin-client.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUserProfileAdmin: () => (/* binding */ createUserProfileAdmin),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getGroupMembersAdmin: () => (/* binding */ getGroupMembersAdmin),\n/* harmony export */   getSubscriptionPlatformsAdmin: () => (/* binding */ getSubscriptionPlatformsAdmin),\n/* harmony export */   getUserByAuthIdAdmin: () => (/* binding */ getUserByAuthIdAdmin),\n/* harmony export */   handleSupabaseAdminError: () => (/* binding */ handleSupabaseAdminError),\n/* harmony export */   logAdminActivity: () => (/* binding */ logAdminActivity),\n/* harmony export */   updateUserProfileAdmin: () => (/* binding */ updateUserProfileAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// src/lib/supabase-admin-client.js\n\n// Inicjalizacja klienta Supabase z uprawnieniami administratora\nconst supabaseUrl = \"https://nimrnohkesysfppcmujb.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n// Sprawdzenie czy zmienne środowiskowe są ustawione\nif (!supabaseUrl || !supabaseServiceKey) {\n    console.error(\"Missing environment variables: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY\");\n}\n// Uwaga: Ten klient ma pełne uprawnienia do bazy danych, używaj ostrożnie!\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        persistSession: false,\n        autoRefreshToken: false\n    }\n});\n// Funkcja pomocnicza do obsługi błędów Supabase\nconst handleSupabaseAdminError = (error)=>{\n    console.error(\"Supabase Admin error:\", error);\n    return {\n        error: true,\n        message: error.message || \"Nieoczekiwany błąd administratora\",\n        code: error.code || \"unknown_error\",\n        details: error.details || null\n    };\n};\n// Funkcje administratora do zarządzania użytkownikami\n// Funkcja do tworzenia profilu użytkownika przez administratora\nconst createUserProfileAdmin = async (userProfile)=>{\n    try {\n        const { data, error } = await supabaseAdmin.from(\"user_profiles\").insert([\n            userProfile\n        ]).select().single();\n        if (error) {\n            if (error.code === \"23505\") {\n                console.warn(\"Admin: Pr\\xf3ba utworzenia duplikatu profilu użytkownika:\", error);\n                // Jeśli profil już istnieje, pobierz go\n                const { data: existingUser, error: fetchError } = await supabaseAdmin.from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", userProfile.external_auth_id).single();\n                if (fetchError) {\n                    throw new Error(\"Nie można pobrać istniejącego profilu: \" + fetchError.message);\n                }\n                return existingUser;\n            } else {\n                throw new Error(error.message || \"Nie udało się utworzyć profilu użytkownika\");\n            }\n        }\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do pobierania profilu użytkownika przez administratora\nconst getUserByAuthIdAdmin = async (authId)=>{\n    if (!authId) return null;\n    try {\n        const { data, error } = await supabaseAdmin.from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", authId).single();\n        if (error) {\n            if (error.code === \"PGRST116\") {\n                // Nie znaleziono - to normalny przypadek\n                return null;\n            } else {\n                console.error(\"Admin: Błąd pobierania profilu użytkownika:\", error);\n                throw new Error(error.message || \"Nie udało się pobrać profilu użytkownika\");\n            }\n        }\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do aktualizacji profilu użytkownika przez administratora\nconst updateUserProfileAdmin = async (userId, updates)=>{\n    try {\n        const { data, error } = await supabaseAdmin.from(\"user_profiles\").update(updates).eq(\"id\", userId).select().single();\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do pobierania platform subskrypcyjnych przez administratora\nconst getSubscriptionPlatformsAdmin = async ()=>{\n    try {\n        const { data, error } = await supabaseAdmin.from(\"subscription_platforms\").select(\"*\").order(\"name\");\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        return [];\n    }\n};\n// Funkcja do pobierania członków grupy przez administratora\nconst getGroupMembersAdmin = async (groupId)=>{\n    try {\n        const { data, error } = await supabaseAdmin.from(\"group_members\").select(`\r\n        *,\r\n        user:user_profiles(id, display_name, avatar_url, email)\r\n      `).eq(\"group_id\", groupId);\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        return [];\n    }\n};\n// Zapisz wszystkie aktywności administratora do logu bezpieczeństwa\nconst logAdminActivity = async (action, resourceType, resourceId, details = {})=>{\n    try {\n        const { data, error } = await supabaseAdmin.from(\"security_logs\").insert([\n            {\n                action_type: action,\n                resource_type: resourceType,\n                resource_id: resourceId,\n                status: \"success\",\n                details: details\n            }\n        ]);\n        if (error) console.error(\"Błąd logowania aktywności administratora:\", error);\n    } catch (error) {\n        console.error(\"Wyjątek podczas logowania aktywności administratora:\", error);\n    }\n};\n// Eksport klienta administratora jako domyślny\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabaseAdmin);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RhdGFiYXNlL3N1cGFiYXNlLWFkbWluLWNsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxtQ0FBbUM7QUFDa0I7QUFFckQsZ0VBQWdFO0FBQ2hFLE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxxQkFBcUJILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0FBRWhFLG9EQUFvRDtBQUNwRCxJQUFJLENBQUNMLGVBQWUsQ0FBQ0ksb0JBQW9CO0lBQ3ZDRSxRQUFRQyxLQUFLLENBQ1g7QUFFSjtBQUVBLDJFQUEyRTtBQUMzRSxNQUFNQyxnQkFBZ0JULG1FQUFZQSxDQUFDQyxhQUFhSSxvQkFBb0I7SUFDbEVLLE1BQU07UUFDSkMsZ0JBQWdCO1FBQ2hCQyxrQkFBa0I7SUFDcEI7QUFDRjtBQUVBLGdEQUFnRDtBQUN6QyxNQUFNQywyQkFBMkIsQ0FBQ0w7SUFDdkNELFFBQVFDLEtBQUssQ0FBQyx5QkFBeUJBO0lBRXZDLE9BQU87UUFDTEEsT0FBTztRQUNQTSxTQUFTTixNQUFNTSxPQUFPLElBQUk7UUFDMUJDLE1BQU1QLE1BQU1PLElBQUksSUFBSTtRQUNwQkMsU0FBU1IsTUFBTVEsT0FBTyxJQUFJO0lBQzVCO0FBQ0YsRUFBRTtBQUVGLHNEQUFzRDtBQUV0RCxnRUFBZ0U7QUFDekQsTUFBTUMseUJBQXlCLE9BQU9DO0lBQzNDLElBQUk7UUFDRixNQUFNLEVBQUVDLElBQUksRUFBRVgsS0FBSyxFQUFFLEdBQUcsTUFBTUMsY0FDM0JXLElBQUksQ0FBQyxpQkFDTEMsTUFBTSxDQUFDO1lBQUNIO1NBQVksRUFDcEJJLE1BQU0sR0FDTkMsTUFBTTtRQUVULElBQUlmLE9BQU87WUFDVCxJQUFJQSxNQUFNTyxJQUFJLEtBQUssU0FBUztnQkFDMUJSLFFBQVFpQixJQUFJLENBQUMsNkRBQTBEaEI7Z0JBRXZFLHdDQUF3QztnQkFDeEMsTUFBTSxFQUFFVyxNQUFNTSxZQUFZLEVBQUVqQixPQUFPa0IsVUFBVSxFQUFFLEdB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QyxLQUFLLENBQUMsNkNBQTZDQTtJQUV4RSxFQUFFLE9BQU9BLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLHdEQUF3REE7SUFDeEU7QUFDRixFQUFFO0FBRUYsK0NBQStDO0FBQy9DLGlFQUFlQyxhQUFhQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JvdXBzaGFyZS1wcm9qZWN0Ly4vc3JjL2xpYi9kYXRhYmFzZS9zdXBhYmFzZS1hZG1pbi1jbGllbnQuanM/MzQ3NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL3N1cGFiYXNlLWFkbWluLWNsaWVudC5qc1xyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5cclxuLy8gSW5pY2phbGl6YWNqYSBrbGllbnRhIFN1cGFiYXNlIHogdXByYXduaWVuaWFtaSBhZG1pbmlzdHJhdG9yYVxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcclxuXHJcbi8vIFNwcmF3ZHplbmllIGN6eSB6bWllbm5lIMWbcm9kb3dpc2tvd2Ugc8SFIHVzdGF3aW9uZVxyXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcclxuICBjb25zb2xlLmVycm9yKFxyXG4gICAgJ01pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzOiBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgb3IgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSdcclxuICApO1xyXG59XHJcblxyXG4vLyBVd2FnYTogVGVuIGtsaWVudCBtYSBwZcWCbmUgdXByYXduaWVuaWEgZG8gYmF6eSBkYW55Y2gsIHXFvHl3YWogb3N0cm/FvG5pZSFcclxuY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XHJcbiAgYXV0aDoge1xyXG4gICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxyXG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBGdW5rY2phIHBvbW9jbmljemEgZG8gb2JzxYJ1Z2kgYsWCxJlkw7N3IFN1cGFiYXNlXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IgPSAoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBBZG1pbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGVycm9yOiB0cnVlLFxyXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAnTmllb2N6ZWtpd2FueSBixYLEhWQgYWRtaW5pc3RyYXRvcmEnLFxyXG4gICAgY29kZTogZXJyb3IuY29kZSB8fCAndW5rbm93bl9lcnJvcicsXHJcbiAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzIHx8IG51bGwsXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIEZ1bmtjamUgYWRtaW5pc3RyYXRvcmEgZG8gemFyesSFZHphbmlhIHXFvHl0a293bmlrYW1pXHJcblxyXG4vLyBGdW5rY2phIGRvIHR3b3J6ZW5pYSBwcm9maWx1IHXFvHl0a293bmlrYSBwcnpleiBhZG1pbmlzdHJhdG9yYVxyXG5leHBvcnQgY29uc3QgY3JlYXRlVXNlclByb2ZpbGVBZG1pbiA9IGFzeW5jICh1c2VyUHJvZmlsZSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLmluc2VydChbdXNlclByb2ZpbGVdKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICcyMzUwNScpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0FkbWluOiBQcsOzYmEgdXR3b3J6ZW5pYSBkdXBsaWthdHUgcHJvZmlsdSB1xbx5dGtvd25pa2E6JywgZXJyb3IpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEplxZtsaSBwcm9maWwganXFvCBpc3RuaWVqZSwgcG9iaWVyeiBnb1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdVc2VyLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAuZXEoJ2V4dGVybmFsX2F1dGhfaWQnLCB1c2VyUHJvZmlsZS5leHRlcm5hbF9hdXRoX2lkKVxyXG4gICAgICAgICAgLnNpbmdsZSgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgaWYgKGZldGNoRXJyb3IpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTmllIG1vxbxuYSBwb2JyYcSHIGlzdG5pZWrEhWNlZ28gcHJvZmlsdTogJyArIGZldGNoRXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBleGlzdGluZ1VzZXI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ05pZSB1ZGHFgm8gc2nEmSB1dHdvcnp5xIcgcHJvZmlsdSB1xbx5dGtvd25pa2EnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaGFuZGxlU3VwYWJhc2VBZG1pbkVycm9yKGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEZ1bmtjamEgZG8gcG9iaWVyYW5pYSBwcm9maWx1IHXFvHl0a293bmlrYSBwcnpleiBhZG1pbmlzdHJhdG9yYVxyXG5leHBvcnQgY29uc3QgZ2V0VXNlckJ5QXV0aElkQWRtaW4gPSBhc3luYyAoYXV0aElkKSA9PiB7XHJcbiAgaWYgKCFhdXRoSWQpIHJldHVybiBudWxsO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIGF1dGhJZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdQR1JTVDExNicpIHtcclxuICAgICAgICAvLyBOaWUgem5hbGV6aW9ubyAtIHRvIG5vcm1hbG55IHByenlwYWRla1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FkbWluOiBCxYLEhWQgcG9iaWVyYW5pYSBwcm9maWx1IHXFvHl0a293bmlrYTonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ05pZSB1ZGHFgm8gc2nEmSBwb2JyYcSHIHByb2ZpbHUgdcW8eXRrb3duaWthJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGhhbmRsZVN1cGFiYXNlQWRtaW5FcnJvcihlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIGRvIGFrdHVhbGl6YWNqaSBwcm9maWx1IHXFvHl0a293bmlrYSBwcnpleiBhZG1pbmlzdHJhdG9yYVxyXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlclByb2ZpbGVBZG1pbiA9IGFzeW5jICh1c2VySWQsIHVwZGF0ZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgIC51cGRhdGUodXBkYXRlcylcclxuICAgICAgLmVxKCdpZCcsIHVzZXJJZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGhhbmRsZVN1cGFiYXNlQWRtaW5FcnJvcihlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIGRvIHBvYmllcmFuaWEgcGxhdGZvcm0gc3Vic2tyeXBjeWpueWNoIHByemV6IGFkbWluaXN0cmF0b3JhXHJcbmV4cG9ydCBjb25zdCBnZXRTdWJzY3JpcHRpb25QbGF0Zm9ybXNBZG1pbiA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgnc3Vic2NyaXB0aW9uX3BsYXRmb3JtcycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAub3JkZXIoJ25hbWUnKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGhhbmRsZVN1cGFiYXNlQWRtaW5FcnJvcihlcnJvcik7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVua2NqYSBkbyBwb2JpZXJhbmlhIGN6xYJvbmvDs3cgZ3J1cHkgcHJ6ZXogYWRtaW5pc3RyYXRvcmFcclxuZXhwb3J0IGNvbnN0IGdldEdyb3VwTWVtYmVyc0FkbWluID0gYXN5bmMgKGdyb3VwSWQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgnZ3JvdXBfbWVtYmVycycpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgdXNlcjp1c2VyX3Byb2ZpbGVzKGlkLCBkaXNwbGF5X25hbWUsIGF2YXRhcl91cmwsIGVtYWlsKVxyXG4gICAgICBgKVxyXG4gICAgICAuZXEoJ2dyb3VwX2lkJywgZ3JvdXBJZCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IoZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFphcGlzeiB3c3p5c3RraWUgYWt0eXdub8WbY2kgYWRtaW5pc3RyYXRvcmEgZG8gbG9ndSBiZXpwaWVjemXFhHN0d2FcclxuZXhwb3J0IGNvbnN0IGxvZ0FkbWluQWN0aXZpdHkgPSBhc3luYyAoYWN0aW9uLCByZXNvdXJjZVR5cGUsIHJlc291cmNlSWQsIGRldGFpbHMgPSB7fSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCdzZWN1cml0eV9sb2dzJylcclxuICAgICAgLmluc2VydChbe1xyXG4gICAgICAgIGFjdGlvbl90eXBlOiBhY3Rpb24sXHJcbiAgICAgICAgcmVzb3VyY2VfdHlwZTogcmVzb3VyY2VUeXBlLFxyXG4gICAgICAgIHJlc291cmNlX2lkOiByZXNvdXJjZUlkLFxyXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIGRldGFpbHM6IGRldGFpbHMsXHJcbiAgICAgIH1dKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKCdCxYLEhWQgbG9nb3dhbmlhIGFrdHl3bm/Fm2NpIGFkbWluaXN0cmF0b3JhOicsIGVycm9yKTtcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdXeWrEhXRlayBwb2RjemFzIGxvZ293YW5pYSBha3R5d25vxZtjaSBhZG1pbmlzdHJhdG9yYTonLCBlcnJvcik7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRWtzcG9ydCBrbGllbnRhIGFkbWluaXN0cmF0b3JhIGpha28gZG9tecWbbG55XHJcbmV4cG9ydCBkZWZhdWx0IHN1cGFiYXNlQWRtaW47Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJzdXBhYmFzZUFkbWluIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIiwiYXV0b1JlZnJlc2hUb2tlbiIsImhhbmRsZVN1cGFiYXNlQWRtaW5FcnJvciIsIm1lc3NhZ2UiLCJjb2RlIiwiZGV0YWlscyIsImNyZWF0ZVVzZXJQcm9maWxlQWRtaW4iLCJ1c2VyUHJvZmlsZSIsImRhdGEiLCJmcm9tIiwiaW5zZXJ0Iiwic2VsZWN0Iiwic2luZ2xlIiwid2FybiIsImV4aXN0aW5nVXNlciIsImZldGNoRXJyb3IiLCJlcSIsImV4dGVybmFsX2F1dGhfaWQiLCJFcnJvciIsImdldFVzZXJCeUF1dGhJZEFkbWluIiwiYXV0aElkIiwidXBkYXRlVXNlclByb2ZpbGVBZG1pbiIsInVzZXJJZCIsInVwZGF0ZXMiLCJ1cGRhdGUiLCJnZXRTdWJzY3JpcHRpb25QbGF0Zm9ybXNBZG1pbiIsIm9yZGVyIiwiZ2V0R3JvdXBNZW1iZXJzQWRtaW4iLCJncm91cElkIiwibG9nQWRtaW5BY3Rpdml0eSIsImFjdGlvbiIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJhY3Rpb25fdHlwZSIsInJlc291cmNlX3R5cGUiLCJyZXNvdXJjZV9pZCIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database/supabase-admin-client.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@clerk","vendor-chunks/next","vendor-chunks/tslib","vendor-chunks/cookie","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgroups%2Froute&page=%2Fapi%2Fgroups%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgroups%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();