"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/notifications/[id]/route";
exports.ids = ["app/api/notifications/[id]/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute&page=%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute&page=%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_bacze_Project_GroupShare_groupshare_project_src_app_api_notifications_id_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/notifications/[id]/route.js */ \"(rsc)/./src/app/api/notifications/[id]/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/notifications/[id]/route\",\n        pathname: \"/api/notifications/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/notifications/[id]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\bacze\\\\Project\\\\GroupShare\\\\groupshare-project\\\\src\\\\app\\\\api\\\\notifications\\\\[id]\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_bacze_Project_GroupShare_groupshare_project_src_app_api_notifications_id_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/notifications/[id]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZub3RpZmljYXRpb25zJTJGJTVCaWQlNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm5vdGlmaWNhdGlvbnMlMkYlNUJpZCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm5vdGlmaWNhdGlvbnMlMkYlNUJpZCU1RCUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNiYWN6ZSU1Q1Byb2plY3QlNUNHcm91cFNoYXJlJTVDZ3JvdXBzaGFyZS1wcm9qZWN0JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNiYWN6ZSU1Q1Byb2plY3QlNUNHcm91cFNoYXJlJTVDZ3JvdXBzaGFyZS1wcm9qZWN0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1RDtBQUNwSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8/MGYxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxiYWN6ZVxcXFxQcm9qZWN0XFxcXEdyb3VwU2hhcmVcXFxcZ3JvdXBzaGFyZS1wcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG5vdGlmaWNhdGlvbnNcXFxcW2lkXVxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbm90aWZpY2F0aW9ucy9baWRdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbm90aWZpY2F0aW9ucy9baWRdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ub3RpZmljYXRpb25zL1tpZF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxiYWN6ZVxcXFxQcm9qZWN0XFxcXEdyb3VwU2hhcmVcXFxcZ3JvdXBzaGFyZS1wcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG5vdGlmaWNhdGlvbnNcXFxcW2lkXVxcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbm90aWZpY2F0aW9ucy9baWRdL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute&page=%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/notifications/[id]/route.js":
/*!*************************************************!*\
  !*** ./src/app/api/notifications/[id]/route.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/currentUser.js\");\n/* harmony import */ var _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database/supabase-admin-client */ \"(rsc)/./src/lib/database/supabase-admin-client.js\");\n/* harmony import */ var _services_notification_notification_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/notification/notification-service */ \"(rsc)/./src/services/notification/notification-service.js\");\n// src/app/api/notifications/[id]/route.js\n\n\n\n\n/**\r\n * GET /api/notifications/[id]\r\n * Pobiera pojedyncze powiadomienie\r\n */ async function GET(request, { params }) {\n    try {\n        const { id } = params;\n        // Sprawdź autentykację\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Pobierz ID profilu użytkownika\n        const { data: userProfile } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").select(\"id\").eq(\"external_auth_id\", user.id).single();\n        if (!userProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User profile not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Pobierz powiadomienie z bazy danych\n        const { data: notification, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"notifications\").select(\"*\").eq(\"id\", id).eq(\"user_id\", userProfile.id).single();\n        if (error) {\n            console.error(\"Error fetching notification:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to fetch notification\",\n                details: error.message\n            }, {\n                status: 500\n            });\n        }\n        if (!notification) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Notification not found\"\n            }, {\n                status: 404\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(notification);\n    } catch (error) {\n        console.error(\"Error fetching notification:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch notification\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * PATCH /api/notifications/[id]\r\n * Aktualizuje status przeczytania pojedynczego powiadomienia\r\n */ async function PATCH(request, { params }) {\n    try {\n        const { id } = params;\n        // Sprawdź autentykację\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Pobierz parametry z body (is_read)\n        const body = await request.json();\n        const { is_read } = body;\n        if (is_read === undefined) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"is_read field is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Pobierz ID profilu użytkownika\n        const { data: userProfile } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").select(\"id\").eq(\"external_auth_id\", user.id).single();\n        if (!userProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User profile not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Zaktualizuj powiadomienie - używając bezpośredniego update zamiast service dla większej kontroli\n        const { data, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"notifications\").update({\n            is_read\n        }).eq(\"id\", id).eq(\"user_id\", userProfile.id).select().single();\n        if (error) {\n            console.error(\"Error updating notification:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to update notification\",\n                details: error.message\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data);\n    } catch (error) {\n        console.error(\"Error updating notification:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to update notification\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * DELETE /api/notifications/[id]\r\n * Usuwa pojedyncze powiadomienie\r\n */ async function DELETE(request, { params }) {\n    try {\n        const { id } = params;\n        // Sprawdź autentykację\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Pobierz ID profilu użytkownika\n        const { data: userProfile } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").select(\"id\").eq(\"external_auth_id\", user.id).single();\n        if (!userProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User profile not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Usuń powiadomienie przy użyciu serwisu\n        const success = await _services_notification_notification_service__WEBPACK_IMPORTED_MODULE_2__.notificationService.deleteNotification(id, userProfile.id);\n        if (!success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to delete notification\"\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Error deleting notification:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to delete notification\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9ub3RpZmljYXRpb25zL1tpZF0vcm91dGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLDBDQUEwQztBQUNDO0FBQ1E7QUFDYztBQUNrQjtBQUVuRjs7O0NBR0MsR0FDTSxlQUFlSSxJQUFJQyxPQUFPLEVBQUUsRUFBRUMsTUFBTSxFQUFFO0lBQzNDLElBQUk7UUFDRixNQUFNLEVBQUVDLEVBQUUsRUFBRSxHQUFHRDtRQUVmLHVCQUF1QjtRQUN2QixNQUFNRSxPQUFPLE1BQU1QLGlFQUFXQTtRQUM5QixJQUFJLENBQUNPLE1BQU07WUFDVCxPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWUsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3BFO1FBRUEsaUNBQWlDO1FBQ2pDLE1BQU0sRUFBRUMsTUFBTUMsV0FBVyxFQUFFLEdBQUcsTUFBTVgsMkVBQWFBLENBQzlDWSxJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQyxNQUNQQyxFQUFFLENBQUMsb0JBQW9CUixLQUFLRCxFQUFFLEVBQzlCVSxNQUFNO1FBRVQsSUFBSSxDQUFDSixhQUFhO1lBQ2hCLE9BQU9iLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBeUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzlFO1FBRUEsc0NBQXNDO1FBQ3RDLE1BQU0sRUFBRUMsTUFBTU0sWUFBWSxFQUFFUixLQUFLLEVBQUUsR0FBRyxNQUFNUiwyRUFBYUEsQ0FDdERZLElBQUksQ0FBQyxpQkFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxNQUFNVCxJQUNUUyxFQUFFLENBQUMsV0FBV0gsWUFBWU4sRUFBRSxFQUM1QlUsTUFBTTtRQUVULElBQUlQLE9BQU87WUFDVFMsUUFBUVQsS0FBSyxDQUFDLGdDQUFnQ0E7WUFDOUMsT0FBT1YscURBQVlBLENBQUNTLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87Z0JBQWdDVSxTQUFTVixNQUFN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RUEsaUNBQWlDO1FBQ2pDLE1BQU0sRUFBRUMsTUFBTUMsV0FBVyxFQUFFLEdBQUcsTUFBTVgsMkVBQWFBLENBQzlDWSxJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQyxNQUNQQyxFQUFFLENBQUMsb0JBQW9CUixLQUFLRCxFQUFFLEVBQzlCVSxNQUFNO1FBRVQsSUFBSSxDQUFDSixhQUFhO1lBQ2hCLE9BQU9iLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBeUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzlFO1FBRUEseUNBQXlDO1FBQ3pDLE1BQU1pQixVQUFVLE1BQU16Qiw0RkFBbUJBLENBQUMwQixrQkFBa0IsQ0FBQ3RCLElBQUlNLFlBQVlOLEVBQUU7UUFFL0UsSUFBSSxDQUFDcUIsU0FBUztZQUNaLE9BQU81QixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFnQyxHQUN6QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsT0FBT1gscURBQVlBLENBQUNTLElBQUksQ0FBQztZQUFFbUIsU0FBUztRQUFLO0lBQzNDLEVBQUUsT0FBT2xCLE9BQU87UUFDZFMsUUFBUVQsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBT1YscURBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUMsT0FBTztZQUFpQ1UsU0FBU1YsTUFBTVcsT0FBTztRQUFDLEdBQ2pFO1lBQUVWLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JvdXBzaGFyZS1wcm9qZWN0Ly4vc3JjL2FwcC9hcGkvbm90aWZpY2F0aW9ucy9baWRdL3JvdXRlLmpzPzQ5MTciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwcC9hcGkvbm90aWZpY2F0aW9ucy9baWRdL3JvdXRlLmpzXHJcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgY3VycmVudFVzZXIgfSBmcm9tICdAY2xlcmsvbmV4dGpzL3NlcnZlcic7XHJcbmltcG9ydCBzdXBhYmFzZUFkbWluIGZyb20gJ0AvbGliL2RhdGFiYXNlL3N1cGFiYXNlLWFkbWluLWNsaWVudCc7XHJcbmltcG9ydCB7IG5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL25vdGlmaWNhdGlvbi9ub3RpZmljYXRpb24tc2VydmljZSc7XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvbm90aWZpY2F0aW9ucy9baWRdXHJcbiAqIFBvYmllcmEgcG9qZWR5bmN6ZSBwb3dpYWRvbWllbmllXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QsIHsgcGFyYW1zIH0pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcGFyYW1zO1xyXG4gICAgXHJcbiAgICAvLyBTcHJhd2TFuiBhdXRlbnR5a2FjasSZXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3VycmVudFVzZXIoKTtcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQb2JpZXJ6IElEIHByb2ZpbHUgdcW8eXRrb3duaWthXHJcbiAgICBjb25zdCB7IGRhdGE6IHVzZXJQcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAuZXEoJ2V4dGVybmFsX2F1dGhfaWQnLCB1c2VyLmlkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKCF1c2VyUHJvZmlsZSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VzZXIgcHJvZmlsZSBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUG9iaWVyeiBwb3dpYWRvbWllbmllIHogYmF6eSBkYW55Y2hcclxuICAgIGNvbnN0IHsgZGF0YTogbm90aWZpY2F0aW9uLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgaWQpXHJcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJQcm9maWxlLmlkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5vdGlmaWNhdGlvbjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIG5vdGlmaWNhdGlvbicsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIW5vdGlmaWNhdGlvbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ05vdGlmaWNhdGlvbiBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKG5vdGlmaWNhdGlvbik7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5vdGlmaWNhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggbm90aWZpY2F0aW9uJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUEFUQ0ggL2FwaS9ub3RpZmljYXRpb25zL1tpZF1cclxuICogQWt0dWFsaXp1amUgc3RhdHVzIHByemVjenl0YW5pYSBwb2plZHluY3plZ28gcG93aWFkb21pZW5pYVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBBVENIKHJlcXVlc3QsIHsgcGFyYW1zIH0pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcGFyYW1zO1xyXG4gICAgXHJcbiAgICAvLyBTcHJhd2TFuiBhdXRlbnR5a2FjasSZXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3VycmVudFVzZXIoKTtcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQb2JpZXJ6IHBhcmFtZXRyeSB6IGJvZHkgKGlzX3JlYWQpXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBjb25zdCB7IGlzX3JlYWQgfSA9IGJvZHk7XHJcblxyXG4gICAgaWYgKGlzX3JlYWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ2lzX3JlYWQgZmllbGQgaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUG9iaWVyeiBJRCBwcm9maWx1IHXFvHl0a293bmlrYVxyXG4gICAgY29uc3QgeyBkYXRhOiB1c2VyUHJvZmlsZSB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgLmVxKCdleHRlcm5hbF9hdXRoX2lkJywgdXNlci5pZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmICghdXNlclByb2ZpbGUpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVc2VyIHByb2ZpbGUgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFpha3R1YWxpenVqIHBvd2lhZG9taWVuaWUgLSB1xbx5d2FqxIVjIGJlenBvxZtyZWRuaWVnbyB1cGRhdGUgemFtaWFzdCBzZXJ2aWNlIGRsYSB3acSZa3N6ZWoga29udHJvbGlcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxyXG4gICAgICAudXBkYXRlKHtcclxuICAgICAgICBpc19yZWFkXHJcbiAgICAgICAgLy8gVXN1bmnEmXRvIHJlYWRfYXQsIGt0w7NyZSBuaWUgaXN0bmllamUgdyBzY2hlbWFjaWVcclxuICAgICAgfSlcclxuICAgICAgLmVxKCdpZCcsIGlkKVxyXG4gICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VyUHJvZmlsZS5pZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgbm90aWZpY2F0aW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIG5vdGlmaWNhdGlvbicsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZGF0YSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIG5vdGlmaWNhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIG5vdGlmaWNhdGlvbicsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERFTEVURSAvYXBpL25vdGlmaWNhdGlvbnMvW2lkXVxyXG4gKiBVc3V3YSBwb2plZHluY3plIHBvd2lhZG9taWVuaWVcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUocmVxdWVzdCwgeyBwYXJhbXMgfSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSBwYXJhbXM7XHJcbiAgICBcclxuICAgIC8vIFNwcmF3ZMW6IGF1dGVudHlrYWNqxJlcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBvYmllcnogSUQgcHJvZmlsdSB1xbx5dGtvd25pa2FcclxuICAgIGNvbnN0IHsgZGF0YTogdXNlclByb2ZpbGUgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCcpXHJcbiAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIHVzZXIuaWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoIXVzZXJQcm9maWxlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVXNlciBwcm9maWxlIG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVc3XFhCBwb3dpYWRvbWllbmllIHByenkgdcW8eWNpdSBzZXJ3aXN1XHJcbiAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgbm90aWZpY2F0aW9uU2VydmljZS5kZWxldGVOb3RpZmljYXRpb24oaWQsIHVzZXJQcm9maWxlLmlkKTtcclxuXHJcbiAgICBpZiAoIXN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZGVsZXRlIG5vdGlmaWNhdGlvbicgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBub3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGRlbGV0ZSBub3RpZmljYXRpb24nLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3VycmVudFVzZXIiLCJzdXBhYmFzZUFkbWluIiwibm90aWZpY2F0aW9uU2VydmljZSIsIkdFVCIsInJlcXVlc3QiLCJwYXJhbXMiLCJpZCIsInVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwidXNlclByb2ZpbGUiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJub3RpZmljYXRpb24iLCJjb25zb2xlIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJQQVRDSCIsImJvZHkiLCJpc19yZWFkIiwidW5kZWZpbmVkIiwidXBkYXRlIiwiREVMRVRFIiwic3VjY2VzcyIsImRlbGV0ZU5vdGlmaWNhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/notifications/[id]/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/database/supabase-admin-client.js":
/*!***************************************************!*\
  !*** ./src/lib/database/supabase-admin-client.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNotification: () => (/* binding */ createNotification),\n/* harmony export */   createUserProfileAdmin: () => (/* binding */ createUserProfileAdmin),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getGroupMembersAdmin: () => (/* binding */ getGroupMembersAdmin),\n/* harmony export */   getSubscriptionPlatformsAdmin: () => (/* binding */ getSubscriptionPlatformsAdmin),\n/* harmony export */   getUnreadNotificationsCount: () => (/* binding */ getUnreadNotificationsCount),\n/* harmony export */   getUserByAuthIdAdmin: () => (/* binding */ getUserByAuthIdAdmin),\n/* harmony export */   handleSupabaseAdminError: () => (/* binding */ handleSupabaseAdminError),\n/* harmony export */   logAdminActivity: () => (/* binding */ logAdminActivity),\n/* harmony export */   updateUserProfileAdmin: () => (/* binding */ updateUserProfileAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// src/lib/database/supabase-admin-client.js\n\n// Inicjalizacja klienta Supabase z uprawnieniami administratora\n// Dodajemy wartości domyślne w przypadku braku zmiennych środowiskowych\nconst supabaseUrl = \"https://nimrnohkesysfppcmujb.supabase.co\" || 0;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"\";\n// Sprawdzenie czy zmienne środowiskowe są ustawione\nif (!supabaseUrl || !supabaseServiceKey) {\n    console.error(\"Missing environment variables: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY\");\n}\n// Sprawdź, czy zmienne są poprawne przed utworzeniem klienta\nconst isConfigValid = supabaseUrl && supabaseServiceKey;\n// Uwaga: Ten klient ma pełne uprawnienia do bazy danych, używaj ostrożnie!\nconst supabaseAdmin = isConfigValid ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        persistSession: false,\n        autoRefreshToken: false\n    }\n}) : null;\n// Funkcja pomocnicza do obsługi błędów Supabase\nconst handleSupabaseAdminError = (error)=>{\n    console.error(\"Supabase Admin error:\", error);\n    return {\n        error: true,\n        message: error.message || \"Nieoczekiwany błąd administratora\",\n        code: error.code || \"unknown_error\",\n        details: error.details || null\n    };\n};\n// Funkcje administratora do zarządzania użytkownikami\n// Funkcja do tworzenia profilu użytkownika przez administratora\nconst createUserProfileAdmin = async (userProfile)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"user_profiles\").insert([\n            userProfile\n        ]).select().single();\n        if (error) {\n            if (error.code === \"23505\") {\n                console.warn(\"Admin: Pr\\xf3ba utworzenia duplikatu profilu użytkownika:\", error);\n                // Jeśli profil już istnieje, pobierz go\n                const { data: existingUser, error: fetchError } = await supabaseAdmin.from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", userProfile.external_auth_id).single();\n                if (fetchError) {\n                    throw new Error(\"Nie można pobrać istniejącego profilu: \" + fetchError.message);\n                }\n                return existingUser;\n            } else {\n                throw new Error(error.message || \"Nie udało się utworzyć profilu użytkownika\");\n            }\n        }\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do pobierania profilu użytkownika przez administratora\nconst getUserByAuthIdAdmin = async (authId)=>{\n    if (!authId) return null;\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", authId).single();\n        if (error) {\n            if (error.code === \"PGRST116\") {\n                // Nie znaleziono - to normalny przypadek\n                return null;\n            } else {\n                console.error(\"Admin: Błąd pobierania profilu użytkownika:\", error);\n                throw new Error(error.message || \"Nie udało się pobrać profilu użytkownika\");\n            }\n        }\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do aktualizacji profilu użytkownika przez administratora\nconst updateUserProfileAdmin = async (userId, updates)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"user_profiles\").update(updates).eq(\"id\", userId).select().single();\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do pobierania platform subskrypcyjnych przez administratora\nconst getSubscriptionPlatformsAdmin = async ()=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"subscription_platforms\").select(\"*\").order(\"name\");\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        return [];\n    }\n};\n// Funkcja do pobierania członków grupy przez administratora\nconst getGroupMembersAdmin = async (groupId)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"group_members\").select(`\r\n        *,\r\n        user:user_profiles(id, display_name, avatar_url, email)\r\n      `).eq(\"group_id\", groupId);\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        return [];\n    }\n};\n// Zapisz wszystkie aktywności administratora do logu bezpieczeństwa\nconst logAdminActivity = async (action, resourceType, resourceId, details = {})=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            console.error(\"Database client is not initialized. Could not log activity.\");\n            return;\n        }\n        const { data, error } = await supabaseAdmin.from(\"security_logs\").insert([\n            {\n                action_type: action,\n                resource_type: resourceType,\n                resource_id: resourceId,\n                status: \"success\",\n                details: details\n            }\n        ]);\n        if (error) console.error(\"Błąd logowania aktywności administratora:\", error);\n    } catch (error) {\n        console.error(\"Wyjątek podczas logowania aktywności administratora:\", error);\n    }\n};\n// Funkcja do zarządzania powiadomieniami użytkowników\nconst createNotification = async (userId, type, title, content, relatedEntityType = null, relatedEntityId = null)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"notifications\").insert([\n            {\n                user_id: userId,\n                type,\n                title,\n                content,\n                related_entity_type: relatedEntityType,\n                related_entity_id: relatedEntityId,\n                is_read: false,\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            }\n        ]).select().single();\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do pobierania nieprzeczytanych powiadomień użytkownika\nconst getUnreadNotificationsCount = async (userId)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { count, error } = await supabaseAdmin.from(\"notifications\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        }).eq(\"user_id\", userId).eq(\"is_read\", false);\n        if (error) throw error;\n        return count || 0;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        return 0;\n    }\n};\n// Sprawdź czy klient jest poprawnie skonfigurowany\nif (!supabaseAdmin) {\n    console.error(\"UWAGA: Klient supabaseAdmin nie został zainicjalizowany poprawnie. Upewnij się, że zmienne środowiskowe są ustawione.\");\n}\n// Eksport klienta administratora jako domyślny\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabaseAdmin);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RhdGFiYXNlL3N1cGFiYXNlLWFkbWluLWNsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLDRDQUE0QztBQUNTO0FBRXJELGdFQUFnRTtBQUNoRSx3RUFBd0U7QUFDeEUsTUFBTUMsY0FBY0MsMENBQW9DLElBQUk7QUFDNUQsTUFBTUcscUJBQXFCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QixJQUFJO0FBRXBFLG9EQUFvRDtBQUNwRCxJQUFJLENBQUNMLGVBQWUsQ0FBQ0ksb0JBQW9CO0lBQ3ZDRSxRQUFRQyxLQUFLLENBQ1g7QUFFSjtBQUVBLDZEQUE2RDtBQUM3RCxNQUFNQyxnQkFBZ0JSLGVBQWVJO0FBRXJDLDJFQUEyRTtBQUMzRSxNQUFNSyxnQkFBZ0JELGdCQUNsQlQsbUVBQVlBLENBQUNDLGFBQWFJLG9CQUFvQjtJQUM1Q00sTUFBTTtRQUNKQyxnQkFBZ0I7UUFDaEJDLGtCQUFrQjtJQUNwQjtBQUNGLEtBQ0E7QUFFSixnREFBZ0Q7QUFDekMsTUFBTUMsMkJBQTJCLENBQUNOO0lBQ3ZDRCxRQUFRQyxLQUFLLENBQUMseUJBQXlCQTtJQUV2QyxPQUFPO1FBQ0xBLE9BQU87UUFDUE8sU0FBU1AsTUFBTU8sT0FBTyxJQUFJO1FBQzFCQyxNQUFNUixNQUFNUSxJQUFJLElBQUk7UUFDcEJDLFNBQVNULE1BQU1TLE9BQU8sSUFBSTtJQUM1QjtBQUNGLEVBQUU7QUFFRixzREFBc0Q7QUFFdEQsZ0VBQWdFO0FBQ3pELE1BQU1DLHlCQUF5QixPQUFPQztJQUMzQyxJQUFJO1FBQ0YsbUNBQW1DO1FBQ25DLElBQUksQ0FBQ1QsZUFBZTtZQUNsQixNQUFNLElBQUlVLE1BQU07UUFDbEI7UUFFQSxNQUFNLEVBQUVDLElBQUksRUFBRWIsS0FBSyxFQUFFLEdBQUcsTUFBTUUsY0FDM0JZLElBQUksQ0FBQyxpQkFDTEMsTUFBTSxDQUFDO1lBQUNKO1NBQVksRUFDcEJLLE1BQU0sR0FDTkMsTUFBTTtRQUVULElBQUlqQixP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QyxXQUFXO2dCQUNsQ0MsWUFBWSxJQUFJRixPQUFPQyxXQUFXO1lBQ3BDO1NBQUUsRUFDRHJDLE1BQU0sR0FDTkMsTUFBTTtRQUVULElBQUlqQixPQUFPLE1BQU1BO1FBRWpCLE9BQU9hO0lBQ1QsRUFBRSxPQUFPYixPQUFPO1FBQ2RNLHlCQUF5Qk47UUFDekIsTUFBTUE7SUFDUjtBQUNGLEVBQUU7QUFFRixpRUFBaUU7QUFDMUQsTUFBTXVELDhCQUE4QixPQUFPN0I7SUFDaEQsSUFBSTtRQUNGLG1DQUFtQztRQUNuQyxJQUFJLENBQUN4QixlQUFlO1lBQ2xCLE1BQU0sSUFBSVUsTUFBTTtRQUNsQjtRQUVBLE1BQU0sRUFBRTRDLEtBQUssRUFBRXhELEtBQUssRUFBRSxHQUFHLE1BQU1FLGNBQzVCWSxJQUFJLENBQUMsaUJBQ0xFLE1BQU0sQ0FBQyxLQUFLO1lBQUV3QyxPQUFPO1lBQVNDLE1BQU07UUFBSyxHQUN6Q3BDLEVBQUUsQ0FBQyxXQUFXSyxRQUNkTCxFQUFFLENBQUMsV0FBVztRQUVqQixJQUFJckIsT0FBTyxNQUFNQTtRQUVqQixPQUFPd0QsU0FBUztJQUNsQixFQUFFLE9BQU94RCxPQUFPO1FBQ2RNLHlCQUF5Qk47UUFDekIsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVGLG1EQUFtRDtBQUNuRCxJQUFJLENBQUNFLGVBQWU7SUFDbEJILFFBQVFDLEtBQUssQ0FBQztBQUNoQjtBQUVBLCtDQUErQztBQUMvQyxpRUFBZUUsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9saWIvZGF0YWJhc2Uvc3VwYWJhc2UtYWRtaW4tY2xpZW50LmpzPzM0NzciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9kYXRhYmFzZS9zdXBhYmFzZS1hZG1pbi1jbGllbnQuanNcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbi8vIEluaWNqYWxpemFjamEga2xpZW50YSBTdXBhYmFzZSB6IHVwcmF3bmllbmlhbWkgYWRtaW5pc3RyYXRvcmFcclxuLy8gRG9kYWplbXkgd2FydG/Fm2NpIGRvbXnFm2xuZSB3IHByenlwYWRrdSBicmFrdSB6bWllbm55Y2ggxZtyb2Rvd2lza293eWNoXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICcnO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8ICcnO1xyXG5cclxuLy8gU3ByYXdkemVuaWUgY3p5IHptaWVubmUgxZtyb2Rvd2lza293ZSBzxIUgdXN0YXdpb25lXHJcbmlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlU2VydmljZUtleSkge1xyXG4gIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAnTWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXM6IE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBvciBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZJ1xyXG4gICk7XHJcbn1cclxuXHJcbi8vIFNwcmF3ZMW6LCBjenkgem1pZW5uZSBzxIUgcG9wcmF3bmUgcHJ6ZWQgdXR3b3J6ZW5pZW0ga2xpZW50YVxyXG5jb25zdCBpc0NvbmZpZ1ZhbGlkID0gc3VwYWJhc2VVcmwgJiYgc3VwYWJhc2VTZXJ2aWNlS2V5O1xyXG5cclxuLy8gVXdhZ2E6IFRlbiBrbGllbnQgbWEgcGXFgm5lIHVwcmF3bmllbmlhIGRvIGJhenkgZGFueWNoLCB1xbx5d2FqIG9zdHJvxbxuaWUhXHJcbmNvbnN0IHN1cGFiYXNlQWRtaW4gPSBpc0NvbmZpZ1ZhbGlkIFxyXG4gID8gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXksIHtcclxuICAgICAgYXV0aDoge1xyXG4gICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcclxuICAgICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgOiBudWxsO1xyXG5cclxuLy8gRnVua2NqYSBwb21vY25pY3phIGRvIG9ic8WCdWdpIGLFgsSZZMOzdyBTdXBhYmFzZVxyXG5leHBvcnQgY29uc3QgaGFuZGxlU3VwYWJhc2VBZG1pbkVycm9yID0gKGVycm9yKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgQWRtaW4gZXJyb3I6JywgZXJyb3IpO1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICBlcnJvcjogdHJ1ZSxcclxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ05pZW9jemVraXdhbnkgYsWCxIVkIGFkbWluaXN0cmF0b3JhJyxcclxuICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgJ3Vua25vd25fZXJyb3InLFxyXG4gICAgZGV0YWlsczogZXJyb3IuZGV0YWlscyB8fCBudWxsLFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyBGdW5rY2plIGFkbWluaXN0cmF0b3JhIGRvIHphcnrEhWR6YW5pYSB1xbx5dGtvd25pa2FtaVxyXG5cclxuLy8gRnVua2NqYSBkbyB0d29yemVuaWEgcHJvZmlsdSB1xbx5dGtvd25pa2EgcHJ6ZXogYWRtaW5pc3RyYXRvcmFcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVzZXJQcm9maWxlQWRtaW4gPSBhc3luYyAodXNlclByb2ZpbGUpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gU3ByYXdkxbogY3p5IGtsaWVudCBqZXN0IGRvc3TEmXBueVxyXG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY2xpZW50IGlzIG5vdCBpbml0aWFsaXplZC4gQ2hlY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAuaW5zZXJ0KFt1c2VyUHJvZmlsZV0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJzIzNTA1Jykge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignQWRtaW46IFByw7NiYSB1dHdvcnplbmlhIGR1cGxpa2F0dSBwcm9maWx1IHXFvHl0a293bmlrYTonLCBlcnJvcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSmXFm2xpIHByb2ZpbCBqdcW8IGlzdG5pZWplLCBwb2JpZXJ6IGdvXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1VzZXIsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIHVzZXJQcm9maWxlLmV4dGVybmFsX2F1dGhfaWQpXHJcbiAgICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICBpZiAoZmV0Y2hFcnJvcikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOaWUgbW/FvG5hIHBvYnJhxIcgaXN0bmllasSFY2VnbyBwcm9maWx1OiAnICsgZmV0Y2hFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nVXNlcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSB8fCAnTmllIHVkYcWCbyBzacSZIHV0d29yennEhyBwcm9maWx1IHXFvHl0a293bmlrYScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IoZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVua2NqYSBkbyBwb2JpZXJhbmlhIHByb2ZpbHUgdcW8eXRrb3duaWthIHByemV6IGFkbWluaXN0cmF0b3JhXHJcbmV4cG9ydCBjb25zdCBnZXRVc2VyQnlBdXRoSWRBZG1pbiA9IGFzeW5jIChhdXRoSWQpID0+IHtcclxuICBpZiAoIWF1dGhJZCkgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIC8vIFNwcmF3ZMW6IGN6eSBrbGllbnQgamVzdCBkb3N0xJlwbnlcclxuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNsaWVudCBpcyBub3QgaW5pdGlhbGl6ZWQuIENoZWNrIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIGF1dGhJZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdQR1JTVDExNicpIHtcclxuICAgICAgICAvLyBOaWUgem5hbGV6aW9ubyAtIHRvIG5vcm1hbG55IHByenlwYWRla1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FkbWluOiBCxYLEhWQgcG9iaWVyYW5pYSBwcm9maWx1IHXFvHl0a293bmlrYTonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ05pZSB1ZGHFgm8gc2nEmSBwb2JyYcSHIHByb2ZpbHUgdcW8eXRrb3duaWthJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGhhbmRsZVN1cGFiYXNlQWRtaW5FcnJvcihlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIGRvIGFrdHVhbGl6YWNqaSBwcm9maWx1IHXFvHl0a293bmlrYSBwcnpleiBhZG1pbmlzdHJhdG9yYVxyXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlclByb2ZpbGVBZG1pbiA9IGFzeW5jICh1c2VySWQsIHVwZGF0ZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gU3ByYXdkxbogY3p5IGtsaWVudCBqZXN0IGRvc3TEmXBueVxyXG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY2xpZW50IGlzIG5vdCBpbml0aWFsaXplZC4gQ2hlY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAudXBkYXRlKHVwZGF0ZXMpXHJcbiAgICAgIC5lcSgnaWQnLCB1c2VySWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IoZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVua2NqYSBkbyBwb2JpZXJhbmlhIHBsYXRmb3JtIHN1YnNrcnlwY3lqbnljaCBwcnpleiBhZG1pbmlzdHJhdG9yYVxyXG5leHBvcnQgY29uc3QgZ2V0U3Vic2NyaXB0aW9uUGxhdGZvcm1zQWRtaW4gPSBhc3luYyAoKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFNwcmF3ZMW6IGN6eSBrbGllbnQgamVzdCBkb3N0xJlwbnlcclxuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNsaWVudCBpcyBub3QgaW5pdGlhbGl6ZWQuIENoZWNrIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCdzdWJzY3JpcHRpb25fcGxhdGZvcm1zJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5vcmRlcignbmFtZScpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaGFuZGxlU3VwYWJhc2VBZG1pbkVycm9yKGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIGRvIHBvYmllcmFuaWEgY3rFgm9ua8OzdyBncnVweSBwcnpleiBhZG1pbmlzdHJhdG9yYVxyXG5leHBvcnQgY29uc3QgZ2V0R3JvdXBNZW1iZXJzQWRtaW4gPSBhc3luYyAoZ3JvdXBJZCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBTcHJhd2TFuiBjenkga2xpZW50IGplc3QgZG9zdMSZcG55XHJcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkLiBDaGVjayBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgnZ3JvdXBfbWVtYmVycycpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgdXNlcjp1c2VyX3Byb2ZpbGVzKGlkLCBkaXNwbGF5X25hbWUsIGF2YXRhcl91cmwsIGVtYWlsKVxyXG4gICAgICBgKVxyXG4gICAgICAuZXEoJ2dyb3VwX2lkJywgZ3JvdXBJZCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IoZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFphcGlzeiB3c3p5c3RraWUgYWt0eXdub8WbY2kgYWRtaW5pc3RyYXRvcmEgZG8gbG9ndSBiZXpwaWVjemXFhHN0d2FcclxuZXhwb3J0IGNvbnN0IGxvZ0FkbWluQWN0aXZpdHkgPSBhc3luYyAoYWN0aW9uLCByZXNvdXJjZVR5cGUsIHJlc291cmNlSWQsIGRldGFpbHMgPSB7fSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBTcHJhd2TFuiBjenkga2xpZW50IGplc3QgZG9zdMSZcG55XHJcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgY2xpZW50IGlzIG5vdCBpbml0aWFsaXplZC4gQ291bGQgbm90IGxvZyBhY3Rpdml0eS4nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ3NlY3VyaXR5X2xvZ3MnKVxyXG4gICAgICAuaW5zZXJ0KFt7XHJcbiAgICAgICAgYWN0aW9uX3R5cGU6IGFjdGlvbixcclxuICAgICAgICByZXNvdXJjZV90eXBlOiByZXNvdXJjZVR5cGUsXHJcbiAgICAgICAgcmVzb3VyY2VfaWQ6IHJlc291cmNlSWQsXHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgZGV0YWlsczogZGV0YWlscyxcclxuICAgICAgfV0pO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoJ0LFgsSFZCBsb2dvd2FuaWEgYWt0eXdub8WbY2kgYWRtaW5pc3RyYXRvcmE6JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1d5asSFdGVrIHBvZGN6YXMgbG9nb3dhbmlhIGFrdHl3bm/Fm2NpIGFkbWluaXN0cmF0b3JhOicsIGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIGRvIHphcnrEhWR6YW5pYSBwb3dpYWRvbWllbmlhbWkgdcW8eXRrb3duaWvDs3dcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU5vdGlmaWNhdGlvbiA9IGFzeW5jICh1c2VySWQsIHR5cGUsIHRpdGxlLCBjb250ZW50LCByZWxhdGVkRW50aXR5VHlwZSA9IG51bGwsIHJlbGF0ZWRFbnRpdHlJZCA9IG51bGwpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gU3ByYXdkxbogY3p5IGtsaWVudCBqZXN0IGRvc3TEmXBueVxyXG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY2xpZW50IGlzIG5vdCBpbml0aWFsaXplZC4gQ2hlY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxyXG4gICAgICAuaW5zZXJ0KFt7XHJcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgY29udGVudCxcclxuICAgICAgICByZWxhdGVkX2VudGl0eV90eXBlOiByZWxhdGVkRW50aXR5VHlwZSxcclxuICAgICAgICByZWxhdGVkX2VudGl0eV9pZDogcmVsYXRlZEVudGl0eUlkLFxyXG4gICAgICAgIGlzX3JlYWQ6IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfV0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IoZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVua2NqYSBkbyBwb2JpZXJhbmlhIG5pZXByemVjenl0YW55Y2ggcG93aWFkb21pZcWEIHXFvHl0a293bmlrYVxyXG5leHBvcnQgY29uc3QgZ2V0VW5yZWFkTm90aWZpY2F0aW9uc0NvdW50ID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBTcHJhd2TFuiBjenkga2xpZW50IGplc3QgZG9zdMSZcG55XHJcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkLiBDaGVjayBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBjb3VudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxyXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG4gICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXHJcbiAgICAgIC5lcSgnaXNfcmVhZCcsIGZhbHNlKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIFxyXG4gICAgcmV0dXJuIGNvdW50IHx8IDA7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGhhbmRsZVN1cGFiYXNlQWRtaW5FcnJvcihlcnJvcik7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn07XHJcblxyXG4vLyBTcHJhd2TFuiBjenkga2xpZW50IGplc3QgcG9wcmF3bmllIHNrb25maWd1cm93YW55XHJcbmlmICghc3VwYWJhc2VBZG1pbikge1xyXG4gIGNvbnNvbGUuZXJyb3IoJ1VXQUdBOiBLbGllbnQgc3VwYWJhc2VBZG1pbiBuaWUgem9zdGHFgiB6YWluaWNqYWxpem93YW55IHBvcHJhd25pZS4gVXBld25paiBzacSZLCDFvGUgem1pZW5uZSDFm3JvZG93aXNrb3dlIHPEhSB1c3Rhd2lvbmUuJyk7XHJcbn1cclxuXHJcbi8vIEVrc3BvcnQga2xpZW50YSBhZG1pbmlzdHJhdG9yYSBqYWtvIGRvbXnFm2xueVxyXG5leHBvcnQgZGVmYXVsdCBzdXBhYmFzZUFkbWluOyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiY29uc29sZSIsImVycm9yIiwiaXNDb25maWdWYWxpZCIsInN1cGFiYXNlQWRtaW4iLCJhdXRoIiwicGVyc2lzdFNlc3Npb24iLCJhdXRvUmVmcmVzaFRva2VuIiwiaGFuZGxlU3VwYWJhc2VBZG1pbkVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJkZXRhaWxzIiwiY3JlYXRlVXNlclByb2ZpbGVBZG1pbiIsInVzZXJQcm9maWxlIiwiRXJyb3IiLCJkYXRhIiwiZnJvbSIsImluc2VydCIsInNlbGVjdCIsInNpbmdsZSIsIndhcm4iLCJleGlzdGluZ1VzZXIiLCJmZXRjaEVycm9yIiwiZXEiLCJleHRlcm5hbF9hdXRoX2lkIiwiZ2V0VXNlckJ5QXV0aElkQWRtaW4iLCJhdXRoSWQiLCJ1cGRhdGVVc2VyUHJvZmlsZUFkbWluIiwidXNlcklkIiwidXBkYXRlcyIsInVwZGF0ZSIsImdldFN1YnNjcmlwdGlvblBsYXRmb3Jtc0FkbWluIiwib3JkZXIiLCJnZXRHcm91cE1lbWJlcnNBZG1pbiIsImdyb3VwSWQiLCJsb2dBZG1pbkFjdGl2aXR5IiwiYWN0aW9uIiwicmVzb3VyY2VUeXBlIiwicmVzb3VyY2VJZCIsImFjdGlvbl90eXBlIiwicmVzb3VyY2VfdHlwZSIsInJlc291cmNlX2lkIiwic3RhdHVzIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwidHlwZSIsInRpdGxlIiwiY29udGVudCIsInJlbGF0ZWRFbnRpdHlUeXBlIiwicmVsYXRlZEVudGl0eUlkIiwidXNlcl9pZCIsInJlbGF0ZWRfZW50aXR5X3R5cGUiLCJyZWxhdGVkX2VudGl0eV9pZCIsImlzX3JlYWQiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZF9hdCIsImdldFVucmVhZE5vdGlmaWNhdGlvbnNDb3VudCIsImNvdW50IiwiaGVhZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database/supabase-admin-client.js\n");

/***/ }),

/***/ "(rsc)/./src/services/notification/notification-service.js":
/*!***********************************************************!*\
  !*** ./src/services/notification/notification-service.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   notificationService: () => (/* binding */ notificationService)\n/* harmony export */ });\n/* harmony import */ var _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database/supabase-admin-client */ \"(rsc)/./src/lib/database/supabase-admin-client.js\");\n// src/services/notification/notification-service.js\n\nclass NotificationService {\n    /**\r\n   * Creates a new notification\r\n   * @param {string} userId - ID of the user to notify\r\n   * @param {string} type - Type of notification (invite, message, purchase, dispute)\r\n   * @param {string} title - Title of the notification\r\n   * @param {string} content - Content of the notification\r\n   * @param {string} relatedEntityType - Type of related entity (optional)\r\n   * @param {string} relatedEntityId - ID of related entity (optional)\r\n   * @param {string} priority - Priority (high, normal, low) (optional)\r\n   * @param {number} ttl - Time to live in days (0 = no expiration) (optional)\r\n   * @returns {Promise<Object>} Created notification\r\n   */ async createNotification(userId, type, title, content, relatedEntityType = null, relatedEntityId = null, priority = \"normal\", ttl = 0) {\n        try {\n            const notification = {\n                user_id: userId,\n                type,\n                title,\n                content,\n                related_entity_type: relatedEntityType,\n                related_entity_id: relatedEntityId,\n                priority,\n                is_read: false,\n                created_at: new Date().toISOString()\n            };\n            const { data, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").insert(notification).select().single();\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error(\"Error creating notification:\", error);\n            throw new Error(`Failed to create notification: ${error.message}`);\n        }\n    }\n    /**\r\n   * Get unread notification count for a user\r\n   * @param {string} userId - User ID\r\n   * @returns {Promise<number>} Number of unread notifications\r\n   */ async getUnreadCount(userId) {\n        try {\n            const { count, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").select(\"*\", {\n                count: \"exact\",\n                head: true\n            }).eq(\"user_id\", userId).eq(\"is_read\", false);\n            if (error) throw error;\n            return count || 0;\n        } catch (error) {\n            console.error(\"Error counting unread notifications:\", error);\n            return 0;\n        }\n    }\n    /**\r\n   * Mark notification as read\r\n   * @param {string|string[]} notificationIds - Notification ID or array of IDs\r\n   * @param {string} userId - User ID for verification\r\n   * @returns {Promise<boolean>} Success status\r\n   */ async markAsRead(notificationIds, userId) {\n        try {\n            // Convert single ID to array if needed\n            const ids = Array.isArray(notificationIds) ? notificationIds : [\n                notificationIds\n            ];\n            const { error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").update({\n                is_read: true\n            }).in(\"id\", ids).eq(\"user_id\", userId);\n            if (error) throw error;\n            return true;\n        } catch (error) {\n            console.error(\"Error marking notifications as read:\", error);\n            return false;\n        }\n    }\n    /**\r\n   * Mark all notifications as read for a user\r\n   * @param {string} userId - User ID\r\n   * @returns {Promise<boolean>} Success status\r\n   */ async markAllAsRead(userId) {\n        try {\n            const { error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").update({\n                is_read: true\n            }).eq(\"user_id\", userId).eq(\"is_read\", false);\n            if (error) throw error;\n            return true;\n        } catch (error) {\n            console.error(\"Error marking all notifications as read:\", error);\n            return false;\n        }\n    }\n    /**\r\n   * Delete a notification\r\n   * @param {string} notificationId - Notification ID\r\n   * @param {string} userId - User ID for verification\r\n   * @returns {Promise<boolean>} Success status\r\n   */ async deleteNotification(notificationId, userId) {\n        try {\n            const { error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").delete().eq(\"id\", notificationId).eq(\"user_id\", userId);\n            if (error) throw error;\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting notification:\", error);\n            return false;\n        }\n    }\n    /**\r\n   * Get user notifications with filtering and pagination\r\n   * @param {string} userId - User ID\r\n   * @param {Object} options - Filter and pagination options\r\n   * @returns {Promise<Object>} Notifications and pagination info\r\n   */ async getUserNotifications(userId, options = {}) {\n        try {\n            // Build the query\n            let query = _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").select(\"*\", {\n                count: \"exact\"\n            }).eq(\"user_id\", userId);\n            // Apply filters\n            if (options.type) {\n                query = query.eq(\"type\", options.type);\n            }\n            if (options.read !== null && options.read !== undefined) {\n                query = query.eq(\"is_read\", options.read);\n            }\n            if (options.priority) {\n                query = query.eq(\"priority\", options.priority);\n            }\n            if (options.relatedEntityType) {\n                query = query.eq(\"related_entity_type\", options.relatedEntityType);\n            }\n            if (options.relatedEntityId) {\n                query = query.eq(\"related_entity_id\", options.relatedEntityId);\n            }\n            // Order by creation date, newest first\n            query = query.order(\"created_at\", {\n                ascending: false\n            });\n            // Apply pagination\n            const page = options.page || 1;\n            const pageSize = options.pageSize || 10;\n            const start = (page - 1) * pageSize;\n            const end = start + pageSize - 1;\n            query = query.range(start, end);\n            // Execute the query\n            const { data, error, count } = await query;\n            if (error) throw error;\n            // Calculate pagination info\n            const totalPages = Math.ceil((count || 0) / pageSize);\n            return {\n                notifications: data || [],\n                pagination: {\n                    page,\n                    pageSize,\n                    total: count || 0,\n                    totalPages\n                }\n            };\n        } catch (error) {\n            console.error(\"Exception in getUserNotifications:\", error);\n            throw new Error(`Failed to fetch notifications: ${error.message}`);\n        }\n    }\n    /**\r\n   * Get notification preferences for a user\r\n   * @param {string} userId - User ID\r\n   * @returns {Promise<Object>} Notification preferences\r\n   */ async getNotificationPreferences(userId) {\n        try {\n            const { data, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notification_preferences\").select(\"*\").eq(\"user_id\", userId).maybeSingle();\n            if (error) throw error;\n            // If no preferences exist, return defaults\n            if (!data) {\n                return {\n                    user_id: userId,\n                    email_enabled: true,\n                    push_enabled: false,\n                    notify_on_invite: true,\n                    notify_on_message: true,\n                    notify_on_purchase: true,\n                    notify_on_dispute: true,\n                    email_digest: \"daily\"\n                };\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching notification preferences:\", error);\n            // Return defaults on error\n            return {\n                user_id: userId,\n                email_enabled: true,\n                push_enabled: false,\n                notify_on_invite: true,\n                notify_on_message: true,\n                notify_on_purchase: true,\n                notify_on_dispute: true,\n                email_digest: \"daily\"\n            };\n        }\n    }\n    /**\r\n   * Update notification preferences for a user\r\n   * @param {string} userId - User ID\r\n   * @param {Object} preferences - Updated preferences\r\n   * @returns {Promise<Object>} Updated preferences\r\n   */ async updateNotificationPreferences(userId, preferences) {\n        try {\n            // Check if preferences already exist\n            const { data: existing } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notification_preferences\").select(\"id\").eq(\"user_id\", userId).maybeSingle();\n            let result;\n            if (existing) {\n                // Update existing preferences\n                const { data, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notification_preferences\").update(preferences).eq(\"user_id\", userId).select().single();\n                if (error) throw error;\n                result = data;\n            } else {\n                // Create new preferences\n                const { data, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notification_preferences\").insert({\n                    user_id: userId,\n                    ...preferences\n                }).select().single();\n                if (error) throw error;\n                result = data;\n            }\n            return result;\n        } catch (error) {\n            console.error(\"Error updating notification preferences:\", error);\n            throw new Error(`Failed to update notification preferences: ${error.message}`);\n        }\n    }\n}\n// Create and export a singleton instance\nconst notificationService = new NotificationService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvbm90aWZpY2F0aW9uL25vdGlmaWNhdGlvbi1zZXJ2aWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsb0RBQW9EO0FBQ2E7QUFFakUsTUFBTUM7SUFDSjs7Ozs7Ozs7Ozs7R0FXQyxHQUNELE1BQU1DLG1CQUNKQyxNQUFNLEVBQ05DLElBQUksRUFDSkMsS0FBSyxFQUNMQyxPQUFPLEVBQ1BDLG9CQUFvQixJQUFJLEVBQ3hCQyxrQkFBa0IsSUFBSSxFQUN0QkMsV0FBVyxRQUFRLEVBQ25CQyxNQUFNLENBQUMsRUFDUDtRQUNBLElBQUk7WUFDRixNQUFNQyxlQUFlO2dCQUNuQkMsU0FBU1Q7Z0JBQ1RDO2dCQUNBQztnQkFDQUM7Z0JBQ0FPLHFCQUFxQk47Z0JBQ3JCTyxtQkFBbUJOO2dCQUNuQkM7Z0JBQ0FNLFNBQVM7Z0JBQ1RDLFlBQVksSUFBSUMsT0FBT0MsV0FBVztZQUNwQztZQUVBLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNcEIsMkVBQWFBLENBQ3hDcUIsSUFBSSxDQUFDLGlCQUNMQyxNQUFNLENBQUNYLGNBQ1BZLE1BQU0sR0FDTkMsTUFBTTtZQUVULElBQUlKLE9BQU8sTUFBTUE7WUFFakIsT0FBT0Q7UUFDVCxFQUFFLE9BQU9DLE9BQU87WUFDZEssUUFBUUwsS0FBSyxDQUFDLGdDQUFnQ0E7WUFDOUMsTUFBTSxJQUFJTSxNQUFNLENBQUMsK0JBQStCLEVBQUVOLE1BQU1PLE9BQU8sQ0FBQyxDQUFDO1FBQ25FO0lBQ0Y7SUFFQTs7OztHQUlDLEdBQ0QsTUFBTUMsZUFBZXpCLE1BQU0sRUFBRTtRQUMzQixJQUFJO1lBQ0YsTUFBTSxFQUFFMEIsS0FBSyxFQUFFVCxLQUFLLEVBQUUsR0FBRyxNQUFNcEIsMkVBQWFBLENBQ3pDcUIsSUFBSSxDQUFDLGlCQUNMRSxNQUFNLENBQUMsS0FBSztnQkFBRU0sT0FBTztnQkFBU0MsTUFBTTtZQUFLLEdBQ3pDQyxFQUFFLENBQUMsV0FBVzVCLFFB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TUFBTSxHQUNOQyxNQUFNO2dCQUVULElBQUlKLE9BQU8sTUFBTUE7Z0JBQ2pCcUQsU0FBU3REO1lBQ1g7WUFFQSxPQUFPc0Q7UUFDVCxFQUFFLE9BQU9yRCxPQUFPO1lBQ2RLLFFBQVFMLEtBQUssQ0FBQyw0Q0FBNENBO1lBQzFELE1BQU0sSUFBSU0sTUFBTSxDQUFDLDJDQUEyQyxFQUFFTixNQUFNTyxPQUFPLENBQUMsQ0FBQztRQUMvRTtJQUNGO0FBQ0Y7QUFFQSx5Q0FBeUM7QUFDbEMsTUFBTStDLHNCQUFzQixJQUFJekUsc0JBQXNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JvdXBzaGFyZS1wcm9qZWN0Ly4vc3JjL3NlcnZpY2VzL25vdGlmaWNhdGlvbi9ub3RpZmljYXRpb24tc2VydmljZS5qcz9iMjk3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9zZXJ2aWNlcy9ub3RpZmljYXRpb24vbm90aWZpY2F0aW9uLXNlcnZpY2UuanNcclxuaW1wb3J0IHN1cGFiYXNlQWRtaW4gZnJvbSAnQC9saWIvZGF0YWJhc2Uvc3VwYWJhc2UtYWRtaW4tY2xpZW50JztcclxuXHJcbmNsYXNzIE5vdGlmaWNhdGlvblNlcnZpY2Uge1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBuZXcgbm90aWZpY2F0aW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIElEIG9mIHRoZSB1c2VyIHRvIG5vdGlmeVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVHlwZSBvZiBub3RpZmljYXRpb24gKGludml0ZSwgbWVzc2FnZSwgcHVyY2hhc2UsIGRpc3B1dGUpXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlIC0gVGl0bGUgb2YgdGhlIG5vdGlmaWNhdGlvblxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IC0gQ29udGVudCBvZiB0aGUgbm90aWZpY2F0aW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0ZWRFbnRpdHlUeXBlIC0gVHlwZSBvZiByZWxhdGVkIGVudGl0eSAob3B0aW9uYWwpXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0ZWRFbnRpdHlJZCAtIElEIG9mIHJlbGF0ZWQgZW50aXR5IChvcHRpb25hbClcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJpb3JpdHkgLSBQcmlvcml0eSAoaGlnaCwgbm9ybWFsLCBsb3cpIChvcHRpb25hbClcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdHRsIC0gVGltZSB0byBsaXZlIGluIGRheXMgKDAgPSBubyBleHBpcmF0aW9uKSAob3B0aW9uYWwpXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gQ3JlYXRlZCBub3RpZmljYXRpb25cclxuICAgKi9cclxuICBhc3luYyBjcmVhdGVOb3RpZmljYXRpb24oXHJcbiAgICB1c2VySWQsXHJcbiAgICB0eXBlLFxyXG4gICAgdGl0bGUsXHJcbiAgICBjb250ZW50LFxyXG4gICAgcmVsYXRlZEVudGl0eVR5cGUgPSBudWxsLFxyXG4gICAgcmVsYXRlZEVudGl0eUlkID0gbnVsbCxcclxuICAgIHByaW9yaXR5ID0gJ25vcm1hbCcsXHJcbiAgICB0dGwgPSAwXHJcbiAgKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBub3RpZmljYXRpb24gPSB7XHJcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgY29udGVudCxcclxuICAgICAgICByZWxhdGVkX2VudGl0eV90eXBlOiByZWxhdGVkRW50aXR5VHlwZSxcclxuICAgICAgICByZWxhdGVkX2VudGl0eV9pZDogcmVsYXRlZEVudGl0eUlkLFxyXG4gICAgICAgIHByaW9yaXR5LFxyXG4gICAgICAgIGlzX3JlYWQ6IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXHJcbiAgICAgICAgLmluc2VydChub3RpZmljYXRpb24pXHJcbiAgICAgICAgLnNlbGVjdCgpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuXHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgbm90aWZpY2F0aW9uOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIG5vdGlmaWNhdGlvbjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHVucmVhZCBub3RpZmljYXRpb24gY291bnQgZm9yIGEgdXNlclxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8bnVtYmVyPn0gTnVtYmVyIG9mIHVucmVhZCBub3RpZmljYXRpb25zXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VW5yZWFkQ291bnQodXNlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGNvdW50LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdub3RpZmljYXRpb25zJylcclxuICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcclxuICAgICAgICAuZXEoJ2lzX3JlYWQnLCBmYWxzZSk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG5cclxuICAgICAgcmV0dXJuIGNvdW50IHx8IDA7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb3VudGluZyB1bnJlYWQgbm90aWZpY2F0aW9uczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFyayBub3RpZmljYXRpb24gYXMgcmVhZFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBub3RpZmljYXRpb25JZHMgLSBOb3RpZmljYXRpb24gSUQgb3IgYXJyYXkgb2YgSURzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSUQgZm9yIHZlcmlmaWNhdGlvblxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBTdWNjZXNzIHN0YXR1c1xyXG4gICAqL1xyXG4gIGFzeW5jIG1hcmtBc1JlYWQobm90aWZpY2F0aW9uSWRzLCB1c2VySWQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENvbnZlcnQgc2luZ2xlIElEIHRvIGFycmF5IGlmIG5lZWRlZFxyXG4gICAgICBjb25zdCBpZHMgPSBBcnJheS5pc0FycmF5KG5vdGlmaWNhdGlvbklkcykgPyBub3RpZmljYXRpb25JZHMgOiBbbm90aWZpY2F0aW9uSWRzXTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXHJcbiAgICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgICBpc19yZWFkOiB0cnVlXHJcbiAgICAgICAgICAvLyBSZW1vdmVkIHJlYWRfYXQgYXMgaXQgZG9lc24ndCBleGlzdCBpbiB0aGUgc2NoZW1hXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuaW4oJ2lkJywgaWRzKVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG5cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYXJraW5nIG5vdGlmaWNhdGlvbnMgYXMgcmVhZDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1hcmsgYWxsIG5vdGlmaWNhdGlvbnMgYXMgcmVhZCBmb3IgYSB1c2VyXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gU3VjY2VzcyBzdGF0dXNcclxuICAgKi9cclxuICBhc3luYyBtYXJrQWxsQXNSZWFkKHVzZXJJZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdub3RpZmljYXRpb25zJylcclxuICAgICAgICAudXBkYXRlKHtcclxuICAgICAgICAgIGlzX3JlYWQ6IHRydWVcclxuICAgICAgICAgIC8vIFJlbW92ZWQgcmVhZF9hdCBhcyBpdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBzY2hlbWFcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcclxuICAgICAgICAuZXEoJ2lzX3JlYWQnLCBmYWxzZSk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG5cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYXJraW5nIGFsbCBub3RpZmljYXRpb25zIGFzIHJlYWQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWxldGUgYSBub3RpZmljYXRpb25cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbm90aWZpY2F0aW9uSWQgLSBOb3RpZmljYXRpb24gSURcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRCBmb3IgdmVyaWZpY2F0aW9uXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IFN1Y2Nlc3Mgc3RhdHVzXHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbklkLCB1c2VySWQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXHJcbiAgICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgICAgLmVxKCdpZCcsIG5vdGlmaWNhdGlvbklkKVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG5cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBub3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdXNlciBub3RpZmljYXRpb25zIHdpdGggZmlsdGVyaW5nIGFuZCBwYWdpbmF0aW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEZpbHRlciBhbmQgcGFnaW5hdGlvbiBvcHRpb25zXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gTm90aWZpY2F0aW9ucyBhbmQgcGFnaW5hdGlvbiBpbmZvXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VXNlck5vdGlmaWNhdGlvbnModXNlcklkLCBvcHRpb25zID0ge30pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEJ1aWxkIHRoZSBxdWVyeVxyXG4gICAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnIH0pXHJcbiAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKTtcclxuXHJcbiAgICAgIC8vIEFwcGx5IGZpbHRlcnNcclxuICAgICAgaWYgKG9wdGlvbnMudHlwZSkge1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3R5cGUnLCBvcHRpb25zLnR5cGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAob3B0aW9ucy5yZWFkICE9PSBudWxsICYmIG9wdGlvbnMucmVhZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnaXNfcmVhZCcsIG9wdGlvbnMucmVhZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChvcHRpb25zLnByaW9yaXR5KSB7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgncHJpb3JpdHknLCBvcHRpb25zLnByaW9yaXR5KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKG9wdGlvbnMucmVsYXRlZEVudGl0eVR5cGUpIHtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdyZWxhdGVkX2VudGl0eV90eXBlJywgb3B0aW9ucy5yZWxhdGVkRW50aXR5VHlwZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChvcHRpb25zLnJlbGF0ZWRFbnRpdHlJZCkge1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3JlbGF0ZWRfZW50aXR5X2lkJywgb3B0aW9ucy5yZWxhdGVkRW50aXR5SWQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBPcmRlciBieSBjcmVhdGlvbiBkYXRlLCBuZXdlc3QgZmlyc3RcclxuICAgICAgcXVlcnkgPSBxdWVyeS5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIC8vIEFwcGx5IHBhZ2luYXRpb25cclxuICAgICAgY29uc3QgcGFnZSA9IG9wdGlvbnMucGFnZSB8fCAxO1xyXG4gICAgICBjb25zdCBwYWdlU2l6ZSA9IG9wdGlvbnMucGFnZVNpemUgfHwgMTA7XHJcbiAgICAgIGNvbnN0IHN0YXJ0ID0gKHBhZ2UgLSAxKSAqIHBhZ2VTaXplO1xyXG4gICAgICBjb25zdCBlbmQgPSBzdGFydCArIHBhZ2VTaXplIC0gMTtcclxuXHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkucmFuZ2Uoc3RhcnQsIGVuZCk7XHJcblxyXG4gICAgICAvLyBFeGVjdXRlIHRoZSBxdWVyeVxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yLCBjb3VudCB9ID0gYXdhaXQgcXVlcnk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHBhZ2luYXRpb24gaW5mb1xyXG4gICAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKChjb3VudCB8fCAwKSAvIHBhZ2VTaXplKTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbm90aWZpY2F0aW9uczogZGF0YSB8fCBbXSxcclxuICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICBwYWdlLFxyXG4gICAgICAgICAgcGFnZVNpemUsXHJcbiAgICAgICAgICB0b3RhbDogY291bnQgfHwgMCxcclxuICAgICAgICAgIHRvdGFsUGFnZXNcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gaW4gZ2V0VXNlck5vdGlmaWNhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBub3RpZmljYXRpb25zOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgbm90aWZpY2F0aW9uIHByZWZlcmVuY2VzIGZvciBhIHVzZXJcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IE5vdGlmaWNhdGlvbiBwcmVmZXJlbmNlc1xyXG4gICAqL1xyXG4gIGFzeW5jIGdldE5vdGlmaWNhdGlvblByZWZlcmVuY2VzKHVzZXJJZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdub3RpZmljYXRpb25fcHJlZmVyZW5jZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcclxuICAgICAgICAubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcblxyXG4gICAgICAvLyBJZiBubyBwcmVmZXJlbmNlcyBleGlzdCwgcmV0dXJuIGRlZmF1bHRzXHJcbiAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgICAgICBlbWFpbF9lbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgcHVzaF9lbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgIG5vdGlmeV9vbl9pbnZpdGU6IHRydWUsXHJcbiAgICAgICAgICBub3RpZnlfb25fbWVzc2FnZTogdHJ1ZSxcclxuICAgICAgICAgIG5vdGlmeV9vbl9wdXJjaGFzZTogdHJ1ZSxcclxuICAgICAgICAgIG5vdGlmeV9vbl9kaXNwdXRlOiB0cnVlLFxyXG4gICAgICAgICAgZW1haWxfZGlnZXN0OiAnZGFpbHknXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBub3RpZmljYXRpb24gcHJlZmVyZW5jZXM6JywgZXJyb3IpO1xyXG4gICAgICAvLyBSZXR1cm4gZGVmYXVsdHMgb24gZXJyb3JcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgICAgZW1haWxfZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICBwdXNoX2VuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgIG5vdGlmeV9vbl9pbnZpdGU6IHRydWUsXHJcbiAgICAgICAgbm90aWZ5X29uX21lc3NhZ2U6IHRydWUsXHJcbiAgICAgICAgbm90aWZ5X29uX3B1cmNoYXNlOiB0cnVlLFxyXG4gICAgICAgIG5vdGlmeV9vbl9kaXNwdXRlOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsX2RpZ2VzdDogJ2RhaWx5J1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIG5vdGlmaWNhdGlvbiBwcmVmZXJlbmNlcyBmb3IgYSB1c2VyXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcclxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJlZmVyZW5jZXMgLSBVcGRhdGVkIHByZWZlcmVuY2VzXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gVXBkYXRlZCBwcmVmZXJlbmNlc1xyXG4gICAqL1xyXG4gIGFzeW5jIHVwZGF0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VzKHVzZXJJZCwgcHJlZmVyZW5jZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENoZWNrIGlmIHByZWZlcmVuY2VzIGFscmVhZHkgZXhpc3RcclxuICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZyB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdub3RpZmljYXRpb25fcHJlZmVyZW5jZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXHJcbiAgICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgICBsZXQgcmVzdWx0O1xyXG5cclxuICAgICAgaWYgKGV4aXN0aW5nKSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHByZWZlcmVuY2VzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbl9wcmVmZXJlbmNlcycpXHJcbiAgICAgICAgICAudXBkYXRlKHByZWZlcmVuY2VzKVxyXG4gICAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxyXG4gICAgICAgICAgLnNlbGVjdCgpXHJcbiAgICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgcmVzdWx0ID0gZGF0YTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBDcmVhdGUgbmV3IHByZWZlcmVuY2VzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbl9wcmVmZXJlbmNlcycpXHJcbiAgICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxyXG4gICAgICAgICAgICAuLi5wcmVmZXJlbmNlc1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgICAgIHJlc3VsdCA9IGRhdGE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBub3RpZmljYXRpb24gcHJlZmVyZW5jZXM6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgbm90aWZpY2F0aW9uIHByZWZlcmVuY2VzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDcmVhdGUgYW5kIGV4cG9ydCBhIHNpbmdsZXRvbiBpbnN0YW5jZVxyXG5leHBvcnQgY29uc3Qgbm90aWZpY2F0aW9uU2VydmljZSA9IG5ldyBOb3RpZmljYXRpb25TZXJ2aWNlKCk7Il0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJOb3RpZmljYXRpb25TZXJ2aWNlIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwidXNlcklkIiwidHlwZSIsInRpdGxlIiwiY29udGVudCIsInJlbGF0ZWRFbnRpdHlUeXBlIiwicmVsYXRlZEVudGl0eUlkIiwicHJpb3JpdHkiLCJ0dGwiLCJub3RpZmljYXRpb24iLCJ1c2VyX2lkIiwicmVsYXRlZF9lbnRpdHlfdHlwZSIsInJlbGF0ZWRfZW50aXR5X2lkIiwiaXNfcmVhZCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwiaW5zZXJ0Iiwic2VsZWN0Iiwic2luZ2xlIiwiY29uc29sZSIsIkVycm9yIiwibWVzc2FnZSIsImdldFVucmVhZENvdW50IiwiY291bnQiLCJoZWFkIiwiZXEiLCJtYXJrQXNSZWFkIiwibm90aWZpY2F0aW9uSWRzIiwiaWRzIiwiQXJyYXkiLCJpc0FycmF5IiwidXBkYXRlIiwiaW4iLCJtYXJrQWxsQXNSZWFkIiwiZGVsZXRlTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uSWQiLCJkZWxldGUiLCJnZXRVc2VyTm90aWZpY2F0aW9ucyIsIm9wdGlvbnMiLCJxdWVyeSIsInJlYWQiLCJ1bmRlZmluZWQiLCJvcmRlciIsImFzY2VuZGluZyIsInBhZ2UiLCJwYWdlU2l6ZSIsInN0YXJ0IiwiZW5kIiwicmFuZ2UiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJub3RpZmljYXRpb25zIiwicGFnaW5hdGlvbiIsInRvdGFsIiwiZ2V0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZXMiLCJtYXliZVNpbmdsZSIsImVtYWlsX2VuYWJsZWQiLCJwdXNoX2VuYWJsZWQiLCJub3RpZnlfb25faW52aXRlIiwibm90aWZ5X29uX21lc3NhZ2UiLCJub3RpZnlfb25fcHVyY2hhc2UiLCJub3RpZnlfb25fZGlzcHV0ZSIsImVtYWlsX2RpZ2VzdCIsInVwZGF0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VzIiwicHJlZmVyZW5jZXMiLCJleGlzdGluZyIsInJlc3VsdCIsIm5vdGlmaWNhdGlvblNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/notification/notification-service.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@clerk","vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/tslib","vendor-chunks/webidl-conversions","vendor-chunks/cookie","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute&page=%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();