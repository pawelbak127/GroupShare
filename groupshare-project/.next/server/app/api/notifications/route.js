"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/notifications/route";
exports.ids = ["app/api/notifications/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Froute&page=%2Fapi%2Fnotifications%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Froute&page=%2Fapi%2Fnotifications%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_bacze_Project_GroupShare_groupshare_project_src_app_api_notifications_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/notifications/route.js */ \"(rsc)/./src/app/api/notifications/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/notifications/route\",\n        pathname: \"/api/notifications\",\n        filename: \"route\",\n        bundlePath: \"app/api/notifications/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\bacze\\\\Project\\\\GroupShare\\\\groupshare-project\\\\src\\\\app\\\\api\\\\notifications\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_bacze_Project_GroupShare_groupshare_project_src_app_api_notifications_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/notifications/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZub3RpZmljYXRpb25zJTJGcm91dGUmcGFnZT0lMkZhcGklMkZub3RpZmljYXRpb25zJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbm90aWZpY2F0aW9ucyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNiYWN6ZSU1Q1Byb2plY3QlNUNHcm91cFNoYXJlJTVDZ3JvdXBzaGFyZS1wcm9qZWN0JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNiYWN6ZSU1Q1Byb2plY3QlNUNHcm91cFNoYXJlJTVDZ3JvdXBzaGFyZS1wcm9qZWN0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNpRDtBQUM5SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8/NmFiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxiYWN6ZVxcXFxQcm9qZWN0XFxcXEdyb3VwU2hhcmVcXFxcZ3JvdXBzaGFyZS1wcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG5vdGlmaWNhdGlvbnNcXFxccm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL25vdGlmaWNhdGlvbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ub3RpZmljYXRpb25zXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ub3RpZmljYXRpb25zL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcYmFjemVcXFxcUHJvamVjdFxcXFxHcm91cFNoYXJlXFxcXGdyb3Vwc2hhcmUtcHJvamVjdFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxub3RpZmljYXRpb25zXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9ub3RpZmljYXRpb25zL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Froute&page=%2Fapi%2Fnotifications%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/notifications/route.js":
/*!********************************************!*\
  !*** ./src/app/api/notifications/route.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/currentUser.js\");\n/* harmony import */ var _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database/supabase-admin-client */ \"(rsc)/./src/lib/database/supabase-admin-client.js\");\n/* harmony import */ var _services_notification_notification_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/notification/notification-service */ \"(rsc)/./src/services/notification/notification-service.js\");\n// src/app/api/notifications/route.js\n\n\n\n\nconst dynamic = \"force-dynamic\";\n/**\r\n * GET /api/notifications\r\n * Pobiera powiadomienia dla zalogowanego użytkownika\r\n */ async function GET(request) {\n    try {\n        // Sprawdź autentykację\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Pobierz parametry zapytania\n        const { searchParams } = new URL(request.url);\n        const options = {\n            type: searchParams.get(\"type\"),\n            read: searchParams.get(\"read\") === \"true\" ? true : searchParams.get(\"read\") === \"false\" ? false : null,\n            priority: searchParams.get(\"priority\"),\n            page: parseInt(searchParams.get(\"page\") || \"1\"),\n            pageSize: parseInt(searchParams.get(\"pageSize\") || \"10\"),\n            relatedEntityType: searchParams.get(\"relatedEntityType\"),\n            relatedEntityId: searchParams.get(\"relatedEntityId\")\n        };\n        // Pobierz ID profilu użytkownika\n        const { data: userProfile } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").select(\"id\").eq(\"external_auth_id\", user.id).single();\n        if (!userProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User profile not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Pobierz powiadomienia za pomocą serwisu\n        const result = await _services_notification_notification_service__WEBPACK_IMPORTED_MODULE_2__.notificationService.getUserNotifications(userProfile.id, options);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n    } catch (error) {\n        console.error(\"Error fetching notifications:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch notifications\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * PATCH /api/notifications\r\n * Oznacza wiele powiadomień jako przeczytane\r\n */ async function PATCH(request) {\n    try {\n        // Sprawdź autentykację\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Pobierz dane z body\n        const { ids, all = false } = await request.json();\n        // Pobierz ID profilu użytkownika\n        const { data: userProfile } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"].from(\"user_profiles\").select(\"id\").eq(\"external_auth_id\", user.id).single();\n        if (!userProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User profile not found\"\n            }, {\n                status: 404\n            });\n        }\n        let success;\n        if (all) {\n            // Oznacz wszystkie jako przeczytane\n            success = await _services_notification_notification_service__WEBPACK_IMPORTED_MODULE_2__.notificationService.markAllAsRead(userProfile.id);\n        } else if (ids && ids.length > 0) {\n            // Oznacz konkretne powiadomienia jako przeczytane\n            success = await _services_notification_notification_service__WEBPACK_IMPORTED_MODULE_2__.notificationService.markAsRead(ids, userProfile.id);\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Either ids array or all=true is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to update notifications\"\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Error updating notifications:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to update notifications\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9ub3RpZmljYXRpb25zL3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxxQ0FBcUM7QUFDTTtBQUNRO0FBQ2M7QUFDa0I7QUFFNUUsTUFBTUksVUFBVSxnQkFBZ0I7QUFFdkM7OztDQUdDLEdBQ00sZUFBZUMsSUFBSUMsT0FBTztJQUMvQixJQUFJO1FBQ0YsdUJBQXVCO1FBQ3ZCLE1BQU1DLE9BQU8sTUFBTU4saUVBQVdBO1FBQzlCLElBQUksQ0FBQ00sTUFBTTtZQUNULE9BQU9QLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZSxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDcEU7UUFFQSw4QkFBOEI7UUFDOUIsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJTixRQUFRTyxHQUFHO1FBQzVDLE1BQU1DLFVBQVU7WUFDZEMsTUFBTUosYUFBYUssR0FBRyxDQUFDO1lBQ3ZCQyxNQUFNTixhQUFhSyxHQUFHLENBQUMsWUFBWSxTQUFTLE9BQ3RDTCxhQUFhSyxHQUFHLENBQUMsWUFBWSxVQUFVLFFBQVE7WUFDckRFLFVBQVVQLGFBQWFLLEdBQUcsQ0FBQztZQUMzQkcsTUFBTUMsU0FBU1QsYUFBYUssR0FBRyxDQUFDLFdBQVc7WUFDM0NLLFVBQVVELFNBQVNULGFBQWFLLEdBQUcsQ0FBQyxlQUFlO1lBQ25ETSxtQkFBbUJYLGFBQWFLLEdBQUcsQ0FBQztZQUNwQ08saUJBQWlCWixhQUFhSyxHQUFHLENBQUM7UUFDcEM7UUFFQSxpQ0FBaUM7UUFDakMsTUFBTSxFQUFFUSxNQUFNQyxXQUFXLEVBQUUsR0FBRyxNQUFNdkIsMkVBQWFBLENBQzlDd0IsSUFBSSxDQUFDLGlCQUNMQyxNQUFNLENBQUMsTUFDUEMsRUFBRSxDQUFDLG9CQUFvQnJCLEtBQUtzQixFQUFFLEVBQzlCQyxNQUFNO1FBRVQsSUFBSSxDQUFDTCxhQUFhO1lBQ2hCLE9BQU96QixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQXlCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUM5RTtRQUVBLDBDQUEwQztRQUMxQyxNQUFNcUIsU0FBUyxNQUFNNUIsNEZBQW1CQSxDQUFDNkIsb0JBQW9CLENBQUNQLFlBQVlJLEVBQUUsRUFBRWY7UUFFOUUsT0FBT2QscURBQVlBLENBQUNRLElBQUksQ0FBQ3VCO0lBQzNCLEVBQUUsT0FBT3RCLE9BQU87UUFDZHdCLFFBQVF4QixLQUFLLENBQUMsaUNBQWlDQTtRQUMvQyxPQUFPVCxxREFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1lBQWlDeUIsU0FBU3pCLE1BQU0wQixPQUFPO1FBQUMsR0FDakU7WUFBRXpCLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUE7OztDQUdDLEdBQ00sZUFBZTBCLE1BQU05QixPQUFPO0lBQ2pDLElBQUk7UUFDRix1QkFBdUI7UUFDdkIsTUFBTUMsT0FBTyxNQUFNTixpRUFBV0E7UUFDOUIsSUFBSSxDQUFDTSxNQUFNO1lBQ1QsT0FBT1AscURBQVlBLENBQUNRLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNwRTtRQUVBLHNCQUFzQjtRQUN0QixNQUFNLEVBQUUyQixHQUFHLEVBQUVDLE1BQU0sS0FBSyxFQUFFLEdBQUcsTUFBTWhDLFFBQVFFLElBQUk7UUFFL0MsaUNBQWlDO1FBQ2pDLE1BQU0sRUFBRWdCLE1BQU1DLFdBQVcsRUFBRSxHQUFHLE1BQU12QiwyRUFBYUEsQ0FDOUN3QixJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQyxNQUNQQyxFQUFFLENBQUMsb0JBQW9CckIsS0FBS3NCLEVBQUUsRUFDOUJDLE1BQU07UUFFVCxJQUFJLENBQUNMLGFBQWE7WUFDaEIsT0FBT3pCLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBeUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzlFO1FBRUEsSUFBSTZCO1FBQ0osSUFBSUQsS0FBSztZQUNQLG9DQUFvQztZQUNwQ0MsVUFBVSxNQUFNcEMsNEZBQW1CQSxDQUFDcUMsYUFBYSxDQUFDZixZQUFZSSxFQUFFO1FBQ2xFLE9BQU8sSUFBSVEsT0FBT0EsSUFBSUksTUFBTSxHQUFHLEdBQUc7WUFDaEMsa0RBQWtEO1lBQ2xERixVQUFVLE1BQU1wQyw0RkFBbUJBLENBQUN1QyxVQUFVLENBQUNMLEtBQUtaLFlBQVlJLEVBQUU7UUFDcEUsT0FBTztZQUNMLE9BQU83QixxREFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUEyQyxHQUNwRDtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsSUFBSSxDQUFDNkIsU0FBUztZQUNaLE9BQU92QyxxREFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFpQyxHQUMxQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsT0FBT1YscURBQVlBLENBQUNRLElBQUksQ0FBQztZQUFFK0IsU0FBUztRQUFLO0lBQzNDLEVBQUUsT0FBTzlCLE9BQU87UUFDZHdCLFFBQVF4QixLQUFLLENBQUMsaUNBQWlDQTtRQUMvQyxPQUFPVCxxREFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1lBQWtDeUIsU0FBU3pCLE1BQU0wQixPQUFPO1FBQUMsR0FDbEU7WUFBRXpCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JvdXBzaGFyZS1wcm9qZWN0Ly4vc3JjL2FwcC9hcGkvbm90aWZpY2F0aW9ucy9yb3V0ZS5qcz8xODVkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcHAvYXBpL25vdGlmaWNhdGlvbnMvcm91dGUuanNcclxuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBjdXJyZW50VXNlciB9IGZyb20gJ0BjbGVyay9uZXh0anMvc2VydmVyJztcclxuaW1wb3J0IHN1cGFiYXNlQWRtaW4gZnJvbSAnQC9saWIvZGF0YWJhc2Uvc3VwYWJhc2UtYWRtaW4tY2xpZW50JztcclxuaW1wb3J0IHsgbm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gJ0Avc2VydmljZXMvbm90aWZpY2F0aW9uL25vdGlmaWNhdGlvbi1zZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL25vdGlmaWNhdGlvbnNcclxuICogUG9iaWVyYSBwb3dpYWRvbWllbmlhIGRsYSB6YWxvZ293YW5lZ28gdcW8eXRrb3duaWthXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gU3ByYXdkxbogYXV0ZW50eWthY2rEmVxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGN1cnJlbnRVc2VyKCk7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUG9iaWVyeiBwYXJhbWV0cnkgemFweXRhbmlhXHJcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICB0eXBlOiBzZWFyY2hQYXJhbXMuZ2V0KCd0eXBlJyksXHJcbiAgICAgIHJlYWQ6IHNlYXJjaFBhcmFtcy5nZXQoJ3JlYWQnKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IFxyXG4gICAgICAgICAgICBzZWFyY2hQYXJhbXMuZ2V0KCdyZWFkJykgPT09ICdmYWxzZScgPyBmYWxzZSA6IG51bGwsXHJcbiAgICAgIHByaW9yaXR5OiBzZWFyY2hQYXJhbXMuZ2V0KCdwcmlvcml0eScpLFxyXG4gICAgICBwYWdlOiBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdwYWdlJykgfHwgJzEnKSxcclxuICAgICAgcGFnZVNpemU6IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3BhZ2VTaXplJykgfHwgJzEwJyksXHJcbiAgICAgIHJlbGF0ZWRFbnRpdHlUeXBlOiBzZWFyY2hQYXJhbXMuZ2V0KCdyZWxhdGVkRW50aXR5VHlwZScpLFxyXG4gICAgICByZWxhdGVkRW50aXR5SWQ6IHNlYXJjaFBhcmFtcy5nZXQoJ3JlbGF0ZWRFbnRpdHlJZCcpLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBQb2JpZXJ6IElEIHByb2ZpbHUgdcW8eXRrb3duaWthXHJcbiAgICBjb25zdCB7IGRhdGE6IHVzZXJQcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAuZXEoJ2V4dGVybmFsX2F1dGhfaWQnLCB1c2VyLmlkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKCF1c2VyUHJvZmlsZSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VzZXIgcHJvZmlsZSBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUG9iaWVyeiBwb3dpYWRvbWllbmlhIHphIHBvbW9jxIUgc2Vyd2lzdVxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbm90aWZpY2F0aW9uU2VydmljZS5nZXRVc2VyTm90aWZpY2F0aW9ucyh1c2VyUHJvZmlsZS5pZCwgb3B0aW9ucyk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIG5vdGlmaWNhdGlvbnMnLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQQVRDSCAvYXBpL25vdGlmaWNhdGlvbnNcclxuICogT3puYWN6YSB3aWVsZSBwb3dpYWRvbWllxYQgamFrbyBwcnplY3p5dGFuZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBBVENIKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gU3ByYXdkxbogYXV0ZW50eWthY2rEmVxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGN1cnJlbnRVc2VyKCk7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUG9iaWVyeiBkYW5lIHogYm9keVxyXG4gICAgY29uc3QgeyBpZHMsIGFsbCA9IGZhbHNlIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuXHJcbiAgICAvLyBQb2JpZXJ6IElEIHByb2ZpbHUgdcW8eXRrb3duaWthXHJcbiAgICBjb25zdCB7IGRhdGE6IHVzZXJQcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAuZXEoJ2V4dGVybmFsX2F1dGhfaWQnLCB1c2VyLmlkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKCF1c2VyUHJvZmlsZSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VzZXIgcHJvZmlsZSBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHN1Y2Nlc3M7XHJcbiAgICBpZiAoYWxsKSB7XHJcbiAgICAgIC8vIE96bmFjeiB3c3p5c3RraWUgamFrbyBwcnplY3p5dGFuZVxyXG4gICAgICBzdWNjZXNzID0gYXdhaXQgbm90aWZpY2F0aW9uU2VydmljZS5tYXJrQWxsQXNSZWFkKHVzZXJQcm9maWxlLmlkKTtcclxuICAgIH0gZWxzZSBpZiAoaWRzICYmIGlkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIE96bmFjeiBrb25rcmV0bmUgcG93aWFkb21pZW5pYSBqYWtvIHByemVjenl0YW5lXHJcbiAgICAgIHN1Y2Nlc3MgPSBhd2FpdCBub3RpZmljYXRpb25TZXJ2aWNlLm1hcmtBc1JlYWQoaWRzLCB1c2VyUHJvZmlsZS5pZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0VpdGhlciBpZHMgYXJyYXkgb3IgYWxsPXRydWUgaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFzdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSBub3RpZmljYXRpb25zJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSBub3RpZmljYXRpb25zJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImN1cnJlbnRVc2VyIiwic3VwYWJhc2VBZG1pbiIsIm5vdGlmaWNhdGlvblNlcnZpY2UiLCJkeW5hbWljIiwiR0VUIiwicmVxdWVzdCIsInVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJvcHRpb25zIiwidHlwZSIsImdldCIsInJlYWQiLCJwcmlvcml0eSIsInBhZ2UiLCJwYXJzZUludCIsInBhZ2VTaXplIiwicmVsYXRlZEVudGl0eVR5cGUiLCJyZWxhdGVkRW50aXR5SWQiLCJkYXRhIiwidXNlclByb2ZpbGUiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpZCIsInNpbmdsZSIsInJlc3VsdCIsImdldFVzZXJOb3RpZmljYXRpb25zIiwiY29uc29sZSIsImRldGFpbHMiLCJtZXNzYWdlIiwiUEFUQ0giLCJpZHMiLCJhbGwiLCJzdWNjZXNzIiwibWFya0FsbEFzUmVhZCIsImxlbmd0aCIsIm1hcmtBc1JlYWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/notifications/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/database/supabase-admin-client.js":
/*!***************************************************!*\
  !*** ./src/lib/database/supabase-admin-client.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNotification: () => (/* binding */ createNotification),\n/* harmony export */   createUserProfileAdmin: () => (/* binding */ createUserProfileAdmin),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getGroupMembersAdmin: () => (/* binding */ getGroupMembersAdmin),\n/* harmony export */   getSubscriptionPlatformsAdmin: () => (/* binding */ getSubscriptionPlatformsAdmin),\n/* harmony export */   getUnreadNotificationsCount: () => (/* binding */ getUnreadNotificationsCount),\n/* harmony export */   getUserByAuthIdAdmin: () => (/* binding */ getUserByAuthIdAdmin),\n/* harmony export */   handleSupabaseAdminError: () => (/* binding */ handleSupabaseAdminError),\n/* harmony export */   logAdminActivity: () => (/* binding */ logAdminActivity),\n/* harmony export */   updateUserProfileAdmin: () => (/* binding */ updateUserProfileAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// src/lib/database/supabase-admin-client.js\n\n// Inicjalizacja klienta Supabase z uprawnieniami administratora\n// Dodajemy wartości domyślne w przypadku braku zmiennych środowiskowych\nconst supabaseUrl = \"https://nimrnohkesysfppcmujb.supabase.co\" || 0;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"\";\n// Sprawdzenie czy zmienne środowiskowe są ustawione\nif (!supabaseUrl || !supabaseServiceKey) {\n    console.error(\"Missing environment variables: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY\");\n}\n// Sprawdź, czy zmienne są poprawne przed utworzeniem klienta\nconst isConfigValid = supabaseUrl && supabaseServiceKey;\n// Uwaga: Ten klient ma pełne uprawnienia do bazy danych, używaj ostrożnie!\nconst supabaseAdmin = isConfigValid ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        persistSession: false,\n        autoRefreshToken: false\n    }\n}) : null;\n// Funkcja pomocnicza do obsługi błędów Supabase\nconst handleSupabaseAdminError = (error)=>{\n    console.error(\"Supabase Admin error:\", error);\n    return {\n        error: true,\n        message: error.message || \"Nieoczekiwany błąd administratora\",\n        code: error.code || \"unknown_error\",\n        details: error.details || null\n    };\n};\n// Funkcje administratora do zarządzania użytkownikami\n// Funkcja do tworzenia profilu użytkownika przez administratora\nconst createUserProfileAdmin = async (userProfile)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"user_profiles\").insert([\n            userProfile\n        ]).select().single();\n        if (error) {\n            if (error.code === \"23505\") {\n                console.warn(\"Admin: Pr\\xf3ba utworzenia duplikatu profilu użytkownika:\", error);\n                // Jeśli profil już istnieje, pobierz go\n                const { data: existingUser, error: fetchError } = await supabaseAdmin.from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", userProfile.external_auth_id).single();\n                if (fetchError) {\n                    throw new Error(\"Nie można pobrać istniejącego profilu: \" + fetchError.message);\n                }\n                return existingUser;\n            } else {\n                throw new Error(error.message || \"Nie udało się utworzyć profilu użytkownika\");\n            }\n        }\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do pobierania profilu użytkownika przez administratora\nconst getUserByAuthIdAdmin = async (authId)=>{\n    if (!authId) return null;\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", authId).single();\n        if (error) {\n            if (error.code === \"PGRST116\") {\n                // Nie znaleziono - to normalny przypadek\n                return null;\n            } else {\n                console.error(\"Admin: Błąd pobierania profilu użytkownika:\", error);\n                throw new Error(error.message || \"Nie udało się pobrać profilu użytkownika\");\n            }\n        }\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do aktualizacji profilu użytkownika przez administratora\nconst updateUserProfileAdmin = async (userId, updates)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"user_profiles\").update(updates).eq(\"id\", userId).select().single();\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do pobierania platform subskrypcyjnych przez administratora\nconst getSubscriptionPlatformsAdmin = async ()=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"subscription_platforms\").select(\"*\").order(\"name\");\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        return [];\n    }\n};\n// Funkcja do pobierania członków grupy przez administratora\nconst getGroupMembersAdmin = async (groupId)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"group_members\").select(`\r\n        *,\r\n        user:user_profiles(id, display_name, avatar_url, email)\r\n      `).eq(\"group_id\", groupId);\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        return [];\n    }\n};\n// Zapisz wszystkie aktywności administratora do logu bezpieczeństwa\nconst logAdminActivity = async (action, resourceType, resourceId, details = {})=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            console.error(\"Database client is not initialized. Could not log activity.\");\n            return;\n        }\n        const { data, error } = await supabaseAdmin.from(\"security_logs\").insert([\n            {\n                action_type: action,\n                resource_type: resourceType,\n                resource_id: resourceId,\n                status: \"success\",\n                details: details\n            }\n        ]);\n        if (error) console.error(\"Błąd logowania aktywności administratora:\", error);\n    } catch (error) {\n        console.error(\"Wyjątek podczas logowania aktywności administratora:\", error);\n    }\n};\n// Funkcja do zarządzania powiadomieniami użytkowników\nconst createNotification = async (userId, type, title, content, relatedEntityType = null, relatedEntityId = null)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { data, error } = await supabaseAdmin.from(\"notifications\").insert([\n            {\n                user_id: userId,\n                type,\n                title,\n                content,\n                related_entity_type: relatedEntityType,\n                related_entity_id: relatedEntityId,\n                is_read: false,\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            }\n        ]).select().single();\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        throw error;\n    }\n};\n// Funkcja do pobierania nieprzeczytanych powiadomień użytkownika\nconst getUnreadNotificationsCount = async (userId)=>{\n    try {\n        // Sprawdź czy klient jest dostępny\n        if (!supabaseAdmin) {\n            throw new Error(\"Database client is not initialized. Check environment variables.\");\n        }\n        const { count, error } = await supabaseAdmin.from(\"notifications\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        }).eq(\"user_id\", userId).eq(\"is_read\", false);\n        if (error) throw error;\n        return count || 0;\n    } catch (error) {\n        handleSupabaseAdminError(error);\n        return 0;\n    }\n};\n// Sprawdź czy klient jest poprawnie skonfigurowany\nif (!supabaseAdmin) {\n    console.error(\"UWAGA: Klient supabaseAdmin nie został zainicjalizowany poprawnie. Upewnij się, że zmienne środowiskowe są ustawione.\");\n}\n// Eksport klienta administratora jako domyślny\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabaseAdmin);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RhdGFiYXNlL3N1cGFiYXNlLWFkbWluLWNsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLDRDQUE0QztBQUNTO0FBRXJELGdFQUFnRTtBQUNoRSx3RUFBd0U7QUFDeEUsTUFBTUMsY0FBY0MsMENBQW9DLElBQUk7QUFDNUQsTUFBTUcscUJBQXFCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QixJQUFJO0FBRXBFLG9EQUFvRDtBQUNwRCxJQUFJLENBQUNMLGVBQWUsQ0FBQ0ksb0JBQW9CO0lBQ3ZDRSxRQUFRQyxLQUFLLENBQ1g7QUFFSjtBQUVBLDZEQUE2RDtBQUM3RCxNQUFNQyxnQkFBZ0JSLGVBQWVJO0FBRXJDLDJFQUEyRTtBQUMzRSxNQUFNSyxnQkFBZ0JELGdCQUNsQlQsbUVBQVlBLENBQUNDLGFBQWFJLG9CQUFvQjtJQUM1Q00sTUFBTTtRQUNKQyxnQkFBZ0I7UUFDaEJDLGtCQUFrQjtJQUNwQjtBQUNGLEtBQ0E7QUFFSixnREFBZ0Q7QUFDekMsTUFBTUMsMkJBQTJCLENBQUNOO0lBQ3ZDRCxRQUFRQyxLQUFLLENBQUMseUJBQXlCQTtJQUV2QyxPQUFPO1FBQ0xBLE9BQU87UUFDUE8sU0FBU1AsTUFBTU8sT0FBTyxJQUFJO1FBQzFCQyxNQUFNUixNQUFNUSxJQUFJLElBQUk7UUFDcEJDLFNBQVNULE1BQU1TLE9BQU8sSUFBSTtJQUM1QjtBQUNGLEVBQUU7QUFFRixzREFBc0Q7QUFFdEQsZ0VBQWdFO0FBQ3pELE1BQU1DLHlCQUF5QixPQUFPQztJQUMzQyxJQUFJO1FBQ0YsbUNBQW1DO1FBQ25DLElBQUksQ0FBQ1QsZUFBZTtZQUNsQixNQUFNLElBQUlVLE1BQU07UUFDbEI7UUFFQSxNQUFNLEVBQUVDLElBQUksRUFBRWIsS0FBSyxFQUFFLEdBQUcsTUFBTUUsY0FDM0JZLElBQUksQ0FBQyxpQkFDTEMsTUFBTSxDQUFDO1lBQUNKO1NBQVksRUFDcEJLLE1BQU0sR0FDTkMsTUFBTTtRQUVULElBQUlqQixP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QyxXQUFXO2dCQUNsQ0MsWUFBWSxJQUFJRixPQUFPQyxXQUFXO1lBQ3BDO1NBQUUsRUFDRHJDLE1BQU0sR0FDTkMsTUFBTTtRQUVULElBQUlqQixPQUFPLE1BQU1BO1FBRWpCLE9BQU9hO0lBQ1QsRUFBRSxPQUFPYixPQUFPO1FBQ2RNLHlCQUF5Qk47UUFDekIsTUFBTUE7SUFDUjtBQUNGLEVBQUU7QUFFRixpRUFBaUU7QUFDMUQsTUFBTXVELDhCQUE4QixPQUFPN0I7SUFDaEQsSUFBSTtRQUNGLG1DQUFtQztRQUNuQyxJQUFJLENBQUN4QixlQUFlO1lBQ2xCLE1BQU0sSUFBSVUsTUFBTTtRQUNsQjtRQUVBLE1BQU0sRUFBRTRDLEtBQUssRUFBRXhELEtBQUssRUFBRSxHQUFHLE1BQU1FLGNBQzVCWSxJQUFJLENBQUMsaUJBQ0xFLE1BQU0sQ0FBQyxLQUFLO1lBQUV3QyxPQUFPO1lBQVNDLE1BQU07UUFBSyxHQUN6Q3BDLEVBQUUsQ0FBQyxXQUFXSyxRQUNkTCxFQUFFLENBQUMsV0FBVztRQUVqQixJQUFJckIsT0FBTyxNQUFNQTtRQUVqQixPQUFPd0QsU0FBUztJQUNsQixFQUFFLE9BQU94RCxPQUFPO1FBQ2RNLHlCQUF5Qk47UUFDekIsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVGLG1EQUFtRDtBQUNuRCxJQUFJLENBQUNFLGVBQWU7SUFDbEJILFFBQVFDLEtBQUssQ0FBQztBQUNoQjtBQUVBLCtDQUErQztBQUMvQyxpRUFBZUUsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9saWIvZGF0YWJhc2Uvc3VwYWJhc2UtYWRtaW4tY2xpZW50LmpzPzM0NzciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9kYXRhYmFzZS9zdXBhYmFzZS1hZG1pbi1jbGllbnQuanNcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbi8vIEluaWNqYWxpemFjamEga2xpZW50YSBTdXBhYmFzZSB6IHVwcmF3bmllbmlhbWkgYWRtaW5pc3RyYXRvcmFcclxuLy8gRG9kYWplbXkgd2FydG/Fm2NpIGRvbXnFm2xuZSB3IHByenlwYWRrdSBicmFrdSB6bWllbm55Y2ggxZtyb2Rvd2lza293eWNoXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICcnO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8ICcnO1xyXG5cclxuLy8gU3ByYXdkemVuaWUgY3p5IHptaWVubmUgxZtyb2Rvd2lza293ZSBzxIUgdXN0YXdpb25lXHJcbmlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlU2VydmljZUtleSkge1xyXG4gIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAnTWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXM6IE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBvciBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZJ1xyXG4gICk7XHJcbn1cclxuXHJcbi8vIFNwcmF3ZMW6LCBjenkgem1pZW5uZSBzxIUgcG9wcmF3bmUgcHJ6ZWQgdXR3b3J6ZW5pZW0ga2xpZW50YVxyXG5jb25zdCBpc0NvbmZpZ1ZhbGlkID0gc3VwYWJhc2VVcmwgJiYgc3VwYWJhc2VTZXJ2aWNlS2V5O1xyXG5cclxuLy8gVXdhZ2E6IFRlbiBrbGllbnQgbWEgcGXFgm5lIHVwcmF3bmllbmlhIGRvIGJhenkgZGFueWNoLCB1xbx5d2FqIG9zdHJvxbxuaWUhXHJcbmNvbnN0IHN1cGFiYXNlQWRtaW4gPSBpc0NvbmZpZ1ZhbGlkIFxyXG4gID8gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXksIHtcclxuICAgICAgYXV0aDoge1xyXG4gICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcclxuICAgICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgOiBudWxsO1xyXG5cclxuLy8gRnVua2NqYSBwb21vY25pY3phIGRvIG9ic8WCdWdpIGLFgsSZZMOzdyBTdXBhYmFzZVxyXG5leHBvcnQgY29uc3QgaGFuZGxlU3VwYWJhc2VBZG1pbkVycm9yID0gKGVycm9yKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgQWRtaW4gZXJyb3I6JywgZXJyb3IpO1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICBlcnJvcjogdHJ1ZSxcclxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ05pZW9jemVraXdhbnkgYsWCxIVkIGFkbWluaXN0cmF0b3JhJyxcclxuICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgJ3Vua25vd25fZXJyb3InLFxyXG4gICAgZGV0YWlsczogZXJyb3IuZGV0YWlscyB8fCBudWxsLFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyBGdW5rY2plIGFkbWluaXN0cmF0b3JhIGRvIHphcnrEhWR6YW5pYSB1xbx5dGtvd25pa2FtaVxyXG5cclxuLy8gRnVua2NqYSBkbyB0d29yemVuaWEgcHJvZmlsdSB1xbx5dGtvd25pa2EgcHJ6ZXogYWRtaW5pc3RyYXRvcmFcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVzZXJQcm9maWxlQWRtaW4gPSBhc3luYyAodXNlclByb2ZpbGUpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gU3ByYXdkxbogY3p5IGtsaWVudCBqZXN0IGRvc3TEmXBueVxyXG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY2xpZW50IGlzIG5vdCBpbml0aWFsaXplZC4gQ2hlY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAuaW5zZXJ0KFt1c2VyUHJvZmlsZV0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJzIzNTA1Jykge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignQWRtaW46IFByw7NiYSB1dHdvcnplbmlhIGR1cGxpa2F0dSBwcm9maWx1IHXFvHl0a293bmlrYTonLCBlcnJvcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSmXFm2xpIHByb2ZpbCBqdcW8IGlzdG5pZWplLCBwb2JpZXJ6IGdvXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1VzZXIsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIHVzZXJQcm9maWxlLmV4dGVybmFsX2F1dGhfaWQpXHJcbiAgICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICBpZiAoZmV0Y2hFcnJvcikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOaWUgbW/FvG5hIHBvYnJhxIcgaXN0bmllasSFY2VnbyBwcm9maWx1OiAnICsgZmV0Y2hFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nVXNlcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSB8fCAnTmllIHVkYcWCbyBzacSZIHV0d29yennEhyBwcm9maWx1IHXFvHl0a293bmlrYScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IoZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVua2NqYSBkbyBwb2JpZXJhbmlhIHByb2ZpbHUgdcW8eXRrb3duaWthIHByemV6IGFkbWluaXN0cmF0b3JhXHJcbmV4cG9ydCBjb25zdCBnZXRVc2VyQnlBdXRoSWRBZG1pbiA9IGFzeW5jIChhdXRoSWQpID0+IHtcclxuICBpZiAoIWF1dGhJZCkgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIC8vIFNwcmF3ZMW6IGN6eSBrbGllbnQgamVzdCBkb3N0xJlwbnlcclxuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNsaWVudCBpcyBub3QgaW5pdGlhbGl6ZWQuIENoZWNrIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnZXh0ZXJuYWxfYXV0aF9pZCcsIGF1dGhJZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdQR1JTVDExNicpIHtcclxuICAgICAgICAvLyBOaWUgem5hbGV6aW9ubyAtIHRvIG5vcm1hbG55IHByenlwYWRla1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FkbWluOiBCxYLEhWQgcG9iaWVyYW5pYSBwcm9maWx1IHXFvHl0a293bmlrYTonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ05pZSB1ZGHFgm8gc2nEmSBwb2JyYcSHIHByb2ZpbHUgdcW8eXRrb3duaWthJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGhhbmRsZVN1cGFiYXNlQWRtaW5FcnJvcihlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIGRvIGFrdHVhbGl6YWNqaSBwcm9maWx1IHXFvHl0a293bmlrYSBwcnpleiBhZG1pbmlzdHJhdG9yYVxyXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlclByb2ZpbGVBZG1pbiA9IGFzeW5jICh1c2VySWQsIHVwZGF0ZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gU3ByYXdkxbogY3p5IGtsaWVudCBqZXN0IGRvc3TEmXBueVxyXG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY2xpZW50IGlzIG5vdCBpbml0aWFsaXplZC4gQ2hlY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAudXBkYXRlKHVwZGF0ZXMpXHJcbiAgICAgIC5lcSgnaWQnLCB1c2VySWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IoZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVua2NqYSBkbyBwb2JpZXJhbmlhIHBsYXRmb3JtIHN1YnNrcnlwY3lqbnljaCBwcnpleiBhZG1pbmlzdHJhdG9yYVxyXG5leHBvcnQgY29uc3QgZ2V0U3Vic2NyaXB0aW9uUGxhdGZvcm1zQWRtaW4gPSBhc3luYyAoKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFNwcmF3ZMW6IGN6eSBrbGllbnQgamVzdCBkb3N0xJlwbnlcclxuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNsaWVudCBpcyBub3QgaW5pdGlhbGl6ZWQuIENoZWNrIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCdzdWJzY3JpcHRpb25fcGxhdGZvcm1zJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5vcmRlcignbmFtZScpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaGFuZGxlU3VwYWJhc2VBZG1pbkVycm9yKGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIGRvIHBvYmllcmFuaWEgY3rFgm9ua8OzdyBncnVweSBwcnpleiBhZG1pbmlzdHJhdG9yYVxyXG5leHBvcnQgY29uc3QgZ2V0R3JvdXBNZW1iZXJzQWRtaW4gPSBhc3luYyAoZ3JvdXBJZCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBTcHJhd2TFuiBjenkga2xpZW50IGplc3QgZG9zdMSZcG55XHJcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkLiBDaGVjayBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgnZ3JvdXBfbWVtYmVycycpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgdXNlcjp1c2VyX3Byb2ZpbGVzKGlkLCBkaXNwbGF5X25hbWUsIGF2YXRhcl91cmwsIGVtYWlsKVxyXG4gICAgICBgKVxyXG4gICAgICAuZXEoJ2dyb3VwX2lkJywgZ3JvdXBJZCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IoZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFphcGlzeiB3c3p5c3RraWUgYWt0eXdub8WbY2kgYWRtaW5pc3RyYXRvcmEgZG8gbG9ndSBiZXpwaWVjemXFhHN0d2FcclxuZXhwb3J0IGNvbnN0IGxvZ0FkbWluQWN0aXZpdHkgPSBhc3luYyAoYWN0aW9uLCByZXNvdXJjZVR5cGUsIHJlc291cmNlSWQsIGRldGFpbHMgPSB7fSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBTcHJhd2TFuiBjenkga2xpZW50IGplc3QgZG9zdMSZcG55XHJcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgY2xpZW50IGlzIG5vdCBpbml0aWFsaXplZC4gQ291bGQgbm90IGxvZyBhY3Rpdml0eS4nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ3NlY3VyaXR5X2xvZ3MnKVxyXG4gICAgICAuaW5zZXJ0KFt7XHJcbiAgICAgICAgYWN0aW9uX3R5cGU6IGFjdGlvbixcclxuICAgICAgICByZXNvdXJjZV90eXBlOiByZXNvdXJjZVR5cGUsXHJcbiAgICAgICAgcmVzb3VyY2VfaWQ6IHJlc291cmNlSWQsXHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgZGV0YWlsczogZGV0YWlscyxcclxuICAgICAgfV0pO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoJ0LFgsSFZCBsb2dvd2FuaWEgYWt0eXdub8WbY2kgYWRtaW5pc3RyYXRvcmE6JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1d5asSFdGVrIHBvZGN6YXMgbG9nb3dhbmlhIGFrdHl3bm/Fm2NpIGFkbWluaXN0cmF0b3JhOicsIGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5rY2phIGRvIHphcnrEhWR6YW5pYSBwb3dpYWRvbWllbmlhbWkgdcW8eXRrb3duaWvDs3dcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU5vdGlmaWNhdGlvbiA9IGFzeW5jICh1c2VySWQsIHR5cGUsIHRpdGxlLCBjb250ZW50LCByZWxhdGVkRW50aXR5VHlwZSA9IG51bGwsIHJlbGF0ZWRFbnRpdHlJZCA9IG51bGwpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gU3ByYXdkxbogY3p5IGtsaWVudCBqZXN0IGRvc3TEmXBueVxyXG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY2xpZW50IGlzIG5vdCBpbml0aWFsaXplZC4gQ2hlY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxyXG4gICAgICAuaW5zZXJ0KFt7XHJcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgY29udGVudCxcclxuICAgICAgICByZWxhdGVkX2VudGl0eV90eXBlOiByZWxhdGVkRW50aXR5VHlwZSxcclxuICAgICAgICByZWxhdGVkX2VudGl0eV9pZDogcmVsYXRlZEVudGl0eUlkLFxyXG4gICAgICAgIGlzX3JlYWQ6IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfV0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUFkbWluRXJyb3IoZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVua2NqYSBkbyBwb2JpZXJhbmlhIG5pZXByemVjenl0YW55Y2ggcG93aWFkb21pZcWEIHXFvHl0a293bmlrYVxyXG5leHBvcnQgY29uc3QgZ2V0VW5yZWFkTm90aWZpY2F0aW9uc0NvdW50ID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBTcHJhd2TFuiBjenkga2xpZW50IGplc3QgZG9zdMSZcG55XHJcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkLiBDaGVjayBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBjb3VudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxyXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG4gICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXHJcbiAgICAgIC5lcSgnaXNfcmVhZCcsIGZhbHNlKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIFxyXG4gICAgcmV0dXJuIGNvdW50IHx8IDA7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGhhbmRsZVN1cGFiYXNlQWRtaW5FcnJvcihlcnJvcik7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn07XHJcblxyXG4vLyBTcHJhd2TFuiBjenkga2xpZW50IGplc3QgcG9wcmF3bmllIHNrb25maWd1cm93YW55XHJcbmlmICghc3VwYWJhc2VBZG1pbikge1xyXG4gIGNvbnNvbGUuZXJyb3IoJ1VXQUdBOiBLbGllbnQgc3VwYWJhc2VBZG1pbiBuaWUgem9zdGHFgiB6YWluaWNqYWxpem93YW55IHBvcHJhd25pZS4gVXBld25paiBzacSZLCDFvGUgem1pZW5uZSDFm3JvZG93aXNrb3dlIHPEhSB1c3Rhd2lvbmUuJyk7XHJcbn1cclxuXHJcbi8vIEVrc3BvcnQga2xpZW50YSBhZG1pbmlzdHJhdG9yYSBqYWtvIGRvbXnFm2xueVxyXG5leHBvcnQgZGVmYXVsdCBzdXBhYmFzZUFkbWluOyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiY29uc29sZSIsImVycm9yIiwiaXNDb25maWdWYWxpZCIsInN1cGFiYXNlQWRtaW4iLCJhdXRoIiwicGVyc2lzdFNlc3Npb24iLCJhdXRvUmVmcmVzaFRva2VuIiwiaGFuZGxlU3VwYWJhc2VBZG1pbkVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJkZXRhaWxzIiwiY3JlYXRlVXNlclByb2ZpbGVBZG1pbiIsInVzZXJQcm9maWxlIiwiRXJyb3IiLCJkYXRhIiwiZnJvbSIsImluc2VydCIsInNlbGVjdCIsInNpbmdsZSIsIndhcm4iLCJleGlzdGluZ1VzZXIiLCJmZXRjaEVycm9yIiwiZXEiLCJleHRlcm5hbF9hdXRoX2lkIiwiZ2V0VXNlckJ5QXV0aElkQWRtaW4iLCJhdXRoSWQiLCJ1cGRhdGVVc2VyUHJvZmlsZUFkbWluIiwidXNlcklkIiwidXBkYXRlcyIsInVwZGF0ZSIsImdldFN1YnNjcmlwdGlvblBsYXRmb3Jtc0FkbWluIiwib3JkZXIiLCJnZXRHcm91cE1lbWJlcnNBZG1pbiIsImdyb3VwSWQiLCJsb2dBZG1pbkFjdGl2aXR5IiwiYWN0aW9uIiwicmVzb3VyY2VUeXBlIiwicmVzb3VyY2VJZCIsImFjdGlvbl90eXBlIiwicmVzb3VyY2VfdHlwZSIsInJlc291cmNlX2lkIiwic3RhdHVzIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwidHlwZSIsInRpdGxlIiwiY29udGVudCIsInJlbGF0ZWRFbnRpdHlUeXBlIiwicmVsYXRlZEVudGl0eUlkIiwidXNlcl9pZCIsInJlbGF0ZWRfZW50aXR5X3R5cGUiLCJyZWxhdGVkX2VudGl0eV9pZCIsImlzX3JlYWQiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZF9hdCIsImdldFVucmVhZE5vdGlmaWNhdGlvbnNDb3VudCIsImNvdW50IiwiaGVhZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database/supabase-admin-client.js\n");

/***/ }),

/***/ "(rsc)/./src/services/notification/notification-service.js":
/*!***********************************************************!*\
  !*** ./src/services/notification/notification-service.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NotificationService: () => (/* binding */ NotificationService),\n/* harmony export */   notificationService: () => (/* binding */ notificationService)\n/* harmony export */ });\n/* harmony import */ var _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database/supabase-admin-client */ \"(rsc)/./src/lib/database/supabase-admin-client.js\");\n// src/services/notification/notification-service.js\n\n/**\r\n * Serwis do zarządzania powiadomieniami użytkowników\r\n */ class NotificationService {\n    constructor(){\n        // Sprawdź czy supabaseAdmin jest dostępny przy inicjalizacji\n        if (!_lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            console.warn(\"NotificationService: supabaseAdmin is not initialized. Service functionality will be limited.\");\n        }\n    }\n    /**\r\n   * Metoda pomocnicza sprawdzająca dostępność klienta supabase\r\n   * @private\r\n   */ _checkSupabaseClient() {\n        if (!_lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            throw new Error(\"Database client is not initialized. Check server configuration.\");\n        }\n    }\n    /**\r\n   * Tworzy nowe powiadomienie\r\n   * @param {string} userId - ID użytkownika, który ma otrzymać powiadomienie\r\n   * @param {string} type - Typ powiadomienia (invite, message, purchase, dispute)\r\n   * @param {string} title - Tytuł powiadomienia\r\n   * @param {string} content - Treść powiadomienia\r\n   * @param {string} relatedEntityType - Typ powiązanego zasobu (np. group, purchase)\r\n   * @param {string} relatedEntityId - ID powiązanego zasobu\r\n   * @param {string} priority - Priorytet powiadomienia (high, normal, low)\r\n   * @param {number} ttl - Czas życia w sekundach, 0 oznacza brak wygaśnięcia\r\n   * @returns {Promise<Object>} - Utworzone powiadomienie\r\n   */ async createNotification(userId, type, title, content, relatedEntityType = null, relatedEntityId = null, priority = \"normal\", ttl = 0) {\n        try {\n            this._checkSupabaseClient();\n            // Walidacja podstawowych danych\n            if (!userId || !type || !title || !content) {\n                throw new Error(\"Missing required fields: userId, type, title and content are required\");\n            }\n            // Walidacja typu\n            const validTypes = [\n                \"invite\",\n                \"message\",\n                \"purchase\",\n                \"dispute\"\n            ];\n            if (!validTypes.includes(type)) {\n                throw new Error(`Invalid notification type. Must be one of: ${validTypes.join(\", \")}`);\n            }\n            // Walidacja priorytetu\n            const validPriorities = [\n                \"high\",\n                \"normal\",\n                \"low\"\n            ];\n            if (!validPriorities.includes(priority)) {\n                throw new Error(`Invalid priority. Must be one of: ${validPriorities.join(\", \")}`);\n            }\n            // Oblicz datę wygaśnięcia, jeśli podano TTL\n            let expiresAt = null;\n            if (ttl > 0) {\n                expiresAt = new Date();\n                expiresAt.setSeconds(expiresAt.getSeconds() + ttl);\n            }\n            const notification = {\n                user_id: userId,\n                type,\n                title,\n                content,\n                related_entity_type: relatedEntityType,\n                related_entity_id: relatedEntityId,\n                priority,\n                expires_at: expiresAt ? expiresAt.toISOString() : null,\n                created_at: new Date().toISOString(),\n                is_read: false\n            };\n            const { data, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").insert(notification).select().single();\n            if (error) {\n                console.error(\"Error creating notification:\", error);\n                throw new Error(`Failed to create notification: ${error.message}`);\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Exception in createNotification:\", error);\n            throw error;\n        }\n    }\n    /**\r\n   * Pobiera powiadomienia użytkownika z filtrowaniem i paginacją\r\n   * @param {string} userId - ID użytkownika\r\n   * @param {Object} options - Opcje filtrowania i paginacji\r\n   * @returns {Promise<Object>} - Powiadomienia i informacje o paginacji\r\n   */ async getUserNotifications(userId, options = {}) {\n        try {\n            this._checkSupabaseClient();\n            if (!userId) {\n                throw new Error(\"User ID is required\");\n            }\n            const { type = null, read = null, priority = null, page = 1, pageSize = 10, relatedEntityType = null, relatedEntityId = null, olderThan = null, newerThan = null } = options;\n            // Oblicz paginację\n            const from = (page - 1) * pageSize;\n            const to = from + pageSize - 1;\n            // Zbuduj zapytanie\n            let query = _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").select(\"*\", {\n                count: \"exact\"\n            }).eq(\"user_id\", userId);\n            // Zastosuj filtry\n            if (type) {\n                query = query.eq(\"type\", type);\n            }\n            if (read !== null) {\n                query = query.eq(\"is_read\", read);\n            }\n            if (priority) {\n                query = query.eq(\"priority\", priority);\n            }\n            if (relatedEntityType) {\n                query = query.eq(\"related_entity_type\", relatedEntityType);\n            }\n            if (relatedEntityId) {\n                query = query.eq(\"related_entity_id\", relatedEntityId);\n            }\n            // Filtry dat\n            if (olderThan) {\n                query = query.lt(\"created_at\", olderThan);\n            }\n            if (newerThan) {\n                query = query.gt(\"created_at\", newerThan);\n            }\n            // Wykluczanie wygasłych powiadomień\n            query = query.or(`expires_at.is.null,expires_at.gt.${new Date().toISOString()}`);\n            // Sortowanie i paginacja\n            query = query.order(\"created_at\", {\n                ascending: false\n            }).range(from, to);\n            const { data, error, count } = await query;\n            if (error) {\n                console.error(\"Error fetching notifications:\", error);\n                throw new Error(`Failed to fetch notifications: ${error.message}`);\n            }\n            return {\n                notifications: data || [],\n                pagination: {\n                    page,\n                    pageSize,\n                    total: count || 0,\n                    totalPages: count ? Math.ceil(count / pageSize) : 0\n                }\n            };\n        } catch (error) {\n            console.error(\"Exception in getUserNotifications:\", error);\n            // Zwróć domyślną strukturę w przypadku błędu, aby aplikacja mogła działać dalej\n            return {\n                notifications: [],\n                pagination: {\n                    page: options.page || 1,\n                    pageSize: options.pageSize || 10,\n                    total: 0,\n                    totalPages: 0\n                },\n                error: error.message\n            };\n        }\n    }\n    /**\r\n   * Pobiera liczbę nieprzeczytanych powiadomień dla użytkownika\r\n   * @param {string} userId - ID użytkownika\r\n   * @returns {Promise<number>} - Liczba nieprzeczytanych powiadomień\r\n   */ async getUnreadCount(userId) {\n        try {\n            this._checkSupabaseClient();\n            if (!userId) {\n                return 0;\n            }\n            const { count, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").select(\"*\", {\n                count: \"exact\",\n                head: true\n            }).eq(\"user_id\", userId).eq(\"is_read\", false).or(`expires_at.is.null,expires_at.gt.${new Date().toISOString()}`);\n            if (error) {\n                console.error(\"Error counting unread notifications:\", error);\n                return 0;\n            }\n            return count || 0;\n        } catch (error) {\n            console.error(\"Exception in getUnreadCount:\", error);\n            return 0;\n        }\n    }\n    /**\r\n   * Oznacza powiadomienia jako przeczytane\r\n   * @param {Array<string>} notificationIds - Tablica ID powiadomień do oznaczenia\r\n   * @param {string} userId - ID użytkownika (dla weryfikacji bezpieczeństwa)\r\n   * @returns {Promise<boolean>} - Czy operacja się powiodła\r\n   */ async markAsRead(notificationIds, userId) {\n        try {\n            this._checkSupabaseClient();\n            if (!Array.isArray(notificationIds) || notificationIds.length === 0 || !userId) {\n                return false;\n            }\n            // Aktualizuj powiadomienia, upewniając się, że należą do użytkownika\n            const { error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").update({\n                is_read: true,\n                read_at: new Date().toISOString()\n            }).in(\"id\", notificationIds).eq(\"user_id\", userId);\n            if (error) {\n                console.error(\"Error marking notifications as read:\", error);\n                return false;\n            }\n            return true;\n        } catch (error) {\n            console.error(\"Exception in markAsRead:\", error);\n            return false;\n        }\n    }\n    /**\r\n   * Oznacza wszystkie powiadomienia użytkownika jako przeczytane\r\n   * @param {string} userId - ID użytkownika\r\n   * @returns {Promise<boolean>} - Czy operacja się powiodła\r\n   */ async markAllAsRead(userId) {\n        try {\n            this._checkSupabaseClient();\n            if (!userId) {\n                return false;\n            }\n            const { error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").update({\n                is_read: true,\n                read_at: new Date().toISOString()\n            }).eq(\"user_id\", userId).eq(\"is_read\", false);\n            if (error) {\n                console.error(\"Error marking all notifications as read:\", error);\n                return false;\n            }\n            return true;\n        } catch (error) {\n            console.error(\"Exception in markAllAsRead:\", error);\n            return false;\n        }\n    }\n    /**\r\n   * Usuwa powiadomienie\r\n   * @param {string} notificationId - ID powiadomienia do usunięcia\r\n   * @param {string} userId - ID użytkownika (dla weryfikacji bezpieczeństwa)\r\n   * @returns {Promise<boolean>} - Czy operacja się powiodła\r\n   */ async deleteNotification(notificationId, userId) {\n        try {\n            this._checkSupabaseClient();\n            if (!notificationId || !userId) {\n                return false;\n            }\n            // Usuń powiadomienie, upewniając się, że należy do użytkownika\n            const { error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").delete().eq(\"id\", notificationId).eq(\"user_id\", userId);\n            if (error) {\n                console.error(\"Error deleting notification:\", error);\n                return false;\n            }\n            return true;\n        } catch (error) {\n            console.error(\"Exception in deleteNotification:\", error);\n            return false;\n        }\n    }\n    /**\r\n   * Pobiera preferencje powiadomień dla użytkownika\r\n   * @param {string} userId - ID użytkownika\r\n   * @returns {Promise<Object>} - Preferencje powiadomień\r\n   */ async getNotificationPreferences(userId) {\n        try {\n            this._checkSupabaseClient();\n            if (!userId) {\n                return this.getDefaultPreferences();\n            }\n            const { data, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notification_preferences\").select(\"*\").eq(\"user_id\", userId).single();\n            if (error && error.code !== \"PGRST116\") {\n                console.error(\"Error fetching notification preferences:\", error);\n                return this.getDefaultPreferences();\n            }\n            // Jeśli nie znaleziono preferencji, zwróć domyślne\n            if (!data) {\n                return this.getDefaultPreferences();\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Exception in getNotificationPreferences:\", error);\n            return this.getDefaultPreferences();\n        }\n    }\n    /**\r\n   * Aktualizuje preferencje powiadomień dla użytkownika\r\n   * @param {string} userId - ID użytkownika\r\n   * @param {Object} preferences - Preferencje powiadomień do aktualizacji\r\n   * @returns {Promise<Object>} - Zaktualizowane preferencje\r\n   */ async updateNotificationPreferences(userId, preferences) {\n        try {\n            this._checkSupabaseClient();\n            if (!userId) {\n                throw new Error(\"User ID is required\");\n            }\n            // Pobierz aktualne preferencje\n            const currentPrefs = await this.getNotificationPreferences(userId);\n            // Sprawdź, czy trzeba wstawić czy zaktualizować\n            const operation = currentPrefs.id ? _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notification_preferences\").update({\n                ...preferences,\n                updated_at: new Date().toISOString()\n            }).eq(\"id\", currentPrefs.id) : _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notification_preferences\").insert({\n                user_id: userId,\n                ...preferences,\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            });\n            const { data, error } = await operation.select().single();\n            if (error) {\n                console.error(\"Error updating notification preferences:\", error);\n                throw new Error(`Failed to update notification preferences: ${error.message}`);\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Exception in updateNotificationPreferences:\", error);\n            throw error;\n        }\n    }\n    /**\r\n   * Pobiera domyślne preferencje powiadomień\r\n   * @returns {Object} - Domyślne preferencje\r\n   */ getDefaultPreferences() {\n        return {\n            email_notifications: true,\n            push_notifications: false,\n            notify_on_invite: true,\n            notify_on_message: true,\n            notify_on_purchase: true,\n            notify_on_dispute: true,\n            email_digest: \"daily\"\n        };\n    }\n    /**\r\n   * Grupuje powiązane powiadomienia\r\n   * @param {Array<Object>} notifications - Powiadomienia do pogrupowania\r\n   * @returns {Array<Object>} - Pogrupowane powiadomienia\r\n   */ groupNotifications(notifications) {\n        if (!notifications || notifications.length === 0) {\n            return [];\n        }\n        const groups = {};\n        // Grupuj powiadomienia według powiązanego zasobu, jeśli dostępny\n        notifications.forEach((notification)=>{\n            if (notification.related_entity_type && notification.related_entity_id) {\n                const key = `${notification.related_entity_type}_${notification.related_entity_id}`;\n                if (!groups[key]) {\n                    groups[key] = {\n                        type: notification.type,\n                        related_entity_type: notification.related_entity_type,\n                        related_entity_id: notification.related_entity_id,\n                        latest: notification,\n                        count: 1,\n                        notifications: [\n                            notification\n                        ]\n                    };\n                } else {\n                    groups[key].count++;\n                    groups[key].notifications.push(notification);\n                    // Zaktualizuj najnowsze, jeśli to powiadomienie jest nowsze\n                    if (new Date(notification.created_at) > new Date(groups[key].latest.created_at)) {\n                        groups[key].latest = notification;\n                    }\n                }\n            } else {\n                // Dla powiadomień bez powiązań utwórz unikalną grupę\n                const key = `individual_${notification.id}`;\n                groups[key] = {\n                    type: notification.type,\n                    latest: notification,\n                    count: 1,\n                    notifications: [\n                        notification\n                    ]\n                };\n            }\n        });\n        // Konwertuj na tablicę i sortuj według daty najnowszego powiadomienia\n        return Object.values(groups).sort((a, b)=>new Date(b.latest.created_at) - new Date(a.latest.created_at));\n    }\n    /**\r\n   * Czyści wygasłe powiadomienia\r\n   * @returns {Promise<number>} - Liczba usuniętych powiadomień\r\n   */ async cleanupExpiredNotifications() {\n        try {\n            this._checkSupabaseClient();\n            const now = new Date().toISOString();\n            const { data, error } = await _lib_database_supabase_admin_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].from(\"notifications\").delete().lt(\"expires_at\", now).not(\"expires_at\", \"is\", null).select(\"id\");\n            if (error) {\n                console.error(\"Error cleaning up expired notifications:\", error);\n                return 0;\n            }\n            return data ? data.length : 0;\n        } catch (error) {\n            console.error(\"Exception in cleanupExpiredNotifications:\", error);\n            return 0;\n        }\n    }\n}\n// Instancja singletona\nconst notificationService = new NotificationService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvbm90aWZpY2F0aW9uL25vdGlmaWNhdGlvbi1zZXJ2aWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLG9EQUFvRDtBQUNhO0FBRWpFOztDQUVDLEdBQ00sTUFBTUM7SUFDWEMsYUFBYztRQUNaLDZEQUE2RDtRQUM3RCxJQUFJLENBQUNGLDJFQUFhQSxFQUFFO1lBQ2xCRyxRQUFRQyxJQUFJLENBQUM7UUFDZjtJQUNGO0lBRUE7OztHQUdDLEdBQ0RDLHVCQUF1QjtRQUNyQixJQUFJLENBQUNMLDJFQUFhQSxFQUFFO1lBQ2xCLE1BQU0sSUFBSU0sTUFBTTtRQUNsQjtJQUNGO0lBRUE7Ozs7Ozs7Ozs7O0dBV0MsR0FDRCxNQUFNQyxtQkFDSkMsTUFBTSxFQUNOQyxJQUFJLEVBQ0pDLEtBQUssRUFDTEMsT0FBTyxFQUNQQyxvQkFBb0IsSUFBSSxFQUN4QkMsa0JBQWtCLElBQUksRUFDdEJDLFdBQVcsUUFBUSxFQUNuQkMsTUFBTSxDQUFDLEVBQ1A7UUFDQSxJQUFJO1lBQ0YsSUFBSSxDQUFDVixvQkFBb0I7WUFFekIsZ0NBQWdDO1lBQ2hDLElBQUksQ0FBQ0csVUFBVSxDQUFDQyxRQUFRLENBQUNDLFNBQVMsQ0FBQ0MsU0FBUztnQkFDMUMsTUFBTSxJQUFJTCxNQUFNO1lBQ2xCO1lBRUEsaUJBQWlCO1lBQ2pCLE1BQU1VLGFBQWE7Z0JBQUM7Z0JBQVU7Z0JBQVc7Z0JBQVk7YUFBVTtZQUMvRCxJQUFJLENBQUNBLFdBQVdDLFFBQVEsQ0FBQ1IsT0FBTztnQkFDOUIsTUFBTSxJQUFJSCxNQUFNLENBQUMsMkNBQTJDLEVBQUVVLFdBQVdFLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDdkY7WUFFQSx1QkFBdUI7WUFDdkIsTUFBTUMsa0JBQWtCO2dCQUFDO2dCQUFRO2dCQUFVO2FBQU07WUFDakQsSUFBSSxDQUFDQSxnQkFBZ0JGLFFBQVEsQ0FBQ0gsV0FBVztnQkFDdkMsTUFBTSxJQUFJUixNQUFNLENBQUMsa0NBQWtDLEVBQUVhLGdC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O2dCQUNUOUIsUUFBUThCLEtBQUssQ0FBQyw0Q0FBNENBO2dCQUMxRCxPQUFPO1lBQ1Q7WUFFQSxPQUFPRCxPQUFPQSxLQUFLb0MsTUFBTSxHQUFHO1FBQzlCLEVBQUUsT0FBT25DLE9BQU87WUFDZDlCLFFBQVE4QixLQUFLLENBQUMsNkNBQTZDQTtZQUMzRCxPQUFPO1FBQ1Q7SUFDRjtBQUNGO0FBRUEsdUJBQXVCO0FBQ2hCLE1BQU15RSxzQkFBc0IsSUFBSXpHLHNCQUFzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9zZXJ2aWNlcy9ub3RpZmljYXRpb24vbm90aWZpY2F0aW9uLXNlcnZpY2UuanM/YjI5NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvc2VydmljZXMvbm90aWZpY2F0aW9uL25vdGlmaWNhdGlvbi1zZXJ2aWNlLmpzXHJcbmltcG9ydCBzdXBhYmFzZUFkbWluIGZyb20gJ0AvbGliL2RhdGFiYXNlL3N1cGFiYXNlLWFkbWluLWNsaWVudCc7XHJcblxyXG4vKipcclxuICogU2Vyd2lzIGRvIHphcnrEhWR6YW5pYSBwb3dpYWRvbWllbmlhbWkgdcW8eXRrb3duaWvDs3dcclxuICovXHJcbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25TZXJ2aWNlIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIC8vIFNwcmF3ZMW6IGN6eSBzdXBhYmFzZUFkbWluIGplc3QgZG9zdMSZcG55IHByenkgaW5pY2phbGl6YWNqaVxyXG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm90aWZpY2F0aW9uU2VydmljZTogc3VwYWJhc2VBZG1pbiBpcyBub3QgaW5pdGlhbGl6ZWQuIFNlcnZpY2UgZnVuY3Rpb25hbGl0eSB3aWxsIGJlIGxpbWl0ZWQuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNZXRvZGEgcG9tb2NuaWN6YSBzcHJhd2R6YWrEhWNhIGRvc3TEmXBub8WbxIcga2xpZW50YSBzdXBhYmFzZVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX2NoZWNrU3VwYWJhc2VDbGllbnQoKSB7XHJcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkLiBDaGVjayBzZXJ2ZXIgY29uZmlndXJhdGlvbi4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFR3b3J6eSBub3dlIHBvd2lhZG9taWVuaWVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gSUQgdcW8eXRrb3duaWthLCBrdMOzcnkgbWEgb3RyenltYcSHIHBvd2lhZG9taWVuaWVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFR5cCBwb3dpYWRvbWllbmlhIChpbnZpdGUsIG1lc3NhZ2UsIHB1cmNoYXNlLCBkaXNwdXRlKVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZSAtIFR5dHXFgiBwb3dpYWRvbWllbmlhXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnQgLSBUcmXFm8SHIHBvd2lhZG9taWVuaWFcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRlZEVudGl0eVR5cGUgLSBUeXAgcG93acSFemFuZWdvIHphc29idSAobnAuIGdyb3VwLCBwdXJjaGFzZSlcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRlZEVudGl0eUlkIC0gSUQgcG93acSFemFuZWdvIHphc29idVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcmlvcml0eSAtIFByaW9yeXRldCBwb3dpYWRvbWllbmlhIChoaWdoLCBub3JtYWwsIGxvdylcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdHRsIC0gQ3phcyDFvHljaWEgdyBzZWt1bmRhY2gsIDAgb3puYWN6YSBicmFrIHd5Z2HFm25pxJljaWFcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSAtIFV0d29yem9uZSBwb3dpYWRvbWllbmllXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlTm90aWZpY2F0aW9uKFxyXG4gICAgdXNlcklkLFxyXG4gICAgdHlwZSxcclxuICAgIHRpdGxlLFxyXG4gICAgY29udGVudCxcclxuICAgIHJlbGF0ZWRFbnRpdHlUeXBlID0gbnVsbCxcclxuICAgIHJlbGF0ZWRFbnRpdHlJZCA9IG51bGwsXHJcbiAgICBwcmlvcml0eSA9ICdub3JtYWwnLFxyXG4gICAgdHRsID0gMFxyXG4gICkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5fY2hlY2tTdXBhYmFzZUNsaWVudCgpO1xyXG5cclxuICAgICAgLy8gV2FsaWRhY2phIHBvZHN0YXdvd3ljaCBkYW55Y2hcclxuICAgICAgaWYgKCF1c2VySWQgfHwgIXR5cGUgfHwgIXRpdGxlIHx8ICFjb250ZW50KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogdXNlcklkLCB0eXBlLCB0aXRsZSBhbmQgY29udGVudCBhcmUgcmVxdWlyZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gV2FsaWRhY2phIHR5cHVcclxuICAgICAgY29uc3QgdmFsaWRUeXBlcyA9IFsnaW52aXRlJywgJ21lc3NhZ2UnLCAncHVyY2hhc2UnLCAnZGlzcHV0ZSddO1xyXG4gICAgICBpZiAoIXZhbGlkVHlwZXMuaW5jbHVkZXModHlwZSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbm90aWZpY2F0aW9uIHR5cGUuIE11c3QgYmUgb25lIG9mOiAke3ZhbGlkVHlwZXMuam9pbignLCAnKX1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gV2FsaWRhY2phIHByaW9yeXRldHVcclxuICAgICAgY29uc3QgdmFsaWRQcmlvcml0aWVzID0gWydoaWdoJywgJ25vcm1hbCcsICdsb3cnXTtcclxuICAgICAgaWYgKCF2YWxpZFByaW9yaXRpZXMuaW5jbHVkZXMocHJpb3JpdHkpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHByaW9yaXR5LiBNdXN0IGJlIG9uZSBvZjogJHt2YWxpZFByaW9yaXRpZXMuam9pbignLCAnKX1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gT2JsaWN6IGRhdMSZIHd5Z2HFm25pxJljaWEsIGplxZtsaSBwb2Rhbm8gVFRMXHJcbiAgICAgIGxldCBleHBpcmVzQXQgPSBudWxsO1xyXG4gICAgICBpZiAodHRsID4gMCkge1xyXG4gICAgICAgIGV4cGlyZXNBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZXhwaXJlc0F0LnNldFNlY29uZHMoZXhwaXJlc0F0LmdldFNlY29uZHMoKSArIHR0bCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHtcclxuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICB0aXRsZSxcclxuICAgICAgICBjb250ZW50LFxyXG4gICAgICAgIHJlbGF0ZWRfZW50aXR5X3R5cGU6IHJlbGF0ZWRFbnRpdHlUeXBlLFxyXG4gICAgICAgIHJlbGF0ZWRfZW50aXR5X2lkOiByZWxhdGVkRW50aXR5SWQsXHJcbiAgICAgICAgcHJpb3JpdHksXHJcbiAgICAgICAgZXhwaXJlc19hdDogZXhwaXJlc0F0ID8gZXhwaXJlc0F0LnRvSVNPU3RyaW5nKCkgOiBudWxsLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBpc19yZWFkOiBmYWxzZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdub3RpZmljYXRpb25zJylcclxuICAgICAgICAuaW5zZXJ0KG5vdGlmaWNhdGlvbilcclxuICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBub3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBub3RpZmljYXRpb246ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gaW4gY3JlYXRlTm90aWZpY2F0aW9uOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQb2JpZXJhIHBvd2lhZG9taWVuaWEgdcW8eXRrb3duaWthIHogZmlsdHJvd2FuaWVtIGkgcGFnaW5hY2rEhVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBJRCB1xbx5dGtvd25pa2FcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIE9wY2plIGZpbHRyb3dhbmlhIGkgcGFnaW5hY2ppXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gLSBQb3dpYWRvbWllbmlhIGkgaW5mb3JtYWNqZSBvIHBhZ2luYWNqaVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFVzZXJOb3RpZmljYXRpb25zKHVzZXJJZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLl9jaGVja1N1cGFiYXNlQ2xpZW50KCk7XHJcblxyXG4gICAgICBpZiAoIXVzZXJJZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBJRCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7XHJcbiAgICAgICAgdHlwZSA9IG51bGwsXHJcbiAgICAgICAgcmVhZCA9IG51bGwsXHJcbiAgICAgICAgcHJpb3JpdHkgPSBudWxsLFxyXG4gICAgICAgIHBhZ2UgPSAxLFxyXG4gICAgICAgIHBhZ2VTaXplID0gMTAsXHJcbiAgICAgICAgcmVsYXRlZEVudGl0eVR5cGUgPSBudWxsLFxyXG4gICAgICAgIHJlbGF0ZWRFbnRpdHlJZCA9IG51bGwsXHJcbiAgICAgICAgb2xkZXJUaGFuID0gbnVsbCxcclxuICAgICAgICBuZXdlclRoYW4gPSBudWxsLFxyXG4gICAgICB9ID0gb3B0aW9ucztcclxuXHJcbiAgICAgIC8vIE9ibGljeiBwYWdpbmFjasSZXHJcbiAgICAgIGNvbnN0IGZyb20gPSAocGFnZSAtIDEpICogcGFnZVNpemU7XHJcbiAgICAgIGNvbnN0IHRvID0gZnJvbSArIHBhZ2VTaXplIC0gMTtcclxuXHJcbiAgICAgIC8vIFpidWR1aiB6YXB5dGFuaWVcclxuICAgICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdub3RpZmljYXRpb25zJylcclxuICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JyB9KVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XHJcblxyXG4gICAgICAvLyBaYXN0b3N1aiBmaWx0cnlcclxuICAgICAgaWYgKHR5cGUpIHtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCd0eXBlJywgdHlwZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChyZWFkICE9PSBudWxsKSB7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnaXNfcmVhZCcsIHJlYWQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocHJpb3JpdHkpIHtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdwcmlvcml0eScsIHByaW9yaXR5KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHJlbGF0ZWRFbnRpdHlUeXBlKSB7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgncmVsYXRlZF9lbnRpdHlfdHlwZScsIHJlbGF0ZWRFbnRpdHlUeXBlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHJlbGF0ZWRFbnRpdHlJZCkge1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3JlbGF0ZWRfZW50aXR5X2lkJywgcmVsYXRlZEVudGl0eUlkKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRmlsdHJ5IGRhdFxyXG4gICAgICBpZiAob2xkZXJUaGFuKSB7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5sdCgnY3JlYXRlZF9hdCcsIG9sZGVyVGhhbik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChuZXdlclRoYW4pIHtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5Lmd0KCdjcmVhdGVkX2F0JywgbmV3ZXJUaGFuKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gV3lrbHVjemFuaWUgd3lnYXPFgnljaCBwb3dpYWRvbWllxYRcclxuICAgICAgcXVlcnkgPSBxdWVyeS5vcihgZXhwaXJlc19hdC5pcy5udWxsLGV4cGlyZXNfYXQuZ3QuJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YCk7XHJcblxyXG4gICAgICAvLyBTb3J0b3dhbmllIGkgcGFnaW5hY2phXHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnlcclxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgICAucmFuZ2UoZnJvbSwgdG8pO1xyXG5cclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciwgY291bnQgfSA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbm90aWZpY2F0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggbm90aWZpY2F0aW9uczogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG5vdGlmaWNhdGlvbnM6IGRhdGEgfHwgW10sXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgcGFnZSxcclxuICAgICAgICAgIHBhZ2VTaXplLFxyXG4gICAgICAgICAgdG90YWw6IGNvdW50IHx8IDAsXHJcbiAgICAgICAgICB0b3RhbFBhZ2VzOiBjb3VudCA/IE1hdGguY2VpbChjb3VudCAvIHBhZ2VTaXplKSA6IDBcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gaW4gZ2V0VXNlck5vdGlmaWNhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgICBcclxuICAgICAgLy8gWndyw7PEhyBkb215xZtsbsSFIHN0cnVrdHVyxJkgdyBwcnp5cGFka3UgYsWCxJlkdSwgYWJ5IGFwbGlrYWNqYSBtb2fFgmEgZHppYcWCYcSHIGRhbGVqXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbm90aWZpY2F0aW9uczogW10sXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgcGFnZTogb3B0aW9ucy5wYWdlIHx8IDEsXHJcbiAgICAgICAgICBwYWdlU2l6ZTogb3B0aW9ucy5wYWdlU2l6ZSB8fCAxMCxcclxuICAgICAgICAgIHRvdGFsOiAwLFxyXG4gICAgICAgICAgdG90YWxQYWdlczogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFBvYmllcmEgbGljemLEmSBuaWVwcnplY3p5dGFueWNoIHBvd2lhZG9taWXFhCBkbGEgdcW8eXRrb3duaWthXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIElEIHXFvHl0a293bmlrYVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG51bWJlcj59IC0gTGljemJhIG5pZXByemVjenl0YW55Y2ggcG93aWFkb21pZcWEXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VW5yZWFkQ291bnQodXNlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLl9jaGVja1N1cGFiYXNlQ2xpZW50KCk7XHJcblxyXG4gICAgICBpZiAoIXVzZXJJZCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IGNvdW50LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdub3RpZmljYXRpb25zJylcclxuICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcclxuICAgICAgICAuZXEoJ2lzX3JlYWQnLCBmYWxzZSlcclxuICAgICAgICAub3IoYGV4cGlyZXNfYXQuaXMubnVsbCxleHBpcmVzX2F0Lmd0LiR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfWApO1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY291bnRpbmcgdW5yZWFkIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gY291bnQgfHwgMDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBpbiBnZXRVbnJlYWRDb3VudDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT3puYWN6YSBwb3dpYWRvbWllbmlhIGpha28gcHJ6ZWN6eXRhbmVcclxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IG5vdGlmaWNhdGlvbklkcyAtIFRhYmxpY2EgSUQgcG93aWFkb21pZcWEIGRvIG96bmFjemVuaWFcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gSUQgdcW8eXRrb3duaWthIChkbGEgd2VyeWZpa2FjamkgYmV6cGllY3plxYRzdHdhKVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSAtIEN6eSBvcGVyYWNqYSBzacSZIHBvd2lvZMWCYVxyXG4gICAqL1xyXG4gIGFzeW5jIG1hcmtBc1JlYWQobm90aWZpY2F0aW9uSWRzLCB1c2VySWQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuX2NoZWNrU3VwYWJhc2VDbGllbnQoKTtcclxuXHJcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShub3RpZmljYXRpb25JZHMpIHx8IG5vdGlmaWNhdGlvbklkcy5sZW5ndGggPT09IDAgfHwgIXVzZXJJZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQWt0dWFsaXp1aiBwb3dpYWRvbWllbmlhLCB1cGV3bmlhasSFYyBzacSZLCDFvGUgbmFsZcW8xIUgZG8gdcW8eXRrb3duaWthXHJcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXHJcbiAgICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgICBpc19yZWFkOiB0cnVlLFxyXG4gICAgICAgICAgcmVhZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuaW4oJ2lkJywgbm90aWZpY2F0aW9uSWRzKVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYXJraW5nIG5vdGlmaWNhdGlvbnMgYXMgcmVhZDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBpbiBtYXJrQXNSZWFkOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT3puYWN6YSB3c3p5c3RraWUgcG93aWFkb21pZW5pYSB1xbx5dGtvd25pa2EgamFrbyBwcnplY3p5dGFuZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBJRCB1xbx5dGtvd25pa2FcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBDenkgb3BlcmFjamEgc2nEmSBwb3dpb2TFgmFcclxuICAgKi9cclxuICBhc3luYyBtYXJrQWxsQXNSZWFkKHVzZXJJZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5fY2hlY2tTdXBhYmFzZUNsaWVudCgpO1xyXG5cclxuICAgICAgaWYgKCF1c2VySWQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXHJcbiAgICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgICBpc19yZWFkOiB0cnVlLFxyXG4gICAgICAgICAgcmVhZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXHJcbiAgICAgICAgLmVxKCdpc19yZWFkJywgZmFsc2UpO1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFya2luZyBhbGwgbm90aWZpY2F0aW9ucyBhcyByZWFkOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXhjZXB0aW9uIGluIG1hcmtBbGxBc1JlYWQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVc3V3YSBwb3dpYWRvbWllbmllXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5vdGlmaWNhdGlvbklkIC0gSUQgcG93aWFkb21pZW5pYSBkbyB1c3VuacSZY2lhXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIElEIHXFvHl0a293bmlrYSAoZGxhIHdlcnlmaWthY2ppIGJlenBpZWN6ZcWEc3R3YSlcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBDenkgb3BlcmFjamEgc2nEmSBwb3dpb2TFgmFcclxuICAgKi9cclxuICBhc3luYyBkZWxldGVOb3RpZmljYXRpb24obm90aWZpY2F0aW9uSWQsIHVzZXJJZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5fY2hlY2tTdXBhYmFzZUNsaWVudCgpO1xyXG5cclxuICAgICAgaWYgKCFub3RpZmljYXRpb25JZCB8fCAhdXNlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVc3XFhCBwb3dpYWRvbWllbmllLCB1cGV3bmlhasSFYyBzacSZLCDFvGUgbmFsZcW8eSBkbyB1xbx5dGtvd25pa2FcclxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdub3RpZmljYXRpb25zJylcclxuICAgICAgICAuZGVsZXRlKClcclxuICAgICAgICAuZXEoJ2lkJywgbm90aWZpY2F0aW9uSWQpXHJcbiAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKTtcclxuXHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIG5vdGlmaWNhdGlvbjonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBpbiBkZWxldGVOb3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQb2JpZXJhIHByZWZlcmVuY2plIHBvd2lhZG9taWXFhCBkbGEgdcW8eXRrb3duaWthXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIElEIHXFvHl0a293bmlrYVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IC0gUHJlZmVyZW5jamUgcG93aWFkb21pZcWEXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZXModXNlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLl9jaGVja1N1cGFiYXNlQ2xpZW50KCk7XHJcblxyXG4gICAgICBpZiAoIXVzZXJJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRQcmVmZXJlbmNlcygpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbl9wcmVmZXJlbmNlcycpXHJcbiAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7IC8vIFBHUlNUMTE2ID0gbm90IGZvdW5kXHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbm90aWZpY2F0aW9uIHByZWZlcmVuY2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0UHJlZmVyZW5jZXMoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSmXFm2xpIG5pZSB6bmFsZXppb25vIHByZWZlcmVuY2ppLCB6d3LDs8SHIGRvbXnFm2xuZVxyXG4gICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0UHJlZmVyZW5jZXMoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gaW4gZ2V0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZXM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0UHJlZmVyZW5jZXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFrdHVhbGl6dWplIHByZWZlcmVuY2plIHBvd2lhZG9taWXFhCBkbGEgdcW8eXRrb3duaWthXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIElEIHXFvHl0a293bmlrYVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcmVmZXJlbmNlcyAtIFByZWZlcmVuY2plIHBvd2lhZG9taWXFhCBkbyBha3R1YWxpemFjamlcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSAtIFpha3R1YWxpem93YW5lIHByZWZlcmVuY2plXHJcbiAgICovXHJcbiAgYXN5bmMgdXBkYXRlTm90aWZpY2F0aW9uUHJlZmVyZW5jZXModXNlcklkLCBwcmVmZXJlbmNlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5fY2hlY2tTdXBhYmFzZUNsaWVudCgpO1xyXG5cclxuICAgICAgaWYgKCF1c2VySWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgSUQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUG9iaWVyeiBha3R1YWxuZSBwcmVmZXJlbmNqZVxyXG4gICAgICBjb25zdCBjdXJyZW50UHJlZnMgPSBhd2FpdCB0aGlzLmdldE5vdGlmaWNhdGlvblByZWZlcmVuY2VzKHVzZXJJZCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTcHJhd2TFuiwgY3p5IHRyemViYSB3c3Rhd2nEhyBjenkgemFrdHVhbGl6b3dhxIdcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gY3VycmVudFByZWZzLmlkIFxyXG4gICAgICAgID8gc3VwYWJhc2VBZG1pbi5mcm9tKCdub3RpZmljYXRpb25fcHJlZmVyZW5jZXMnKS51cGRhdGUoe1xyXG4gICAgICAgICAgICAuLi5wcmVmZXJlbmNlcyxcclxuICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9KS5lcSgnaWQnLCBjdXJyZW50UHJlZnMuaWQpXHJcbiAgICAgICAgOiBzdXBhYmFzZUFkbWluLmZyb20oJ25vdGlmaWNhdGlvbl9wcmVmZXJlbmNlcycpLmluc2VydCh7XHJcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgLi4ucHJlZmVyZW5jZXMsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IG9wZXJhdGlvbi5zZWxlY3QoKS5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIG5vdGlmaWNhdGlvbiBwcmVmZXJlbmNlczonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIG5vdGlmaWNhdGlvbiBwcmVmZXJlbmNlczogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBpbiB1cGRhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlczonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUG9iaWVyYSBkb215xZtsbmUgcHJlZmVyZW5jamUgcG93aWFkb21pZcWEXHJcbiAgICogQHJldHVybnMge09iamVjdH0gLSBEb215xZtsbmUgcHJlZmVyZW5jamVcclxuICAgKi9cclxuICBnZXREZWZhdWx0UHJlZmVyZW5jZXMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBlbWFpbF9ub3RpZmljYXRpb25zOiB0cnVlLFxyXG4gICAgICBwdXNoX25vdGlmaWNhdGlvbnM6IGZhbHNlLFxyXG4gICAgICBub3RpZnlfb25faW52aXRlOiB0cnVlLFxyXG4gICAgICBub3RpZnlfb25fbWVzc2FnZTogdHJ1ZSxcclxuICAgICAgbm90aWZ5X29uX3B1cmNoYXNlOiB0cnVlLFxyXG4gICAgICBub3RpZnlfb25fZGlzcHV0ZTogdHJ1ZSxcclxuICAgICAgZW1haWxfZGlnZXN0OiAnZGFpbHknLCAvLyBkYWlseSwgd2Vla2x5LCBuZXZlclxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdydXB1amUgcG93acSFemFuZSBwb3dpYWRvbWllbmlhXHJcbiAgICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSBub3RpZmljYXRpb25zIC0gUG93aWFkb21pZW5pYSBkbyBwb2dydXBvd2FuaWFcclxuICAgKiBAcmV0dXJucyB7QXJyYXk8T2JqZWN0Pn0gLSBQb2dydXBvd2FuZSBwb3dpYWRvbWllbmlhXHJcbiAgICovXHJcbiAgZ3JvdXBOb3RpZmljYXRpb25zKG5vdGlmaWNhdGlvbnMpIHtcclxuICAgIGlmICghbm90aWZpY2F0aW9ucyB8fCBub3RpZmljYXRpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ3JvdXBzID0ge307XHJcblxyXG4gICAgLy8gR3J1cHVqIHBvd2lhZG9taWVuaWEgd2VkxYJ1ZyBwb3dpxIV6YW5lZ28gemFzb2J1LCBqZcWbbGkgZG9zdMSZcG55XHJcbiAgICBub3RpZmljYXRpb25zLmZvckVhY2gobm90aWZpY2F0aW9uID0+IHtcclxuICAgICAgaWYgKG5vdGlmaWNhdGlvbi5yZWxhdGVkX2VudGl0eV90eXBlICYmIG5vdGlmaWNhdGlvbi5yZWxhdGVkX2VudGl0eV9pZCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGAke25vdGlmaWNhdGlvbi5yZWxhdGVkX2VudGl0eV90eXBlfV8ke25vdGlmaWNhdGlvbi5yZWxhdGVkX2VudGl0eV9pZH1gO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghZ3JvdXBzW2tleV0pIHtcclxuICAgICAgICAgIGdyb3Vwc1trZXldID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBub3RpZmljYXRpb24udHlwZSxcclxuICAgICAgICAgICAgcmVsYXRlZF9lbnRpdHlfdHlwZTogbm90aWZpY2F0aW9uLnJlbGF0ZWRfZW50aXR5X3R5cGUsXHJcbiAgICAgICAgICAgIHJlbGF0ZWRfZW50aXR5X2lkOiBub3RpZmljYXRpb24ucmVsYXRlZF9lbnRpdHlfaWQsXHJcbiAgICAgICAgICAgIGxhdGVzdDogbm90aWZpY2F0aW9uLFxyXG4gICAgICAgICAgICBjb3VudDogMSxcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uczogW25vdGlmaWNhdGlvbl1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGdyb3Vwc1trZXldLmNvdW50Kys7XHJcbiAgICAgICAgICBncm91cHNba2V5XS5ub3RpZmljYXRpb25zLnB1c2gobm90aWZpY2F0aW9uKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gWmFrdHVhbGl6dWogbmFqbm93c3plLCBqZcWbbGkgdG8gcG93aWFkb21pZW5pZSBqZXN0IG5vd3N6ZVxyXG4gICAgICAgICAgaWYgKG5ldyBEYXRlKG5vdGlmaWNhdGlvbi5jcmVhdGVkX2F0KSA+IG5ldyBEYXRlKGdyb3Vwc1trZXldLmxhdGVzdC5jcmVhdGVkX2F0KSkge1xyXG4gICAgICAgICAgICBncm91cHNba2V5XS5sYXRlc3QgPSBub3RpZmljYXRpb247XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIERsYSBwb3dpYWRvbWllxYQgYmV6IHBvd2nEhXphxYQgdXR3w7NyeiB1bmlrYWxuxIUgZ3J1cMSZXHJcbiAgICAgICAgY29uc3Qga2V5ID0gYGluZGl2aWR1YWxfJHtub3RpZmljYXRpb24uaWR9YDtcclxuICAgICAgICBncm91cHNba2V5XSA9IHtcclxuICAgICAgICAgIHR5cGU6IG5vdGlmaWNhdGlvbi50eXBlLFxyXG4gICAgICAgICAgbGF0ZXN0OiBub3RpZmljYXRpb24sXHJcbiAgICAgICAgICBjb3VudDogMSxcclxuICAgICAgICAgIG5vdGlmaWNhdGlvbnM6IFtub3RpZmljYXRpb25dXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gS29ud2VydHVqIG5hIHRhYmxpY8SZIGkgc29ydHVqIHdlZMWCdWcgZGF0eSBuYWpub3dzemVnbyBwb3dpYWRvbWllbmlhXHJcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhncm91cHMpLnNvcnQoKGEsIGIpID0+IFxyXG4gICAgICBuZXcgRGF0ZShiLmxhdGVzdC5jcmVhdGVkX2F0KSAtIG5ldyBEYXRlKGEubGF0ZXN0LmNyZWF0ZWRfYXQpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3p5xZtjaSB3eWdhc8WCZSBwb3dpYWRvbWllbmlhXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8bnVtYmVyPn0gLSBMaWN6YmEgdXN1bmnEmXR5Y2ggcG93aWFkb21pZcWEXHJcbiAgICovXHJcbiAgYXN5bmMgY2xlYW51cEV4cGlyZWROb3RpZmljYXRpb25zKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5fY2hlY2tTdXBhYmFzZUNsaWVudCgpO1xyXG5cclxuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdub3RpZmljYXRpb25zJylcclxuICAgICAgICAuZGVsZXRlKClcclxuICAgICAgICAubHQoJ2V4cGlyZXNfYXQnLCBub3cpXHJcbiAgICAgICAgLm5vdCgnZXhwaXJlc19hdCcsICdpcycsIG51bGwpXHJcbiAgICAgICAgLnNlbGVjdCgnaWQnKTtcclxuXHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsZWFuaW5nIHVwIGV4cGlyZWQgbm90aWZpY2F0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBkYXRhID8gZGF0YS5sZW5ndGggOiAwO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXhjZXB0aW9uIGluIGNsZWFudXBFeHBpcmVkTm90aWZpY2F0aW9uczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gSW5zdGFuY2phIHNpbmdsZXRvbmFcclxuZXhwb3J0IGNvbnN0IG5vdGlmaWNhdGlvblNlcnZpY2UgPSBuZXcgTm90aWZpY2F0aW9uU2VydmljZSgpOyJdLCJuYW1lcyI6WyJzdXBhYmFzZUFkbWluIiwiTm90aWZpY2F0aW9uU2VydmljZSIsImNvbnN0cnVjdG9yIiwiY29uc29sZSIsIndhcm4iLCJfY2hlY2tTdXBhYmFzZUNsaWVudCIsIkVycm9yIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwidXNlcklkIiwidHlwZSIsInRpdGxlIiwiY29udGVudCIsInJlbGF0ZWRFbnRpdHlUeXBlIiwicmVsYXRlZEVudGl0eUlkIiwicHJpb3JpdHkiLCJ0dGwiLCJ2YWxpZFR5cGVzIiwiaW5jbHVkZXMiLCJqb2luIiwidmFsaWRQcmlvcml0aWVzIiwiZXhwaXJlc0F0IiwiRGF0ZSIsInNldFNlY29uZHMiLCJnZXRTZWNvbmRzIiwibm90aWZpY2F0aW9uIiwidXNlcl9pZCIsInJlbGF0ZWRfZW50aXR5X3R5cGUiLCJyZWxhdGVkX2VudGl0eV9pZCIsImV4cGlyZXNfYXQiLCJ0b0lTT1N0cmluZyIsImNyZWF0ZWRfYXQiLCJpc19yZWFkIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsImluc2VydCIsInNlbGVjdCIsInNpbmdsZSIsIm1lc3NhZ2UiLCJnZXRVc2VyTm90aWZpY2F0aW9ucyIsIm9wdGlvbnMiLCJyZWFkIiwicGFnZSIsInBhZ2VTaXplIiwib2xkZXJUaGFuIiwibmV3ZXJUaGFuIiwidG8iLCJxdWVyeSIsImNvdW50IiwiZXEiLCJsdCIsImd0Iiwib3IiLCJvcmRlciIsImFzY2VuZGluZyIsInJhbmdlIiwibm90aWZpY2F0aW9ucyIsInBhZ2luYXRpb24iLCJ0b3RhbCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsImdldFVucmVhZENvdW50IiwiaGVhZCIsIm1hcmtBc1JlYWQiLCJub3RpZmljYXRpb25JZHMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ1cGRhdGUiLCJyZWFkX2F0IiwiaW4iLCJtYXJrQWxsQXNSZWFkIiwiZGVsZXRlTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uSWQiLCJkZWxldGUiLCJnZXROb3RpZmljYXRpb25QcmVmZXJlbmNlcyIsImdldERlZmF1bHRQcmVmZXJlbmNlcyIsImNvZGUiLCJ1cGRhdGVOb3RpZmljYXRpb25QcmVmZXJlbmNlcyIsInByZWZlcmVuY2VzIiwiY3VycmVudFByZWZzIiwib3BlcmF0aW9uIiwiaWQiLCJ1cGRhdGVkX2F0IiwiZW1haWxfbm90aWZpY2F0aW9ucyIsInB1c2hfbm90aWZpY2F0aW9ucyIsIm5vdGlmeV9vbl9pbnZpdGUiLCJub3RpZnlfb25fbWVzc2FnZSIsIm5vdGlmeV9vbl9wdXJjaGFzZSIsIm5vdGlmeV9vbl9kaXNwdXRlIiwiZW1haWxfZGlnZXN0IiwiZ3JvdXBOb3RpZmljYXRpb25zIiwiZ3JvdXBzIiwiZm9yRWFjaCIsImtleSIsImxhdGVzdCIsInB1c2giLCJPYmplY3QiLCJ2YWx1ZXMiLCJzb3J0IiwiYSIsImIiLCJjbGVhbnVwRXhwaXJlZE5vdGlmaWNhdGlvbnMiLCJub3ciLCJub3QiLCJub3RpZmljYXRpb25TZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/notification/notification-service.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@clerk","vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/tslib","vendor-chunks/cookie","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Froute&page=%2Fapi%2Fnotifications%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Froute.js&appDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbacze%5CProject%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();