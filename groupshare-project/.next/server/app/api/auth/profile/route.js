"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/profile/route";
exports.ids = ["app/api/auth/profile/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fprofile%2Froute&page=%2Fapi%2Fauth%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fprofile%2Froute.js&appDir=C%3A%5CUsers%5Cpawbak2%5CProjects%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpawbak2%5CProjects%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fprofile%2Froute&page=%2Fapi%2Fauth%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fprofile%2Froute.js&appDir=C%3A%5CUsers%5Cpawbak2%5CProjects%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpawbak2%5CProjects%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_pawbak2_Projects_GroupShare_groupshare_project_src_app_api_auth_profile_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/profile/route.js */ \"(rsc)/./src/app/api/auth/profile/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/profile/route\",\n        pathname: \"/api/auth/profile\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/profile/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\pawbak2\\\\Projects\\\\GroupShare\\\\groupshare-project\\\\src\\\\app\\\\api\\\\auth\\\\profile\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_pawbak2_Projects_GroupShare_groupshare_project_src_app_api_auth_profile_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/profile/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGcHJvZmlsZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYXV0aCUyRnByb2ZpbGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhdXRoJTJGcHJvZmlsZSUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNwYXdiYWsyJTVDUHJvamVjdHMlNUNHcm91cFNoYXJlJTVDZ3JvdXBzaGFyZS1wcm9qZWN0JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNwYXdiYWsyJTVDUHJvamVjdHMlNUNHcm91cFNoYXJlJTVDZ3JvdXBzaGFyZS1wcm9qZWN0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvRDtBQUNqSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8/ZTE2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxwYXdiYWsyXFxcXFByb2plY3RzXFxcXEdyb3VwU2hhcmVcXFxcZ3JvdXBzaGFyZS1wcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxccHJvZmlsZVxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9wcm9maWxlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9wcm9maWxlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL3Byb2ZpbGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxwYXdiYWsyXFxcXFByb2plY3RzXFxcXEdyb3VwU2hhcmVcXFxcZ3JvdXBzaGFyZS1wcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxccHJvZmlsZVxcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXV0aC9wcm9maWxlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fprofile%2Froute&page=%2Fapi%2Fauth%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fprofile%2Froute.js&appDir=C%3A%5CUsers%5Cpawbak2%5CProjects%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpawbak2%5CProjects%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/profile/route.js":
/*!*******************************************!*\
  !*** ./src/app/api/auth/profile/route.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/currentUser.js\");\n/* harmony import */ var _lib_supabase_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/supabase-client */ \"(rsc)/./src/lib/supabase-client.js\");\n/* harmony import */ var _lib_supabase_admin_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../lib/supabase-admin-client */ \"(rsc)/./src/lib/supabase-admin-client.js\");\n\n\n\n\n/**\r\n * GET /api/auth/profile\r\n * Pobiera profil obecnie zalogowanego użytkownika, lub tworzy go jeśli nie istnieje\r\n */ async function GET() {\n    try {\n        // Pobierz dane zalogowanego użytkownika z Clerk\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(\"Użytkownik Clerk:\", user.id);\n        // Sprawdź, czy użytkownik ma profil w bazie danych\n        const userProfile = await (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_1__.getUserByAuthId)(user.id);\n        // Jeśli profil istnieje, zwróć go\n        if (userProfile) {\n            console.log(\"Znaleziono istniejący profil:\", userProfile.id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(userProfile);\n        }\n        // W przeciwnym razie utwórz nowy profil\n        const newProfile = {\n            external_auth_id: user.id,\n            display_name: user.firstName ? `${user.firstName} ${user.lastName || \"\"}`.trim() : user.username || \"Nowy użytkownik\",\n            email: user.emailAddresses[0]?.emailAddress || \"\",\n            phone_number: user.phoneNumbers[0]?.phoneNumber || null,\n            profile_type: \"both\",\n            verification_level: \"basic\",\n            bio: \"\",\n            avatar_url: user.imageUrl || null,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        console.log(\"Tworzenie nowego profilu dla użytkownika Clerk:\", user.id);\n        // KLUCZOWA ZMIANA: Użyj bezpośrednio supabaseAdmin zamiast createUserProfile\n        const { data: createdProfile, error: createError } = await _lib_supabase_admin_client__WEBPACK_IMPORTED_MODULE_2__[\"default\"].from(\"user_profiles\").insert([\n            newProfile\n        ]).select().single();\n        if (createError) {\n            console.error(\"Error creating user profile with supabaseAdmin:\", createError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to create user profile\",\n                details: createError\n            }, {\n                status: 500\n            });\n        }\n        console.log(\"Utworzono profil:\", createdProfile.id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(createdProfile);\n    } catch (error) {\n        console.error(\"Error in profile API:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"An unexpected error occurred\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * PATCH /api/auth/profile\r\n * Aktualizuje profil zalogowanego użytkownika\r\n */ async function PATCH(request) {\n    try {\n        // Pobierz dane zalogowanego użytkownika z Clerk\n        const user = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.currentUser)();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Pobierz dane z żądania\n        const updates = await request.json();\n        // Zablokuj modyfikację pól, których użytkownik nie powinien móc zmienić\n        const forbiddenFields = [\n            \"id\",\n            \"external_auth_id\",\n            \"email\",\n            \"verification_level\",\n            \"rating_avg\",\n            \"rating_count\",\n            \"created_at\"\n        ];\n        for (const field of forbiddenFields){\n            if (field in updates) {\n                delete updates[field];\n            }\n        }\n        // Sprawdź, czy użytkownik ma profil w bazie danych\n        const userProfile = await (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_1__.getUserByAuthId)(user.id);\n        if (!userProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User profile not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Aktualizuj profil z supabaseAdmin\n        const { data: updated, error: updateError } = await _lib_supabase_admin_client__WEBPACK_IMPORTED_MODULE_2__[\"default\"].from(\"user_profiles\").update({\n            ...updates,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", userProfile.id).select().single();\n        if (updateError) {\n            console.error(\"Error updating profile:\", updateError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to update profile\",\n                details: updateError\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(updated);\n    } catch (error) {\n        console.error(\"Error updating profile:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"An unexpected error occurred\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL3Byb2ZpbGUvcm91dGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJDO0FBQ1E7QUFDZTtBQUNBO0FBRWxFOzs7Q0FHQyxHQUNNLGVBQWVJO0lBQ3BCLElBQUk7UUFDRixnREFBZ0Q7UUFDaEQsTUFBTUMsT0FBTyxNQUFNSixpRUFBV0E7UUFFOUIsSUFBSSxDQUFDSSxNQUFNO1lBQ1QsT0FBT0wscURBQVlBLENBQUNNLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBZSxHQUN4QjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUFDLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJMLEtBQUtNLEVBQUU7UUFFeEMsbURBQW1EO1FBQ25ELE1BQU1DLGNBQWMsTUFBTVYscUVBQWVBLENBQUNHLEtBQUtNLEVBQUU7UUFFakQsa0NBQWtDO1FBQ2xDLElBQUlDLGFBQWE7WUFDZkgsUUFBUUMsR0FBRyxDQUFDLGlDQUFpQ0UsWUFBWUQsRUFBRTtZQUMzRCxPQUFPWCxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDTTtRQUMzQjtRQUVBLHdDQUF3QztRQUN4QyxNQUFNQyxhQUFhO1lBQ2pCQyxrQkFBa0JULEtBQUtNLEVBQUU7WUFDekJJLGNBQWNWLEtBQUtXLFNBQVMsR0FDeEIsQ0FBQyxFQUFFWCxLQUFLVyxTQUFTLENBQUMsQ0FBQyxFQUFFWCxLQUFLWSxRQUFRLElBQUksR0FBRyxDQUFDLENBQUNDLElBQUksS0FDOUNiLEtBQUtjLFFBQVEsSUFBSTtZQUN0QkMsT0FBT2YsS0FBS2dCLGNBQWMsQ0FBQyxFQUFFLEVBQUVDLGdCQUFnQjtZQUMvQ0MsY0FBY2xCLEtBQUttQixZQUFZLENBQUMsRUFBRSxFQUFFQyxlQUFlO1lBQ25EQyxjQUFjO1lBQ2RDLG9CQUFvQjtZQUNwQkMsS0FBSztZQUNMQyxZQUFZeEIsS0FBS3lCLFFBQVEsSUFBSTtZQUM3QkMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1lBQ2xDQyxZQUFZLElBQUlGLE9BQU9DLFdB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cHAvYXBpL2F1dGgvcHJvZmlsZS9yb3V0ZS5qcz9hMGRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgY3VycmVudFVzZXIgfSBmcm9tICdAY2xlcmsvbmV4dGpzL3NlcnZlcic7XHJcbmltcG9ydCB7IGdldFVzZXJCeUF1dGhJZCB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9zdXBhYmFzZS1jbGllbnQnO1xyXG5pbXBvcnQgc3VwYWJhc2VBZG1pbiBmcm9tICcuLi8uLi8uLi8uLi9saWIvc3VwYWJhc2UtYWRtaW4tY2xpZW50JztcclxuXHJcbi8qKlxyXG4gKiBHRVQgL2FwaS9hdXRoL3Byb2ZpbGVcclxuICogUG9iaWVyYSBwcm9maWwgb2JlY25pZSB6YWxvZ293YW5lZ28gdcW8eXRrb3duaWthLCBsdWIgdHdvcnp5IGdvIGplxZtsaSBuaWUgaXN0bmllamVcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFBvYmllcnogZGFuZSB6YWxvZ293YW5lZ28gdcW8eXRrb3duaWthIHogQ2xlcmtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjdXJyZW50VXNlcigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKFwiVcW8eXRrb3duaWsgQ2xlcms6XCIsIHVzZXIuaWQpO1xyXG4gICAgXHJcbiAgICAvLyBTcHJhd2TFuiwgY3p5IHXFvHl0a293bmlrIG1hIHByb2ZpbCB3IGJhemllIGRhbnljaFxyXG4gICAgY29uc3QgdXNlclByb2ZpbGUgPSBhd2FpdCBnZXRVc2VyQnlBdXRoSWQodXNlci5pZCk7XHJcbiAgICBcclxuICAgIC8vIEplxZtsaSBwcm9maWwgaXN0bmllamUsIHp3csOzxIcgZ29cclxuICAgIGlmICh1c2VyUHJvZmlsZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlpuYWxlemlvbm8gaXN0bmllasSFY3kgcHJvZmlsOlwiLCB1c2VyUHJvZmlsZS5pZCk7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih1c2VyUHJvZmlsZSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFcgcHJ6ZWNpd255bSByYXppZSB1dHfDs3J6IG5vd3kgcHJvZmlsXHJcbiAgICBjb25zdCBuZXdQcm9maWxlID0ge1xyXG4gICAgICBleHRlcm5hbF9hdXRoX2lkOiB1c2VyLmlkLFxyXG4gICAgICBkaXNwbGF5X25hbWU6IHVzZXIuZmlyc3ROYW1lIFxyXG4gICAgICAgID8gYCR7dXNlci5maXJzdE5hbWV9ICR7dXNlci5sYXN0TmFtZSB8fCAnJ31gLnRyaW0oKSBcclxuICAgICAgICA6ICh1c2VyLnVzZXJuYW1lIHx8ICdOb3d5IHXFvHl0a293bmlrJyksXHJcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsQWRkcmVzc2VzWzBdPy5lbWFpbEFkZHJlc3MgfHwgJycsXHJcbiAgICAgIHBob25lX251bWJlcjogdXNlci5waG9uZU51bWJlcnNbMF0/LnBob25lTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgIHByb2ZpbGVfdHlwZTogJ2JvdGgnLCAvLyBEb215xZtsbmEgd2FydG/Fm8SHXHJcbiAgICAgIHZlcmlmaWNhdGlvbl9sZXZlbDogJ2Jhc2ljJywgLy8gRG9tecWbbG5hIHdhcnRvxZvEh1xyXG4gICAgICBiaW86ICcnLFxyXG4gICAgICBhdmF0YXJfdXJsOiB1c2VyLmltYWdlVXJsIHx8IG51bGwsXHJcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhcIlR3b3J6ZW5pZSBub3dlZ28gcHJvZmlsdSBkbGEgdcW8eXRrb3duaWthIENsZXJrOlwiLCB1c2VyLmlkKTtcclxuICAgIFxyXG4gICAgLy8gS0xVQ1pPV0EgWk1JQU5BOiBVxbx5aiBiZXpwb8WbcmVkbmlvIHN1cGFiYXNlQWRtaW4gemFtaWFzdCBjcmVhdGVVc2VyUHJvZmlsZVxyXG4gICAgY29uc3QgeyBkYXRhOiBjcmVhdGVkUHJvZmlsZSwgZXJyb3I6IGNyZWF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcclxuICAgICAgLmluc2VydChbbmV3UHJvZmlsZV0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChjcmVhdGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyB1c2VyIHByb2ZpbGUgd2l0aCBzdXBhYmFzZUFkbWluOicsIGNyZWF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIHVzZXIgcHJvZmlsZScsIGRldGFpbHM6IGNyZWF0ZUVycm9yIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKFwiVXR3b3J6b25vIHByb2ZpbDpcIiwgY3JlYXRlZFByb2ZpbGUuaWQpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGNyZWF0ZWRQcm9maWxlKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gcHJvZmlsZSBBUEk6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBBVENIIC9hcGkvYXV0aC9wcm9maWxlXHJcbiAqIEFrdHVhbGl6dWplIHByb2ZpbCB6YWxvZ293YW5lZ28gdcW8eXRrb3duaWthXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUEFUQ0gocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBQb2JpZXJ6IGRhbmUgemFsb2dvd2FuZWdvIHXFvHl0a293bmlrYSB6IENsZXJrXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3VycmVudFVzZXIoKTtcclxuICAgIFxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBQb2JpZXJ6IGRhbmUgeiDFvMSFZGFuaWFcclxuICAgIGNvbnN0IHVwZGF0ZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIFxyXG4gICAgLy8gWmFibG9rdWogbW9keWZpa2FjasSZIHDDs2wsIGt0w7NyeWNoIHXFvHl0a293bmlrIG5pZSBwb3dpbmllbiBtw7NjIHptaWVuacSHXHJcbiAgICBjb25zdCBmb3JiaWRkZW5GaWVsZHMgPSBbJ2lkJywgJ2V4dGVybmFsX2F1dGhfaWQnLCAnZW1haWwnLCAndmVyaWZpY2F0aW9uX2xldmVsJywgJ3JhdGluZ19hdmcnLCAncmF0aW5nX2NvdW50JywgJ2NyZWF0ZWRfYXQnXTtcclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBmb3JiaWRkZW5GaWVsZHMpIHtcclxuICAgICAgaWYgKGZpZWxkIGluIHVwZGF0ZXMpIHtcclxuICAgICAgICBkZWxldGUgdXBkYXRlc1tmaWVsZF07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU3ByYXdkxbosIGN6eSB1xbx5dGtvd25payBtYSBwcm9maWwgdyBiYXppZSBkYW55Y2hcclxuICAgIGNvbnN0IHVzZXJQcm9maWxlID0gYXdhaXQgZ2V0VXNlckJ5QXV0aElkKHVzZXIuaWQpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXJQcm9maWxlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVXNlciBwcm9maWxlIG5vdCBmb3VuZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDA0IH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQWt0dWFsaXp1aiBwcm9maWwgeiBzdXBhYmFzZUFkbWluXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWQsIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgIC4uLnVwZGF0ZXMsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5lcSgnaWQnLCB1c2VyUHJvZmlsZS5pZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHByb2ZpbGU6JywgdXBkYXRlRXJyb3IpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgcHJvZmlsZScsIGRldGFpbHM6IHVwZGF0ZUVycm9yIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih1cGRhdGVkKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImN1cnJlbnRVc2VyIiwiZ2V0VXNlckJ5QXV0aElkIiwic3VwYWJhc2VBZG1pbiIsIkdFVCIsInVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwiaWQiLCJ1c2VyUHJvZmlsZSIsIm5ld1Byb2ZpbGUiLCJleHRlcm5hbF9hdXRoX2lkIiwiZGlzcGxheV9uYW1lIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJ0cmltIiwidXNlcm5hbWUiLCJlbWFpbCIsImVtYWlsQWRkcmVzc2VzIiwiZW1haWxBZGRyZXNzIiwicGhvbmVfbnVtYmVyIiwicGhvbmVOdW1iZXJzIiwicGhvbmVOdW1iZXIiLCJwcm9maWxlX3R5cGUiLCJ2ZXJpZmljYXRpb25fbGV2ZWwiLCJiaW8iLCJhdmF0YXJfdXJsIiwiaW1hZ2VVcmwiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZF9hdCIsImRhdGEiLCJjcmVhdGVkUHJvZmlsZSIsImNyZWF0ZUVycm9yIiwiZnJvbSIsImluc2VydCIsInNlbGVjdCIsInNpbmdsZSIsImRldGFpbHMiLCJtZXNzYWdlIiwiUEFUQ0giLCJyZXF1ZXN0IiwidXBkYXRlcyIsImZvcmJpZGRlbkZpZWxkcyIsImZpZWxkIiwidXBkYXRlZCIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwiZXEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/profile/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase-admin-client.js":
/*!******************************************!*\
  !*** ./src/lib/supabase-admin-client.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_KEY;\nif (!supabaseUrl || !supabaseServiceKey) {\n    console.error(\"Missing environment variables: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_KEY\");\n}\nconsole.log(\"Inicjalizacja supabaseAdmin z kluczem serwisowym\");\n// Klient z uprawnieniami administratora, używany TYLKO na serwerze\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabaseAdmin);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLWFkbWluLWNsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxRDtBQUVyRCxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcscUJBQXFCSCxRQUFRQyxHQUFHLENBQUNHLG9CQUFvQjtBQUUzRCxJQUFJLENBQUNMLGVBQWUsQ0FBQ0ksb0JBQW9CO0lBQ3ZDRSxRQUFRQyxLQUFLLENBQ1g7QUFFSjtBQUVBRCxRQUFRRSxHQUFHLENBQUM7QUFFWixtRUFBbUU7QUFDbkUsTUFBTUMsZ0JBQWdCVixtRUFBWUEsQ0FBQ0MsYUFBYUk7QUFFaEQsaUVBQWVLLGFBQWFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncm91cHNoYXJlLXByb2plY3QvLi9zcmMvbGliL3N1cGFiYXNlLWFkbWluLWNsaWVudC5qcz85YWQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9LRVk7XHJcblxyXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcclxuICBjb25zb2xlLmVycm9yKFxyXG4gICAgJ01pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzOiBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgb3IgU1VQQUJBU0VfU0VSVklDRV9LRVknXHJcbiAgKTtcclxufVxyXG5cclxuY29uc29sZS5sb2coXCJJbmljamFsaXphY2phIHN1cGFiYXNlQWRtaW4geiBrbHVjemVtIHNlcndpc293eW1cIik7XHJcblxyXG4vLyBLbGllbnQgeiB1cHJhd25pZW5pYW1pIGFkbWluaXN0cmF0b3JhLCB1xbx5d2FueSBUWUxLTyBuYSBzZXJ3ZXJ6ZVxyXG5jb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXkpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc3VwYWJhc2VBZG1pbjsiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJsb2ciLCJzdXBhYmFzZUFkbWluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase-admin-client.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase-client.js":
/*!************************************!*\
  !*** ./src/lib/supabase-client.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createApplication: () => (/* binding */ createApplication),\n/* harmony export */   createUserProfile: () => (/* binding */ createUserProfile),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getReceivedApplications: () => (/* binding */ getReceivedApplications),\n/* harmony export */   getSubscriptionOffer: () => (/* binding */ getSubscriptionOffer),\n/* harmony export */   getSubscriptionOffers: () => (/* binding */ getSubscriptionOffers),\n/* harmony export */   getSubscriptionPlatforms: () => (/* binding */ getSubscriptionPlatforms),\n/* harmony export */   getUserApplications: () => (/* binding */ getUserApplications),\n/* harmony export */   getUserByAuthId: () => (/* binding */ getUserByAuthId),\n/* harmony export */   handleSupabaseError: () => (/* binding */ handleSupabaseError),\n/* harmony export */   updateApplicationStatus: () => (/* binding */ updateApplicationStatus),\n/* harmony export */   updateUserProfile: () => (/* binding */ updateUserProfile)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// src/lib/supabase-client.js\n\n// Initialize the Supabase client\nconst supabaseUrl = \"https://twiarwghktzljergqfsm.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3aWFyd2doa3R6bGplcmdxZnNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM3MTMwNzgsImV4cCI6MjA1OTI4OTA3OH0.WJqpXziIp05aQLKpFhdqUZQNoF6JRqRTLKY1X4TEn2c\";\n// Check if environment variables are set\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing environment variables: NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n}\n// Create a single instance of the Supabase client to reuse across the app\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Helper function to handle Supabase errors consistently\nconst handleSupabaseError = (error)=>{\n    console.error(\"Supabase error:\", error);\n    // Return a standardized error object\n    return {\n        error: true,\n        message: error.message || \"An unexpected error occurred\",\n        code: error.code || \"unknown_error\",\n        details: error.details || null\n    };\n};\n// Function to get a user profile by Clerk auth ID\nconst getUserByAuthId = async (authId)=>{\n    if (!authId) return null;\n    try {\n        const { data, error } = await supabase.from(\"user_profiles\").select(\"*\").eq(\"external_auth_id\", authId).single();\n        if (error) {\n            if (error.code === \"PGRST116\") {\n                // Nie znaleziono - to normalny przypadek, nie musimy logować\n                return null;\n            } else if (error.code === \"42501\") {\n                console.error(\"Permission denied when fetching user profile:\", error);\n                throw new Error(\"Permission denied when accessing user profile\");\n            } else {\n                console.error(\"Error fetching user profile:\", error);\n                throw new Error(error.message || \"Failed to fetch user profile\");\n            }\n        }\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        throw error; // Propagujemy błąd, aby wywołujący mógł go obsłużyć\n    }\n};\n// Function to create a new user profile\nconst createUserProfile = async (userProfile)=>{\n    try {\n        const { data, error } = await supabase.from(\"user_profiles\").insert([\n            userProfile\n        ]).select().single();\n        if (error) {\n            if (error.code === \"23505\") {\n                console.warn(\"Attempt to create duplicate user profile:\", error);\n                throw new Error(\"User profile already exists\");\n            } else if (error.code === \"42501\") {\n                console.error(\"Permission denied when creating user profile:\", error);\n                throw new Error(\"Permission denied when creating user profile\");\n            } else if (error.code === \"23502\") {\n                console.error(\"Missing required field for user profile:\", error);\n                throw new Error(\"Missing required field for user profile\");\n            } else {\n                console.error(\"Error creating user profile:\", error);\n                throw new Error(error.message || \"Failed to create user profile\");\n            }\n        }\n        if (!data) {\n            console.warn(\"No data returned after user profile creation\");\n            throw new Error(\"User profile may have been created but no data was returned\");\n        }\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        throw error;\n    }\n};\n// Function to update a user profile\nconst updateUserProfile = async (userId, updates)=>{\n    try {\n        const { data, error } = await supabase.from(\"user_profiles\").update(updates).eq(\"id\", userId).select().single();\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        return null;\n    }\n};\n// Function to get active subscription platforms\nconst getSubscriptionPlatforms = async ()=>{\n    try {\n        const { data, error } = await supabase.from(\"subscription_platforms\").select(\"*\").eq(\"active\", true).order(\"name\");\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        return [];\n    }\n};\n// Function to get active subscription offers\nconst getSubscriptionOffers = async (filters = {})=>{\n    try {\n        // Start with base query\n        let query = supabase.from(\"group_subs\").select(`\r\n        *,\r\n        subscription_platforms(*),\r\n        groups(id, name),\r\n        owner:groups!inner(owner_id, user_profiles!inner(id, display_name, avatar_url, rating_avg, rating_count, verification_level))\r\n      `).eq(\"status\", \"active\");\n        // Apply filters\n        if (filters.platformId) {\n            query = query.eq(\"platform_id\", filters.platformId);\n        }\n        if (filters.minPrice !== undefined) {\n            query = query.gte(\"price_per_slot\", filters.minPrice);\n        }\n        if (filters.maxPrice !== undefined) {\n            query = query.lte(\"price_per_slot\", filters.maxPrice);\n        }\n        if (filters.availableSlots === true) {\n            query = query.gt(\"slots_available\", 0);\n        }\n        // Add ordering\n        const orderBy = filters.orderBy || \"created_at\";\n        const ascending = filters.ascending === true;\n        query = query.order(orderBy, {\n            ascending\n        });\n        // Add pagination\n        if (filters.limit) {\n            query = query.limit(filters.limit);\n        }\n        if (filters.offset) {\n            query = query.range(filters.offset, filters.offset + (filters.limit || 10) - 1);\n        }\n        const { data, error } = await query;\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        return [];\n    }\n};\n// Function to get a specific subscription offer\nconst getSubscriptionOffer = async (offerId)=>{\n    try {\n        const { data, error } = await supabase.from(\"group_subs\").select(`\r\n        *,\r\n        subscription_platforms(*),\r\n        groups(id, name, description),\r\n        owner:groups!inner(owner_id, user_profiles!inner(id, display_name, avatar_url, rating_avg, rating_count, verification_level, bio))\r\n      `).eq(\"id\", offerId).single();\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        return null;\n    }\n};\n// Function to create a new application for a subscription\nconst createApplication = async (application)=>{\n    try {\n        const { data, error } = await supabase.from(\"applications\").insert([\n            application\n        ]).select().single();\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        return null;\n    }\n};\n// Function to get user's applications\nconst getUserApplications = async (userId, status = null)=>{\n    try {\n        let query = supabase.from(\"applications\").select(`\r\n        *,\r\n        group_sub:group_subs(\r\n          id, \r\n          price_per_slot,\r\n          currency,\r\n          subscription_platforms(id, name, icon)\r\n        ),\r\n        seller:group_subs(\r\n          groups(\r\n            owner_id, \r\n            user_profiles!inner(id, display_name, avatar_url)\r\n          )\r\n        )\r\n      `).eq(\"user_id\", userId);\n        // Filter by status if provided\n        if (status) {\n            query = query.eq(\"status\", status);\n        }\n        // Order by created_at descending (newest first)\n        query = query.order(\"created_at\", {\n            ascending: false\n        });\n        const { data, error } = await query;\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        return [];\n    }\n};\n// Function to get received applications for group subscriptions owned by user\nconst getReceivedApplications = async (userId, status = null)=>{\n    try {\n        let query = supabase.from(\"applications\").select(`\r\n        *,\r\n        group_sub:group_subs!inner(\r\n          id,\r\n          price_per_slot,\r\n          currency,\r\n          groups!inner(\r\n            id,\r\n            name,\r\n            owner_id\r\n          ),\r\n          subscription_platforms(id, name, icon)\r\n        ),\r\n        applicant:user_profiles!inner(\r\n          id,\r\n          display_name,\r\n          avatar_url,\r\n          rating_avg,\r\n          rating_count\r\n        )\r\n      `).eq(\"group_sub.groups.owner_id\", userId);\n        // Filter by status if provided\n        if (status) {\n            query = query.eq(\"status\", status);\n        }\n        // Order by created_at descending (newest first)\n        query = query.order(\"created_at\", {\n            ascending: false\n        });\n        const { data, error } = await query;\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        return [];\n    }\n};\n// Function to update application status\nconst updateApplicationStatus = async (applicationId, status)=>{\n    try {\n        const { data, error } = await supabase.from(\"applications\").update({\n            status\n        }).eq(\"id\", applicationId).select().single();\n        if (error) throw error;\n        return data;\n    } catch (error) {\n        handleSupabaseError(error);\n        return null;\n    }\n};\n// Export the Supabase client\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (supabase);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUUsQ0FBQyxVQUFVa0M7UUFDN0I7UUFFQSxnREFBZ0Q7UUFDaERuQixRQUFRQSxNQUFNSCxLQUFLLENBQUMsY0FBYztZQUFFYSxXQUFXO1FBQU07UUFFckQsTUFBTSxFQUFFNUIsSUFBSSxFQUFFUixLQUFLLEVBQUUsR0FBRyxNQUFNMEI7UUFFOUIsSUFBSTFCLE9BQU8sTUFBTUE7UUFFakIsT0FBT1E7SUFDVCxFQUFFLE9BQU9SLE9BQU87UUFDZEUsb0JBQW9CRjtRQUNwQixPQUFPLEVBQUU7SUFDWDtBQUNGLEVBQUU7QUFFRix3Q0FBd0M7QUFDakMsTUFBTStDLDBCQUEwQixPQUFPQyxlQUFlSDtJQUMzRCxJQUFJO1FBQ0YsTUFBTSxFQUFFckMsSUFBSSxFQUFFUixLQUFLLEVBQUUsR0FBRyxNQUFNQyxTQUMzQlEsSUFBSSxDQUFDLGdCQUNMWSxNQUFNLENBQUM7WUFBRXdCO1FBQU8sR0FDaEJsQyxFQUFFLENBQUMsTUFBTXFDLGVBQ1R0QyxNQUFNLEdBQ05FLE1BQU07UUFFVCxJQUFJWixPQUFPLE1BQU1BO1FBRWpCLE9BQU9RO0lBQ1QsRUFBRSxPQUFPUixPQUFPO1FBQ2RFLG9CQUFvQkY7UUFDcEIsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVGLDZCQUE2QjtBQUM3QixpRUFBZUMsUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dyb3Vwc2hhcmUtcHJvamVjdC8uL3NyYy9saWIvc3VwYWJhc2UtY2xpZW50LmpzPzZiMjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9zdXBhYmFzZS1jbGllbnQuanNcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbi8vIEluaXRpYWxpemUgdGhlIFN1cGFiYXNlIGNsaWVudFxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XHJcblxyXG4vLyBDaGVjayBpZiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldFxyXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcclxuICBjb25zb2xlLmVycm9yKFxyXG4gICAgJ01pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzOiBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgb3IgTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVknXHJcbiAgKTtcclxufVxyXG5cclxuLy8gQ3JlYXRlIGEgc2luZ2xlIGluc3RhbmNlIG9mIHRoZSBTdXBhYmFzZSBjbGllbnQgdG8gcmV1c2UgYWNyb3NzIHRoZSBhcHBcclxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIFN1cGFiYXNlIGVycm9ycyBjb25zaXN0ZW50bHlcclxuZXhwb3J0IGNvbnN0IGhhbmRsZVN1cGFiYXNlRXJyb3IgPSAoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgXHJcbiAgLy8gUmV0dXJuIGEgc3RhbmRhcmRpemVkIGVycm9yIG9iamVjdFxyXG4gIHJldHVybiB7XHJcbiAgICBlcnJvcjogdHJ1ZSxcclxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnLFxyXG4gICAgY29kZTogZXJyb3IuY29kZSB8fCAndW5rbm93bl9lcnJvcicsXHJcbiAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzIHx8IG51bGwsXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGdldCBhIHVzZXIgcHJvZmlsZSBieSBDbGVyayBhdXRoIElEXHJcbmV4cG9ydCBjb25zdCBnZXRVc2VyQnlBdXRoSWQgPSBhc3luYyAoYXV0aElkKSA9PiB7XHJcbiAgaWYgKCFhdXRoSWQpIHJldHVybiBudWxsO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2V4dGVybmFsX2F1dGhfaWQnLCBhdXRoSWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XHJcbiAgICAgICAgLy8gTmllIHpuYWxlemlvbm8gLSB0byBub3JtYWxueSBwcnp5cGFkZWssIG5pZSBtdXNpbXkgbG9nb3dhxIdcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnNDI1MDEnKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignUGVybWlzc2lvbiBkZW5pZWQgd2hlbiBmZXRjaGluZyB1c2VyIHByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGVybWlzc2lvbiBkZW5pZWQgd2hlbiBhY2Nlc3NpbmcgdXNlciBwcm9maWxlJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBwcm9maWxlOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGZldGNoIHVzZXIgcHJvZmlsZScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcclxuICAgIHRocm93IGVycm9yOyAvLyBQcm9wYWd1amVteSBixYLEhWQsIGFieSB3eXdvxYJ1asSFY3kgbcOzZ8WCIGdvIG9ic8WCdcW8ecSHXHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGEgbmV3IHVzZXIgcHJvZmlsZVxyXG5leHBvcnQgY29uc3QgY3JlYXRlVXNlclByb2ZpbGUgPSBhc3luYyAodXNlclByb2ZpbGUpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxyXG4gICAgICAuaW5zZXJ0KFt1c2VyUHJvZmlsZV0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJzIzNTA1Jykge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignQXR0ZW1wdCB0byBjcmVhdGUgZHVwbGljYXRlIHVzZXIgcHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIHByb2ZpbGUgYWxyZWFkeSBleGlzdHMnKTtcclxuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnNDI1MDEnKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignUGVybWlzc2lvbiBkZW5pZWQgd2hlbiBjcmVhdGluZyB1c2VyIHByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGVybWlzc2lvbiBkZW5pZWQgd2hlbiBjcmVhdGluZyB1c2VyIHByb2ZpbGUnKTtcclxuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnMjM1MDInKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignTWlzc2luZyByZXF1aXJlZCBmaWVsZCBmb3IgdXNlciBwcm9maWxlOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgZmllbGQgZm9yIHVzZXIgcHJvZmlsZScpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXIgcHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBjcmVhdGUgdXNlciBwcm9maWxlJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gZGF0YSByZXR1cm5lZCBhZnRlciB1c2VyIHByb2ZpbGUgY3JlYXRpb24nKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIHByb2ZpbGUgbWF5IGhhdmUgYmVlbiBjcmVhdGVkIGJ1dCBubyBkYXRhIHdhcyByZXR1cm5lZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5jdGlvbiB0byB1cGRhdGUgYSB1c2VyIHByb2ZpbGVcclxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXJQcm9maWxlID0gYXN5bmMgKHVzZXJJZCwgdXBkYXRlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXHJcbiAgICAgIC51cGRhdGUodXBkYXRlcylcclxuICAgICAgLmVxKCdpZCcsIHVzZXJJZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gZ2V0IGFjdGl2ZSBzdWJzY3JpcHRpb24gcGxhdGZvcm1zXHJcbmV4cG9ydCBjb25zdCBnZXRTdWJzY3JpcHRpb25QbGF0Zm9ybXMgPSBhc3luYyAoKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdzdWJzY3JpcHRpb25fcGxhdGZvcm1zJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnYWN0aXZlJywgdHJ1ZSlcclxuICAgICAgLm9yZGVyKCduYW1lJyk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5jdGlvbiB0byBnZXQgYWN0aXZlIHN1YnNjcmlwdGlvbiBvZmZlcnNcclxuZXhwb3J0IGNvbnN0IGdldFN1YnNjcmlwdGlvbk9mZmVycyA9IGFzeW5jIChmaWx0ZXJzID0ge30pID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gU3RhcnQgd2l0aCBiYXNlIHF1ZXJ5XHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnZ3JvdXBfc3VicycpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgc3Vic2NyaXB0aW9uX3BsYXRmb3JtcygqKSxcclxuICAgICAgICBncm91cHMoaWQsIG5hbWUpLFxyXG4gICAgICAgIG93bmVyOmdyb3VwcyFpbm5lcihvd25lcl9pZCwgdXNlcl9wcm9maWxlcyFpbm5lcihpZCwgZGlzcGxheV9uYW1lLCBhdmF0YXJfdXJsLCByYXRpbmdfYXZnLCByYXRpbmdfY291bnQsIHZlcmlmaWNhdGlvbl9sZXZlbCkpXHJcbiAgICAgIGApXHJcbiAgICAgIC5lcSgnc3RhdHVzJywgJ2FjdGl2ZScpO1xyXG4gICAgXHJcbiAgICAvLyBBcHBseSBmaWx0ZXJzXHJcbiAgICBpZiAoZmlsdGVycy5wbGF0Zm9ybUlkKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3BsYXRmb3JtX2lkJywgZmlsdGVycy5wbGF0Zm9ybUlkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGZpbHRlcnMubWluUHJpY2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmd0ZSgncHJpY2VfcGVyX3Nsb3QnLCBmaWx0ZXJzLm1pblByaWNlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGZpbHRlcnMubWF4UHJpY2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmx0ZSgncHJpY2VfcGVyX3Nsb3QnLCBmaWx0ZXJzLm1heFByaWNlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGZpbHRlcnMuYXZhaWxhYmxlU2xvdHMgPT09IHRydWUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5ndCgnc2xvdHNfYXZhaWxhYmxlJywgMCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEFkZCBvcmRlcmluZ1xyXG4gICAgY29uc3Qgb3JkZXJCeSA9IGZpbHRlcnMub3JkZXJCeSB8fCAnY3JlYXRlZF9hdCc7XHJcbiAgICBjb25zdCBhc2NlbmRpbmcgPSBmaWx0ZXJzLmFzY2VuZGluZyA9PT0gdHJ1ZTtcclxuICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIob3JkZXJCeSwgeyBhc2NlbmRpbmcgfSk7XHJcbiAgICBcclxuICAgIC8vIEFkZCBwYWdpbmF0aW9uXHJcbiAgICBpZiAoZmlsdGVycy5saW1pdCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmxpbWl0KGZpbHRlcnMubGltaXQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZmlsdGVycy5vZmZzZXQpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5yYW5nZShmaWx0ZXJzLm9mZnNldCwgZmlsdGVycy5vZmZzZXQgKyAoZmlsdGVycy5saW1pdCB8fCAxMCkgLSAxKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5jdGlvbiB0byBnZXQgYSBzcGVjaWZpYyBzdWJzY3JpcHRpb24gb2ZmZXJcclxuZXhwb3J0IGNvbnN0IGdldFN1YnNjcmlwdGlvbk9mZmVyID0gYXN5bmMgKG9mZmVySWQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2dyb3VwX3N1YnMnKVxyXG4gICAgICAuc2VsZWN0KGBcclxuICAgICAgICAqLFxyXG4gICAgICAgIHN1YnNjcmlwdGlvbl9wbGF0Zm9ybXMoKiksXHJcbiAgICAgICAgZ3JvdXBzKGlkLCBuYW1lLCBkZXNjcmlwdGlvbiksXHJcbiAgICAgICAgb3duZXI6Z3JvdXBzIWlubmVyKG93bmVyX2lkLCB1c2VyX3Byb2ZpbGVzIWlubmVyKGlkLCBkaXNwbGF5X25hbWUsIGF2YXRhcl91cmwsIHJhdGluZ19hdmcsIHJhdGluZ19jb3VudCwgdmVyaWZpY2F0aW9uX2xldmVsLCBiaW8pKVxyXG4gICAgICBgKVxyXG4gICAgICAuZXEoJ2lkJywgb2ZmZXJJZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgYSBuZXcgYXBwbGljYXRpb24gZm9yIGEgc3Vic2NyaXB0aW9uXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVBcHBsaWNhdGlvbiA9IGFzeW5jIChhcHBsaWNhdGlvbikgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYXBwbGljYXRpb25zJylcclxuICAgICAgLmluc2VydChbYXBwbGljYXRpb25dKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5jdGlvbiB0byBnZXQgdXNlcidzIGFwcGxpY2F0aW9uc1xyXG5leHBvcnQgY29uc3QgZ2V0VXNlckFwcGxpY2F0aW9ucyA9IGFzeW5jICh1c2VySWQsIHN0YXR1cyA9IG51bGwpID0+IHtcclxuICB0cnkge1xyXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2FwcGxpY2F0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZ3JvdXBfc3ViOmdyb3VwX3N1YnMoXHJcbiAgICAgICAgICBpZCwgXHJcbiAgICAgICAgICBwcmljZV9wZXJfc2xvdCxcclxuICAgICAgICAgIGN1cnJlbmN5LFxyXG4gICAgICAgICAgc3Vic2NyaXB0aW9uX3BsYXRmb3JtcyhpZCwgbmFtZSwgaWNvbilcclxuICAgICAgICApLFxyXG4gICAgICAgIHNlbGxlcjpncm91cF9zdWJzKFxyXG4gICAgICAgICAgZ3JvdXBzKFxyXG4gICAgICAgICAgICBvd25lcl9pZCwgXHJcbiAgICAgICAgICAgIHVzZXJfcHJvZmlsZXMhaW5uZXIoaWQsIGRpc3BsYXlfbmFtZSwgYXZhdGFyX3VybClcclxuICAgICAgICAgIClcclxuICAgICAgICApXHJcbiAgICAgIGApXHJcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XHJcbiAgICBcclxuICAgIC8vIEZpbHRlciBieSBzdGF0dXMgaWYgcHJvdmlkZWRcclxuICAgIGlmIChzdGF0dXMpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnc3RhdHVzJywgc3RhdHVzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gT3JkZXIgYnkgY3JlYXRlZF9hdCBkZXNjZW5kaW5nIChuZXdlc3QgZmlyc3QpXHJcbiAgICBxdWVyeSA9IHF1ZXJ5Lm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG4gICAgXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGdldCByZWNlaXZlZCBhcHBsaWNhdGlvbnMgZm9yIGdyb3VwIHN1YnNjcmlwdGlvbnMgb3duZWQgYnkgdXNlclxyXG5leHBvcnQgY29uc3QgZ2V0UmVjZWl2ZWRBcHBsaWNhdGlvbnMgPSBhc3luYyAodXNlcklkLCBzdGF0dXMgPSBudWxsKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbnMnKVxyXG4gICAgICAuc2VsZWN0KGBcclxuICAgICAgICAqLFxyXG4gICAgICAgIGdyb3VwX3N1Yjpncm91cF9zdWJzIWlubmVyKFxyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBwcmljZV9wZXJfc2xvdCxcclxuICAgICAgICAgIGN1cnJlbmN5LFxyXG4gICAgICAgICAgZ3JvdXBzIWlubmVyKFxyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgb3duZXJfaWRcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBzdWJzY3JpcHRpb25fcGxhdGZvcm1zKGlkLCBuYW1lLCBpY29uKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgYXBwbGljYW50OnVzZXJfcHJvZmlsZXMhaW5uZXIoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIGRpc3BsYXlfbmFtZSxcclxuICAgICAgICAgIGF2YXRhcl91cmwsXHJcbiAgICAgICAgICByYXRpbmdfYXZnLFxyXG4gICAgICAgICAgcmF0aW5nX2NvdW50XHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAuZXEoJ2dyb3VwX3N1Yi5ncm91cHMub3duZXJfaWQnLCB1c2VySWQpO1xyXG4gICAgXHJcbiAgICAvLyBGaWx0ZXIgYnkgc3RhdHVzIGlmIHByb3ZpZGVkXHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3N0YXR1cycsIHN0YXR1cyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIE9yZGVyIGJ5IGNyZWF0ZWRfYXQgZGVzY2VuZGluZyAobmV3ZXN0IGZpcnN0KVxyXG4gICAgcXVlcnkgPSBxdWVyeS5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5jdGlvbiB0byB1cGRhdGUgYXBwbGljYXRpb24gc3RhdHVzXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVBcHBsaWNhdGlvblN0YXR1cyA9IGFzeW5jIChhcHBsaWNhdGlvbklkLCBzdGF0dXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2FwcGxpY2F0aW9ucycpXHJcbiAgICAgIC51cGRhdGUoeyBzdGF0dXMgfSlcclxuICAgICAgLmVxKCdpZCcsIGFwcGxpY2F0aW9uSWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEV4cG9ydCB0aGUgU3VwYWJhc2UgY2xpZW50XHJcbmV4cG9ydCBkZWZhdWx0IHN1cGFiYXNlOyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJlcnJvciIsInN1cGFiYXNlIiwiaGFuZGxlU3VwYWJhc2VFcnJvciIsIm1lc3NhZ2UiLCJjb2RlIiwiZGV0YWlscyIsImdldFVzZXJCeUF1dGhJZCIsImF1dGhJZCIsImRhdGEiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJFcnJvciIsImNyZWF0ZVVzZXJQcm9maWxlIiwidXNlclByb2ZpbGUiLCJpbnNlcnQiLCJ3YXJuIiwidXBkYXRlVXNlclByb2ZpbGUiLCJ1c2VySWQiLCJ1cGRhdGVzIiwidXBkYXRlIiwiZ2V0U3Vic2NyaXB0aW9uUGxhdGZvcm1zIiwib3JkZXIiLCJnZXRTdWJzY3JpcHRpb25PZmZlcnMiLCJmaWx0ZXJzIiwicXVlcnkiLCJwbGF0Zm9ybUlkIiwibWluUHJpY2UiLCJ1bmRlZmluZWQiLCJndGUiLCJtYXhQcmljZSIsImx0ZSIsImF2YWlsYWJsZVNsb3RzIiwiZ3QiLCJvcmRlckJ5IiwiYXNjZW5kaW5nIiwibGltaXQiLCJvZmZzZXQiLCJyYW5nZSIsImdldFN1YnNjcmlwdGlvbk9mZmVyIiwib2ZmZXJJZCIsImNyZWF0ZUFwcGxpY2F0aW9uIiwiYXBwbGljYXRpb24iLCJnZXRVc2VyQXBwbGljYXRpb25zIiwic3RhdHVzIiwiZ2V0UmVjZWl2ZWRBcHBsaWNhdGlvbnMiLCJ1cGRhdGVBcHBsaWNhdGlvblN0YXR1cyIsImFwcGxpY2F0aW9uSWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase-client.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@clerk","vendor-chunks/next","vendor-chunks/tslib","vendor-chunks/cookie","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fprofile%2Froute&page=%2Fapi%2Fauth%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fprofile%2Froute.js&appDir=C%3A%5CUsers%5Cpawbak2%5CProjects%5CGroupShare%5Cgroupshare-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpawbak2%5CProjects%5CGroupShare%5Cgroupshare-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();